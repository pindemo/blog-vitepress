const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["public/chunks/VPLocalSearchBox.Cw1LVJ4z.js","public/chunks/framework.DvP3Bqxf.js"])))=>i.map(i=>d[i]);
import{d as C,o as v,c as _,r as P,n as U,a as Ee,t as j,b as $,w as S,e as I,T as Mo,_ as x,u as Pn,i as tl,f as nl,g as jo,h as L,j as w,k as m,l as tt,m as sr,p as M,q as ge,s as Xr,v as ae,x as Xn,y as Bo,z as rl,A as il,B as dt,F as G,C as ee,D as Ls,E as qr,G as R,H as Oe,I as As,J as wn,K as He,L as Jr,M as ol,N as Ds,O as Si,P as Fo,Q as Ns,R as Qr,S as al,U as sl,V as Ms,W as js,X as Ho,Y as ul,Z as ll,$ as cl,a0 as fl,a1 as hl,a2 as Vo,a3 as dl,a4 as pl}from"./framework.DvP3Bqxf.js";const vl=C({__name:"VPBadge",props:{text:{},type:{default:"tip"}},setup(t){return(e,i)=>(v(),_("span",{class:U(["VPBadge",e.type])},[P(e.$slots,"default",{},()=>[Ee(j(e.text),1)])],2))}}),yl={key:0,class:"VPBackdrop"},gl=C({__name:"VPBackdrop",props:{show:{type:Boolean}},setup(t){return(e,i)=>(v(),$(Mo,{name:"fade"},{default:S(()=>[e.show?(v(),_("div",yl)):I("",!0)]),_:1}))}}),ml=x(gl,[["__scopeId","data-v-350afc62"]]),N=Pn;function bl(t,e){let i,r=!1;return()=>{i&&clearTimeout(i),r?i=setTimeout(t,e):(t(),(r=!0)&&setTimeout(()=>r=!1,e))}}function ki(t){return/^\//.test(t)?t:`/${t}`}function Uo(t){const{pathname:e,search:i,hash:r,protocol:n}=new URL(t,"http://a.com");if(tl(t)||t.startsWith("#")||!n.startsWith("http")||!nl(e))return t;const{site:o}=N(),a=e.endsWith("/")||e.endsWith(".html")?t:t.replace(/(?:(^\.+)\/)?.*$/,`$1${e.replace(/(\.md)?$/,o.value.cleanUrls?"":".html")}${i}${r}`);return jo(a)}function qn({correspondingLink:t=!1}={}){const{site:e,localeIndex:i,page:r,theme:n,hash:o}=N(),a=L(()=>{var u,l;return{label:(u=e.value.locales[i.value])==null?void 0:u.label,link:((l=e.value.locales[i.value])==null?void 0:l.link)||(i.value==="root"?"/":`/${i.value}/`)}});return{localeLinks:L(()=>Object.entries(e.value.locales).flatMap(([u,l])=>a.value.label===l.label?[]:{text:l.label,link:_l(l.link||(u==="root"?"/":`/${u}/`),n.value.i18nRouting!==!1&&t,r.value.relativePath.slice(a.value.link.length-1),!e.value.cleanUrls)+o.value})),currentLang:a}}function _l(t,e,i,r){return e?t.replace(/\/$/,"")+ki(i.replace(/(^|\/)index\.md$/,"$1").replace(/\.md$/,r?".html":"")):t}const Pl={class:"NotFound"},wl={class:"code"},Sl={class:"title"},kl={class:"quote"},Ol={class:"action"},Tl=["href","aria-label"],El=C({__name:"NotFound",setup(t){const{theme:e}=N(),{currentLang:i}=qn();return(r,n)=>{var o,a,s,u,l;return v(),_("div",Pl,[w("p",wl,j(((o=m(e).notFound)==null?void 0:o.code)??"404"),1),w("h1",Sl,j(((a=m(e).notFound)==null?void 0:a.title)??"PAGE NOT FOUND"),1),n[0]||(n[0]=w("div",{class:"divider"},null,-1)),w("blockquote",kl,j(((s=m(e).notFound)==null?void 0:s.quote)??"But if you don't change your direction, and if you keep looking, you may end up where you are heading."),1),w("div",Ol,[w("a",{class:"link",href:m(jo)(m(i).link),"aria-label":((u=m(e).notFound)==null?void 0:u.linkLabel)??"go to home"},j(((l=m(e).notFound)==null?void 0:l.linkText)??"Take me home"),9,Tl)])])}}}),Cl=x(El,[["__scopeId","data-v-495aa994"]]);function Bs(t,e){if(Array.isArray(t))return ir(t);if(t==null)return[];e=ki(e);const i=Object.keys(t).sort((n,o)=>o.split("/").length-n.split("/").length).find(n=>e.startsWith(ki(n))),r=i?t[i]:[];return Array.isArray(r)?ir(r):ir(r.items,r.base)}function Il(t){const e=[];let i=0;for(const r in t){const n=t[r];if(n.items){i=e.push(n);continue}e[i]||e.push({items:[]}),e[i].items.push(n)}return e}function Rl(t){const e=[];function i(r){for(const n of r)n.text&&n.link&&e.push({text:n.text,link:n.link,docFooterText:n.docFooterText}),n.items&&i(n.items)}return i(t),e}function Oi(t,e){return Array.isArray(e)?e.some(i=>Oi(t,i)):tt(t,e.link)?!0:e.items?Oi(t,e.items):!1}function ir(t,e){return[...t].map(i=>{const r={...i},n=r.base||e;return n&&r.link&&(r.link=n+r.link),r.items&&(r.items=ir(r.items,n)),r})}function Ae(){const{frontmatter:t,page:e,theme:i}=N(),r=sr("(min-width: 960px)"),n=M(!1),o=L(()=>{const b=i.value.sidebar,g=e.value.relativePath;return b?Bs(b,g):[]}),a=M(o.value);ge(o,(b,g)=>{JSON.stringify(b)!==JSON.stringify(g)&&(a.value=o.value)});const s=L(()=>t.value.sidebar!==!1&&a.value.length>0&&t.value.layout!=="home"),u=L(()=>l?t.value.aside==null?i.value.aside==="left":t.value.aside==="left":!1),l=L(()=>t.value.layout==="home"?!1:t.value.aside!=null?!!t.value.aside:i.value.aside!==!1),c=L(()=>s.value&&r.value),f=L(()=>s.value?Il(a.value):[]);function d(){n.value=!0}function p(){n.value=!1}function y(){n.value?p():d()}return{isOpen:n,sidebar:a,sidebarGroups:f,hasSidebar:s,hasAside:l,leftAside:u,isSidebarEnabled:c,open:d,close:p,toggle:y}}function $l(t,e){let i;Xr(()=>{i=t.value?document.activeElement:void 0}),ae(()=>{window.addEventListener("keyup",r)}),Xn(()=>{window.removeEventListener("keyup",r)});function r(n){n.key==="Escape"&&t.value&&(e(),i==null||i.focus())}}function xl(t){const{page:e,hash:i}=N(),r=M(!1),n=L(()=>t.value.collapsed!=null),o=L(()=>!!t.value.link),a=M(!1),s=()=>{a.value=tt(e.value.relativePath,t.value.link)};ge([e,t,i],s),ae(s);const u=L(()=>a.value?!0:t.value.items?Oi(e.value.relativePath,t.value.items):!1),l=L(()=>!!(t.value.items&&t.value.items.length));Xr(()=>{r.value=!!(n.value&&t.value.collapsed)}),Bo(()=>{(a.value||u.value)&&(r.value=!1)});function c(){n.value&&(r.value=!r.value)}return{collapsed:r,collapsible:n,isLink:o,isActiveLink:a,hasActiveLink:u,hasChildren:l,toggle:c}}function Ll(){const{hasSidebar:t}=Ae(),e=sr("(min-width: 960px)"),i=sr("(min-width: 1280px)");return{isAsideEnabled:L(()=>!i.value&&!e.value?!1:t.value?i.value:e.value)}}const Ti=[];function Fs(t){return typeof t.outline=="object"&&!Array.isArray(t.outline)&&t.outline.label||t.outlineTitle||"On this page"}function zo(t){const e=[...document.querySelectorAll(".VPDoc :where(h1,h2,h3,h4,h5,h6)")].filter(i=>i.id&&i.hasChildNodes()).map(i=>{const r=Number(i.tagName[1]);return{element:i,title:Al(i),link:"#"+i.id,level:r}});return Dl(e,t)}function Al(t){let e="";for(const i of t.childNodes)if(i.nodeType===1){if(i.classList.contains("VPBadge")||i.classList.contains("header-anchor")||i.classList.contains("ignore-header"))continue;e+=i.textContent}else i.nodeType===3&&(e+=i.textContent);return e.trim()}function Dl(t,e){if(e===!1)return[];const i=(typeof e=="object"&&!Array.isArray(e)?e.level:e)||2,[r,n]=typeof i=="number"?[i,i]:i==="deep"?[2,6]:i;t=t.filter(a=>a.level>=r&&a.level<=n),Ti.length=0;for(const{element:a,link:s}of t)Ti.push({element:a,link:s});const o=[];e:for(let a=0;a<t.length;a++){const s=t[a];if(a===0)o.push(s);else{for(let u=a-1;u>=0;u--){const l=t[u];if(l.level<s.level){(l.children||(l.children=[])).push(s);continue e}}o.push(s)}}return o}function Nl(t,e){const{isAsideEnabled:i}=Ll(),r=bl(o,100);let n=null;ae(()=>{requestAnimationFrame(o),window.addEventListener("scroll",r)}),rl(()=>{a(location.hash)}),Xn(()=>{window.removeEventListener("scroll",r)});function o(){if(!i.value)return;const s=window.scrollY,u=window.innerHeight,l=document.body.offsetHeight,c=Math.abs(s+u-l)<1,f=Ti.map(({element:p,link:y})=>({link:y,top:Ml(p)})).filter(({top:p})=>!Number.isNaN(p)).sort((p,y)=>p.top-y.top);if(!f.length){a(null);return}if(s<1){a(null);return}if(c){a(f[f.length-1].link);return}let d=null;for(const{link:p,top:y}of f){if(y>s+il()+4)break;d=p}a(d)}function a(s){n&&n.classList.remove("active"),s==null?n=null:n=t.value.querySelector(`a[href="${decodeURIComponent(s)}"]`);const u=n;u?(u.classList.add("active"),e.value.style.top=u.offsetTop+39+"px",e.value.style.opacity="1"):(e.value.style.top="33px",e.value.style.opacity="0")}}function Ml(t){let e=0;for(;t!==document.body;){if(t===null)return NaN;e+=t.offsetTop,t=t.offsetParent}return e}const jl=["href","title"],Bl=C({__name:"VPDocOutlineItem",props:{headers:{},root:{type:Boolean}},setup(t){function e({target:i}){const r=i.href.split("#")[1],n=document.getElementById(decodeURIComponent(r));n==null||n.focus({preventScroll:!0})}return(i,r)=>{const n=dt("VPDocOutlineItem",!0);return v(),_("ul",{class:U(["VPDocOutlineItem",i.root?"root":"nested"])},[(v(!0),_(G,null,ee(i.headers,({children:o,link:a,title:s})=>(v(),_("li",null,[w("a",{class:"outline-link",href:a,onClick:e,title:s},j(s),9,jl),o!=null&&o.length?(v(),$(n,{key:0,headers:o},null,8,["headers"])):I("",!0)]))),256))],2)}}}),Hs=x(Bl,[["__scopeId","data-v-30d62dda"]]),Fl={class:"content"},Hl={"aria-level":"2",class:"outline-title",id:"doc-outline-aria-label",role:"heading"},Vl=C({__name:"VPDocAsideOutline",setup(t){const{frontmatter:e,theme:i}=N(),r=Ls([]);qr(()=>{r.value=zo(e.value.outline??i.value.outline)});const n=M(),o=M();return Nl(n,o),(a,s)=>(v(),_("nav",{"aria-labelledby":"doc-outline-aria-label",class:U(["VPDocAsideOutline",{"has-outline":r.value.length>0}]),ref_key:"container",ref:n},[w("div",Fl,[w("div",{class:"outline-marker",ref_key:"marker",ref:o},null,512),w("div",Hl,j(m(Fs)(m(i))),1),R(Hs,{headers:r.value,root:!0},null,8,["headers"])])],2))}}),Ul=x(Vl,[["__scopeId","data-v-dd8151fd"]]),zl={class:"VPDocAsideCarbonAds"},Kl=C({__name:"VPDocAsideCarbonAds",props:{carbonAds:{}},setup(t){const e=()=>null;return(i,r)=>(v(),_("div",zl,[R(m(e),{"carbon-ads":i.carbonAds},null,8,["carbon-ads"])]))}}),Gl={class:"VPDocAside"},Wl=C({__name:"VPDocAside",setup(t){const{theme:e}=N();return(i,r)=>(v(),_("div",Gl,[P(i.$slots,"aside-top",{},void 0,!0),P(i.$slots,"aside-outline-before",{},void 0,!0),R(Ul),P(i.$slots,"aside-outline-after",{},void 0,!0),r[0]||(r[0]=w("div",{class:"spacer"},null,-1)),P(i.$slots,"aside-ads-before",{},void 0,!0),m(e).carbonAds?(v(),$(Kl,{key:0,"carbon-ads":m(e).carbonAds},null,8,["carbon-ads"])):I("",!0),P(i.$slots,"aside-ads-after",{},void 0,!0),P(i.$slots,"aside-bottom",{},void 0,!0)]))}}),Yl=x(Wl,[["__scopeId","data-v-3eb83112"]]);function Xl(){const{theme:t,page:e}=N();return L(()=>{const{text:i="Edit this page",pattern:r=""}=t.value.editLink||{};let n;return typeof r=="function"?n=r(e.value):n=r.replace(/:path/g,e.value.filePath),{url:n,text:i}})}function ql(){const{page:t,theme:e,frontmatter:i}=N();return L(()=>{var l,c,f,d,p,y,b,g;const r=Bs(e.value.sidebar,t.value.relativePath),n=Rl(r),o=Jl(n,T=>T.link.replace(/[?#].*$/,"")),a=o.findIndex(T=>tt(t.value.relativePath,T.link)),s=((l=e.value.docFooter)==null?void 0:l.prev)===!1&&!i.value.prev||i.value.prev===!1,u=((c=e.value.docFooter)==null?void 0:c.next)===!1&&!i.value.next||i.value.next===!1;return{prev:s?void 0:{text:(typeof i.value.prev=="string"?i.value.prev:typeof i.value.prev=="object"?i.value.prev.text:void 0)??((f=o[a-1])==null?void 0:f.docFooterText)??((d=o[a-1])==null?void 0:d.text),link:(typeof i.value.prev=="object"?i.value.prev.link:void 0)??((p=o[a-1])==null?void 0:p.link)},next:u?void 0:{text:(typeof i.value.next=="string"?i.value.next:typeof i.value.next=="object"?i.value.next.text:void 0)??((y=o[a+1])==null?void 0:y.docFooterText)??((b=o[a+1])==null?void 0:b.text),link:(typeof i.value.next=="object"?i.value.next.link:void 0)??((g=o[a+1])==null?void 0:g.link)}}})}function Jl(t,e){const i=new Set;return t.filter(r=>{const n=e(r);return i.has(n)?!1:i.add(n)})}const Te=C({__name:"VPLink",props:{tag:{},href:{},noIcon:{type:Boolean},target:{},rel:{}},setup(t){const e=t,i=L(()=>e.tag??(e.href?"a":"span")),r=L(()=>e.href&&As.test(e.href)||e.target==="_blank");return(n,o)=>(v(),$(Oe(i.value),{class:U(["VPLink",{link:n.href,"vp-external-link-icon":r.value,"no-icon":n.noIcon}]),href:n.href?m(Uo)(n.href):void 0,target:n.target??(r.value?"_blank":void 0),rel:n.rel??(r.value?"noreferrer":void 0)},{default:S(()=>[P(n.$slots,"default")]),_:3},8,["class","href","target","rel"]))}}),Ql={class:"VPLastUpdated"},Zl=["datetime"],ec=C({__name:"VPDocFooterLastUpdated",setup(t){const{theme:e,page:i,lang:r}=N(),n=L(()=>new Date(i.value.lastUpdated)),o=L(()=>n.value.toISOString()),a=M("");return ae(()=>{Xr(()=>{var s,u,l;a.value=new Intl.DateTimeFormat((u=(s=e.value.lastUpdated)==null?void 0:s.formatOptions)!=null&&u.forceLocale?r.value:void 0,((l=e.value.lastUpdated)==null?void 0:l.formatOptions)??{dateStyle:"short",timeStyle:"short"}).format(n.value)})}),(s,u)=>{var l;return v(),_("p",Ql,[Ee(j(((l=m(e).lastUpdated)==null?void 0:l.text)||m(e).lastUpdatedText||"Last updated")+": ",1),w("time",{datetime:o.value},j(a.value),9,Zl)])}}}),tc=x(ec,[["__scopeId","data-v-c0506c11"]]),nc={key:0,class:"VPDocFooter"},rc={key:0,class:"edit-info"},ic={key:0,class:"edit-link"},oc={key:1,class:"last-updated"},ac={key:1,class:"prev-next","aria-labelledby":"doc-footer-aria-label"},sc={class:"pager"},uc=["innerHTML"],lc=["innerHTML"],cc={class:"pager"},fc=["innerHTML"],hc=["innerHTML"],dc=C({__name:"VPDocFooter",setup(t){const{theme:e,page:i,frontmatter:r}=N(),n=Xl(),o=ql(),a=L(()=>e.value.editLink&&r.value.editLink!==!1),s=L(()=>i.value.lastUpdated),u=L(()=>a.value||s.value||o.value.prev||o.value.next);return(l,c)=>{var f,d,p,y;return u.value?(v(),_("footer",nc,[P(l.$slots,"doc-footer-before",{},void 0,!0),a.value||s.value?(v(),_("div",rc,[a.value?(v(),_("div",ic,[R(Te,{class:"edit-link-button",href:m(n).url,"no-icon":!0},{default:S(()=>[c[0]||(c[0]=w("span",{class:"vpi-square-pen edit-link-icon"},null,-1)),Ee(" "+j(m(n).text),1)]),_:1},8,["href"])])):I("",!0),s.value?(v(),_("div",oc,[R(tc)])):I("",!0)])):I("",!0),(f=m(o).prev)!=null&&f.link||(d=m(o).next)!=null&&d.link?(v(),_("nav",ac,[c[1]||(c[1]=w("span",{class:"visually-hidden",id:"doc-footer-aria-label"},"Pager",-1)),w("div",sc,[(p=m(o).prev)!=null&&p.link?(v(),$(Te,{key:0,class:"pager-link prev",href:m(o).prev.link},{default:S(()=>{var b;return[w("span",{class:"desc",innerHTML:((b=m(e).docFooter)==null?void 0:b.prev)||"Previous page"},null,8,uc),w("span",{class:"title",innerHTML:m(o).prev.text},null,8,lc)]}),_:1},8,["href"])):I("",!0)]),w("div",cc,[(y=m(o).next)!=null&&y.link?(v(),$(Te,{key:0,class:"pager-link next",href:m(o).next.link},{default:S(()=>{var b;return[w("span",{class:"desc",innerHTML:((b=m(e).docFooter)==null?void 0:b.next)||"Next page"},null,8,fc),w("span",{class:"title",innerHTML:m(o).next.text},null,8,hc)]}),_:1},8,["href"])):I("",!0)])])):I("",!0)])):I("",!0)}}}),pc=x(dc,[["__scopeId","data-v-0cff4255"]]),vc={class:"container"},yc={class:"aside-container"},gc={class:"aside-content"},mc={class:"content"},bc={class:"content-container"},_c={class:"main"},Pc=C({__name:"VPDoc",setup(t){const{theme:e}=N(),i=wn(),{hasSidebar:r,hasAside:n,leftAside:o}=Ae(),a=L(()=>i.path.replace(/[./]+/g,"_").replace(/_html$/,""));return(s,u)=>{const l=dt("Content");return v(),_("div",{class:U(["VPDoc",{"has-sidebar":m(r),"has-aside":m(n)}])},[P(s.$slots,"doc-top",{},void 0,!0),w("div",vc,[m(n)?(v(),_("div",{key:0,class:U(["aside",{"left-aside":m(o)}])},[u[0]||(u[0]=w("div",{class:"aside-curtain"},null,-1)),w("div",yc,[w("div",gc,[R(Yl,null,{"aside-top":S(()=>[P(s.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":S(()=>[P(s.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":S(()=>[P(s.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":S(()=>[P(s.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":S(()=>[P(s.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":S(()=>[P(s.$slots,"aside-ads-after",{},void 0,!0)]),_:3})])])],2)):I("",!0),w("div",mc,[w("div",bc,[P(s.$slots,"doc-before",{},void 0,!0),w("main",_c,[R(l,{class:U(["vp-doc",[a.value,m(e).externalLinkIcon&&"external-link-icon-enabled"]])},null,8,["class"])]),R(pc,null,{"doc-footer-before":S(()=>[P(s.$slots,"doc-footer-before",{},void 0,!0)]),_:3}),P(s.$slots,"doc-after",{},void 0,!0)])])]),P(s.$slots,"doc-bottom",{},void 0,!0)],2)}}}),wc=x(Pc,[["__scopeId","data-v-f971b98d"]]),Sc=C({__name:"VPButton",props:{tag:{},size:{default:"medium"},theme:{default:"brand"},text:{},href:{},target:{},rel:{}},setup(t){const e=t,i=L(()=>e.href&&As.test(e.href)),r=L(()=>e.tag||e.href?"a":"button");return(n,o)=>(v(),$(Oe(r.value),{class:U(["VPButton",[n.size,n.theme]]),href:n.href?m(Uo)(n.href):void 0,target:e.target??(i.value?"_blank":void 0),rel:e.rel??(i.value?"noreferrer":void 0)},{default:S(()=>[Ee(j(n.text),1)]),_:1},8,["class","href","target","rel"]))}}),kc=x(Sc,[["__scopeId","data-v-b4424594"]]),Oc=["src","alt"],Tc=C({inheritAttrs:!1,__name:"VPImage",props:{image:{},alt:{}},setup(t){return(e,i)=>{const r=dt("VPImage",!0);return e.image?(v(),_(G,{key:0},[typeof e.image=="string"||"src"in e.image?(v(),_("img",He({key:0,class:"VPImage"},typeof e.image=="string"?e.$attrs:{...e.image,...e.$attrs},{src:m(jo)(typeof e.image=="string"?e.image:e.image.src),alt:e.alt??(typeof e.image=="string"?"":e.image.alt||"")}),null,16,Oc)):(v(),_(G,{key:1},[R(r,He({class:"dark",image:e.image.dark,alt:e.image.alt},e.$attrs),null,16,["image","alt"]),R(r,He({class:"light",image:e.image.light,alt:e.image.alt},e.$attrs),null,16,["image","alt"])],64))],64)):I("",!0)}}}),ur=x(Tc,[["__scopeId","data-v-9afefeca"]]),Ec={class:"container"},Cc={class:"main"},Ic={key:0,class:"name"},Rc=["innerHTML"],$c=["innerHTML"],xc=["innerHTML"],Lc={key:0,class:"actions"},Ac={key:0,class:"image"},Dc={class:"image-container"},Nc=C({__name:"VPHero",props:{name:{},text:{},tagline:{},image:{},actions:{}},setup(t){const e=Jr("hero-image-slot-exists");return(i,r)=>(v(),_("div",{class:U(["VPHero",{"has-image":i.image||m(e)}])},[w("div",Ec,[w("div",Cc,[P(i.$slots,"home-hero-info-before",{},void 0,!0),P(i.$slots,"home-hero-info",{},()=>[i.name?(v(),_("h1",Ic,[w("span",{innerHTML:i.name,class:"clip"},null,8,Rc)])):I("",!0),i.text?(v(),_("p",{key:1,innerHTML:i.text,class:"text"},null,8,$c)):I("",!0),i.tagline?(v(),_("p",{key:2,innerHTML:i.tagline,class:"tagline"},null,8,xc)):I("",!0)],!0),P(i.$slots,"home-hero-info-after",{},void 0,!0),i.actions?(v(),_("div",Lc,[(v(!0),_(G,null,ee(i.actions,n=>(v(),_("div",{key:n.link,class:"action"},[R(kc,{tag:"a",size:"medium",theme:n.theme,text:n.text,href:n.link,target:n.target,rel:n.rel},null,8,["theme","text","href","target","rel"])]))),128))])):I("",!0),P(i.$slots,"home-hero-actions-after",{},void 0,!0)]),i.image||m(e)?(v(),_("div",Ac,[w("div",Dc,[r[0]||(r[0]=w("div",{class:"image-bg"},null,-1)),P(i.$slots,"home-hero-image",{},()=>[i.image?(v(),$(ur,{key:0,class:"image-src",image:i.image},null,8,["image"])):I("",!0)],!0)])])):I("",!0)])],2))}}),Mc=x(Nc,[["__scopeId","data-v-3aa984d2"]]),jc=C({__name:"VPHomeHero",setup(t){const{frontmatter:e}=N();return(i,r)=>m(e).hero?(v(),$(Mc,{key:0,class:"VPHomeHero",name:m(e).hero.name,text:m(e).hero.text,tagline:m(e).hero.tagline,image:m(e).hero.image,actions:m(e).hero.actions},{"home-hero-info-before":S(()=>[P(i.$slots,"home-hero-info-before")]),"home-hero-info":S(()=>[P(i.$slots,"home-hero-info")]),"home-hero-info-after":S(()=>[P(i.$slots,"home-hero-info-after")]),"home-hero-actions-after":S(()=>[P(i.$slots,"home-hero-actions-after")]),"home-hero-image":S(()=>[P(i.$slots,"home-hero-image")]),_:3},8,["name","text","tagline","image","actions"])):I("",!0)}}),Bc={class:"box"},Fc={key:0,class:"icon"},Hc=["innerHTML"],Vc=["innerHTML"],Uc=["innerHTML"],zc={key:4,class:"link-text"},Kc={class:"link-text-value"},Gc=C({__name:"VPFeature",props:{icon:{},title:{},details:{},link:{},linkText:{},rel:{},target:{}},setup(t){return(e,i)=>(v(),$(Te,{class:"VPFeature",href:e.link,rel:e.rel,target:e.target,"no-icon":!0,tag:e.link?"a":"div"},{default:S(()=>[w("article",Bc,[typeof e.icon=="object"&&e.icon.wrap?(v(),_("div",Fc,[R(ur,{image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])])):typeof e.icon=="object"?(v(),$(ur,{key:1,image:e.icon,alt:e.icon.alt,height:e.icon.height||48,width:e.icon.width||48},null,8,["image","alt","height","width"])):e.icon?(v(),_("div",{key:2,class:"icon",innerHTML:e.icon},null,8,Hc)):I("",!0),w("h2",{class:"title",innerHTML:e.title},null,8,Vc),e.details?(v(),_("p",{key:3,class:"details",innerHTML:e.details},null,8,Uc)):I("",!0),e.linkText?(v(),_("div",zc,[w("p",Kc,[Ee(j(e.linkText)+" ",1),i[0]||(i[0]=w("span",{class:"vpi-arrow-right link-text-icon"},null,-1))])])):I("",!0)])]),_:1},8,["href","rel","target","tag"]))}}),Wc=x(Gc,[["__scopeId","data-v-8f531af9"]]),Yc={key:0,class:"VPFeatures"},Xc={class:"container"},qc={class:"items"},Jc=C({__name:"VPFeatures",props:{features:{}},setup(t){const e=t,i=L(()=>{const r=e.features.length;if(r){if(r===2)return"grid-2";if(r===3)return"grid-3";if(r%3===0)return"grid-6";if(r>3)return"grid-4"}else return});return(r,n)=>r.features?(v(),_("div",Yc,[w("div",Xc,[w("div",qc,[(v(!0),_(G,null,ee(r.features,o=>(v(),_("div",{key:o.title,class:U(["item",[i.value]])},[R(Wc,{icon:o.icon,title:o.title,details:o.details,link:o.link,"link-text":o.linkText,rel:o.rel,target:o.target},null,8,["icon","title","details","link","link-text","rel","target"])],2))),128))])])])):I("",!0)}}),Qc=x(Jc,[["__scopeId","data-v-02923ed1"]]),Zc=C({__name:"VPHomeFeatures",setup(t){const{frontmatter:e}=N();return(i,r)=>m(e).features?(v(),$(Qc,{key:0,class:"VPHomeFeatures",features:m(e).features},null,8,["features"])):I("",!0)}}),ef=C({__name:"VPHomeContent",setup(t){const{width:e}=ol({initialWidth:0,includeScrollbar:!1});return(i,r)=>(v(),_("div",{class:"vp-doc container",style:Ds(m(e)?{"--vp-offset":`calc(50% - ${m(e)/2}px)`}:{})},[P(i.$slots,"default",{},void 0,!0)],4))}}),tf=x(ef,[["__scopeId","data-v-7565cffa"]]),nf={class:"VPHome"},rf=C({__name:"VPHome",setup(t){const{frontmatter:e}=N();return(i,r)=>{const n=dt("Content");return v(),_("div",nf,[P(i.$slots,"home-hero-before",{},void 0,!0),R(jc,null,{"home-hero-info-before":S(()=>[P(i.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":S(()=>[P(i.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":S(()=>[P(i.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":S(()=>[P(i.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":S(()=>[P(i.$slots,"home-hero-image",{},void 0,!0)]),_:3}),P(i.$slots,"home-hero-after",{},void 0,!0),P(i.$slots,"home-features-before",{},void 0,!0),R(Zc),P(i.$slots,"home-features-after",{},void 0,!0),m(e).markdownStyles!==!1?(v(),$(tf,{key:0},{default:S(()=>[R(n)]),_:1})):(v(),$(n,{key:1}))])}}}),of=x(rf,[["__scopeId","data-v-7bfa829c"]]),af={},sf={class:"VPPage"};function uf(t,e){const i=dt("Content");return v(),_("div",sf,[P(t.$slots,"page-top"),R(i),P(t.$slots,"page-bottom")])}const lf=x(af,[["render",uf]]),cf=C({__name:"VPContent",setup(t){const{page:e,frontmatter:i}=N(),{hasSidebar:r}=Ae();return(n,o)=>(v(),_("div",{class:U(["VPContent",{"has-sidebar":m(r),"is-home":m(i).layout==="home"}]),id:"VPContent"},[m(e).isNotFound?P(n.$slots,"not-found",{key:0},()=>[R(Cl)],!0):m(i).layout==="page"?(v(),$(lf,{key:1},{"page-top":S(()=>[P(n.$slots,"page-top",{},void 0,!0)]),"page-bottom":S(()=>[P(n.$slots,"page-bottom",{},void 0,!0)]),_:3})):m(i).layout==="home"?(v(),$(of,{key:2},{"home-hero-before":S(()=>[P(n.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":S(()=>[P(n.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":S(()=>[P(n.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":S(()=>[P(n.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":S(()=>[P(n.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":S(()=>[P(n.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":S(()=>[P(n.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":S(()=>[P(n.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":S(()=>[P(n.$slots,"home-features-after",{},void 0,!0)]),_:3})):m(i).layout&&m(i).layout!=="doc"?(v(),$(Oe(m(i).layout),{key:3})):(v(),$(wc,{key:4},{"doc-top":S(()=>[P(n.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":S(()=>[P(n.$slots,"doc-bottom",{},void 0,!0)]),"doc-footer-before":S(()=>[P(n.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":S(()=>[P(n.$slots,"doc-before",{},void 0,!0)]),"doc-after":S(()=>[P(n.$slots,"doc-after",{},void 0,!0)]),"aside-top":S(()=>[P(n.$slots,"aside-top",{},void 0,!0)]),"aside-outline-before":S(()=>[P(n.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":S(()=>[P(n.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":S(()=>[P(n.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":S(()=>[P(n.$slots,"aside-ads-after",{},void 0,!0)]),"aside-bottom":S(()=>[P(n.$slots,"aside-bottom",{},void 0,!0)]),_:3}))],2))}}),ff=x(cf,[["__scopeId","data-v-32e76e98"]]),hf={class:"container"},df=["innerHTML"],pf=["innerHTML"],vf=C({__name:"VPFooter",setup(t){const{theme:e,frontmatter:i}=N(),{hasSidebar:r}=Ae();return(n,o)=>m(e).footer&&m(i).footer!==!1?(v(),_("footer",{key:0,class:U(["VPFooter",{"has-sidebar":m(r)}])},[w("div",hf,[m(e).footer.message?(v(),_("p",{key:0,class:"message",innerHTML:m(e).footer.message},null,8,df)):I("",!0),m(e).footer.copyright?(v(),_("p",{key:1,class:"copyright",innerHTML:m(e).footer.copyright},null,8,pf)):I("",!0)])],2)):I("",!0)}}),yf=x(vf,[["__scopeId","data-v-18658bdc"]]);function gf(){const{theme:t,frontmatter:e}=N(),i=Ls([]),r=L(()=>i.value.length>0);return qr(()=>{i.value=zo(e.value.outline??t.value.outline)}),{headers:i,hasLocalNav:r}}const mf={class:"menu-text"},bf={class:"header"},_f={class:"outline"},Pf=C({__name:"VPLocalNavOutlineDropdown",props:{headers:{},navHeight:{}},setup(t){const e=t,{theme:i}=N(),r=M(!1),n=M(0),o=M(),a=M();function s(f){var d;(d=o.value)!=null&&d.contains(f.target)||(r.value=!1)}ge(r,f=>{if(f){document.addEventListener("click",s);return}document.removeEventListener("click",s)}),Si("Escape",()=>{r.value=!1}),qr(()=>{r.value=!1});function u(){r.value=!r.value,n.value=window.innerHeight+Math.min(window.scrollY-e.navHeight,0)}function l(f){f.target.classList.contains("outline-link")&&(a.value&&(a.value.style.transition="none"),Fo(()=>{r.value=!1}))}function c(){r.value=!1,window.scrollTo({top:0,left:0,behavior:"smooth"})}return(f,d)=>(v(),_("div",{class:"VPLocalNavOutlineDropdown",style:Ds({"--vp-vh":n.value+"px"}),ref_key:"main",ref:o},[f.headers.length>0?(v(),_("button",{key:0,onClick:u,class:U({open:r.value})},[w("span",mf,j(m(Fs)(m(i))),1),d[0]||(d[0]=w("span",{class:"vpi-chevron-right icon"},null,-1))],2)):(v(),_("button",{key:1,onClick:c},j(m(i).returnToTopLabel||"Return to top"),1)),R(Mo,{name:"flyout"},{default:S(()=>[r.value?(v(),_("div",{key:0,ref_key:"items",ref:a,class:"items",onClick:l},[w("div",bf,[w("a",{class:"top-link",href:"#",onClick:c},j(m(i).returnToTopLabel||"Return to top"),1)]),w("div",_f,[R(Hs,{headers:f.headers},null,8,["headers"])])],512)):I("",!0)]),_:1})],4))}}),wf=x(Pf,[["__scopeId","data-v-a906232e"]]),Sf={class:"container"},kf=["aria-expanded"],Of={class:"menu-text"},Tf=C({__name:"VPLocalNav",props:{open:{type:Boolean}},emits:["open-menu"],setup(t){const{theme:e,frontmatter:i}=N(),{hasSidebar:r}=Ae(),{headers:n}=gf(),{y:o}=Ns(),a=M(0);ae(()=>{a.value=parseInt(getComputedStyle(document.documentElement).getPropertyValue("--vp-nav-height"))}),qr(()=>{n.value=zo(i.value.outline??e.value.outline)});const s=L(()=>n.value.length===0),u=L(()=>s.value&&!r.value),l=L(()=>({VPLocalNav:!0,"has-sidebar":r.value,empty:s.value,fixed:u.value}));return(c,f)=>m(i).layout!=="home"&&(!u.value||m(o)>=a.value)?(v(),_("div",{key:0,class:U(l.value)},[w("div",Sf,[m(r)?(v(),_("button",{key:0,class:"menu","aria-expanded":c.open,"aria-controls":"VPSidebarNav",onClick:f[0]||(f[0]=d=>c.$emit("open-menu"))},[f[1]||(f[1]=w("span",{class:"vpi-align-left menu-icon"},null,-1)),w("span",Of,j(m(e).sidebarMenuLabel||"Menu"),1)],8,kf)):I("",!0),R(wf,{headers:m(n),navHeight:a.value},null,8,["headers","navHeight"])])],2)):I("",!0)}}),Ef=x(Tf,[["__scopeId","data-v-6653b6f3"]]);function Cf(){const t=M(!1);function e(){t.value=!0,window.addEventListener("resize",n)}function i(){t.value=!1,window.removeEventListener("resize",n)}function r(){t.value?i():e()}function n(){window.outerWidth>=768&&i()}const o=wn();return ge(()=>o.path,i),{isScreenOpen:t,openScreen:e,closeScreen:i,toggleScreen:r}}const If={},Rf={class:"VPSwitch",type:"button",role:"switch"},$f={class:"check"},xf={key:0,class:"icon"};function Lf(t,e){return v(),_("button",Rf,[w("span",$f,[t.$slots.default?(v(),_("span",xf,[P(t.$slots,"default",{},void 0,!0)])):I("",!0)])])}const Af=x(If,[["render",Lf],["__scopeId","data-v-14d844ee"]]),Df=C({__name:"VPSwitchAppearance",setup(t){const{isDark:e,theme:i}=N(),r=Jr("toggle-appearance",()=>{e.value=!e.value}),n=M("");return Bo(()=>{n.value=e.value?i.value.lightModeSwitchTitle||"Switch to light theme":i.value.darkModeSwitchTitle||"Switch to dark theme"}),(o,a)=>(v(),$(Af,{title:n.value,class:"VPSwitchAppearance","aria-checked":m(e),onClick:m(r)},{default:S(()=>a[0]||(a[0]=[w("span",{class:"vpi-sun sun"},null,-1),w("span",{class:"vpi-moon moon"},null,-1)])),_:1},8,["title","aria-checked","onClick"]))}}),Ko=x(Df,[["__scopeId","data-v-7893617c"]]),Nf={key:0,class:"VPNavBarAppearance"},Mf=C({__name:"VPNavBarAppearance",setup(t){const{site:e}=N();return(i,r)=>m(e).appearance&&m(e).appearance!=="force-dark"&&m(e).appearance!=="force-auto"?(v(),_("div",Nf,[R(Ko)])):I("",!0)}}),jf=x(Mf,[["__scopeId","data-v-73a31b5e"]]),Go=M();let Vs=!1,ai=0;function Bf(t){const e=M(!1);if(Qr){!Vs&&Ff(),ai++;const i=ge(Go,r=>{var n,o,a;r===t.el.value||(n=t.el.value)!=null&&n.contains(r)?(e.value=!0,(o=t.onFocus)==null||o.call(t)):(e.value=!1,(a=t.onBlur)==null||a.call(t))});Xn(()=>{i(),ai--,ai||Hf()})}return al(e)}function Ff(){document.addEventListener("focusin",Us),Vs=!0,Go.value=document.activeElement}function Hf(){document.removeEventListener("focusin",Us)}function Us(){Go.value=document.activeElement}const Vf={class:"VPMenuLink"},Uf=C({__name:"VPMenuLink",props:{item:{}},setup(t){const{page:e}=N();return(i,r)=>(v(),_("div",Vf,[R(Te,{class:U({active:m(tt)(m(e).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,target:i.item.target,rel:i.item.rel},{default:S(()=>[Ee(j(i.item.text),1)]),_:1},8,["class","href","target","rel"])]))}}),Zr=x(Uf,[["__scopeId","data-v-ccea93e6"]]),zf={class:"VPMenuGroup"},Kf={key:0,class:"title"},Gf=C({__name:"VPMenuGroup",props:{text:{},items:{}},setup(t){return(e,i)=>(v(),_("div",zf,[e.text?(v(),_("p",Kf,j(e.text),1)):I("",!0),(v(!0),_(G,null,ee(e.items,r=>(v(),_(G,null,["link"in r?(v(),$(Zr,{key:0,item:r},null,8,["item"])):I("",!0)],64))),256))]))}}),Wf=x(Gf,[["__scopeId","data-v-e7f145f9"]]),Yf={class:"VPMenu"},Xf={key:0,class:"items"},qf=C({__name:"VPMenu",props:{items:{}},setup(t){return(e,i)=>(v(),_("div",Yf,[e.items?(v(),_("div",Xf,[(v(!0),_(G,null,ee(e.items,r=>(v(),_(G,{key:JSON.stringify(r)},["link"in r?(v(),$(Zr,{key:0,item:r},null,8,["item"])):"component"in r?(v(),$(Oe(r.component),He({key:1,ref_for:!0},r.props),null,16)):(v(),$(Wf,{key:2,text:r.text,items:r.items},null,8,["text","items"]))],64))),128))])):I("",!0),P(e.$slots,"default",{},void 0,!0)]))}}),Jf=x(qf,[["__scopeId","data-v-664b751c"]]),Qf=["aria-expanded","aria-label"],Zf={key:0,class:"text"},eh=["innerHTML"],th={key:1,class:"vpi-more-horizontal icon"},nh={class:"menu"},rh=C({__name:"VPFlyout",props:{icon:{},button:{},label:{},items:{}},setup(t){const e=M(!1),i=M();Bf({el:i,onBlur:r});function r(){e.value=!1}return(n,o)=>(v(),_("div",{class:"VPFlyout",ref_key:"el",ref:i,onMouseenter:o[1]||(o[1]=a=>e.value=!0),onMouseleave:o[2]||(o[2]=a=>e.value=!1)},[w("button",{type:"button",class:"button","aria-haspopup":"true","aria-expanded":e.value,"aria-label":n.label,onClick:o[0]||(o[0]=a=>e.value=!e.value)},[n.button||n.icon?(v(),_("span",Zf,[n.icon?(v(),_("span",{key:0,class:U([n.icon,"option-icon"])},null,2)):I("",!0),n.button?(v(),_("span",{key:1,innerHTML:n.button},null,8,eh)):I("",!0),o[3]||(o[3]=w("span",{class:"vpi-chevron-down text-icon"},null,-1))])):(v(),_("span",th))],8,Qf),w("div",nh,[R(Jf,{items:n.items},{default:S(()=>[P(n.$slots,"default",{},void 0,!0)]),_:3},8,["items"])])],544))}}),Wo=x(rh,[["__scopeId","data-v-9d8382ee"]]),ih=["href","aria-label","innerHTML"],oh=C({__name:"VPSocialLink",props:{icon:{},link:{},ariaLabel:{}},setup(t){const e=t,i=L(()=>typeof e.icon=="object"?e.icon.svg:`<span class="vpi-social-${e.icon}" />`);return(r,n)=>(v(),_("a",{class:"VPSocialLink no-icon",href:r.link,"aria-label":r.ariaLabel??(typeof r.icon=="string"?r.icon:""),target:"_blank",rel:"noopener",innerHTML:i.value},null,8,ih))}}),ah=x(oh,[["__scopeId","data-v-26ab444c"]]),sh={class:"VPSocialLinks"},uh=C({__name:"VPSocialLinks",props:{links:{}},setup(t){return(e,i)=>(v(),_("div",sh,[(v(!0),_(G,null,ee(e.links,({link:r,icon:n,ariaLabel:o})=>(v(),$(ah,{key:r,icon:n,link:r,ariaLabel:o},null,8,["icon","link","ariaLabel"]))),128))]))}}),Yo=x(uh,[["__scopeId","data-v-56ff3438"]]),lh={key:0,class:"group translations"},ch={class:"trans-title"},fh={key:1,class:"group"},hh={class:"item appearance"},dh={class:"label"},ph={class:"appearance-action"},vh={key:2,class:"group"},yh={class:"item social-links"},gh=C({__name:"VPNavBarExtra",setup(t){const{site:e,theme:i}=N(),{localeLinks:r,currentLang:n}=qn({correspondingLink:!0}),o=L(()=>r.value.length&&n.value.label||e.value.appearance||i.value.socialLinks);return(a,s)=>o.value?(v(),$(Wo,{key:0,class:"VPNavBarExtra",label:"extra navigation"},{default:S(()=>[m(r).length&&m(n).label?(v(),_("div",lh,[w("p",ch,j(m(n).label),1),(v(!0),_(G,null,ee(m(r),u=>(v(),$(Zr,{key:u.link,item:u},null,8,["item"]))),128))])):I("",!0),m(e).appearance&&m(e).appearance!=="force-dark"&&m(e).appearance!=="force-auto"?(v(),_("div",fh,[w("div",hh,[w("p",dh,j(m(i).darkModeSwitchLabel||"Appearance"),1),w("div",ph,[R(Ko)])])])):I("",!0),m(i).socialLinks?(v(),_("div",vh,[w("div",yh,[R(Yo,{class:"social-links-list",links:m(i).socialLinks},null,8,["links"])])])):I("",!0)]),_:1})):I("",!0)}}),mh=x(gh,[["__scopeId","data-v-fa5af937"]]),bh=["aria-expanded"],_h=C({__name:"VPNavBarHamburger",props:{active:{type:Boolean}},emits:["click"],setup(t){return(e,i)=>(v(),_("button",{type:"button",class:U(["VPNavBarHamburger",{active:e.active}]),"aria-label":"mobile navigation","aria-expanded":e.active,"aria-controls":"VPNavScreen",onClick:i[0]||(i[0]=r=>e.$emit("click"))},i[1]||(i[1]=[w("span",{class:"container"},[w("span",{class:"top"}),w("span",{class:"middle"}),w("span",{class:"bottom"})],-1)]),10,bh))}}),Ph=x(_h,[["__scopeId","data-v-e6ab16ac"]]),wh=["innerHTML"],Sh=C({__name:"VPNavBarMenuLink",props:{item:{}},setup(t){const{page:e}=N();return(i,r)=>(v(),$(Te,{class:U({VPNavBarMenuLink:!0,active:m(tt)(m(e).relativePath,i.item.activeMatch||i.item.link,!!i.item.activeMatch)}),href:i.item.link,noIcon:i.item.noIcon,target:i.item.target,rel:i.item.rel,tabindex:"0"},{default:S(()=>[w("span",{innerHTML:i.item.text},null,8,wh)]),_:1},8,["class","href","noIcon","target","rel"]))}}),kh=x(Sh,[["__scopeId","data-v-781bcc3b"]]),Oh=C({__name:"VPNavBarMenuGroup",props:{item:{}},setup(t){const e=t,{page:i}=N(),r=o=>"component"in o?!1:"link"in o?tt(i.value.relativePath,o.link,!!e.item.activeMatch):o.items.some(r),n=L(()=>r(e.item));return(o,a)=>(v(),$(Wo,{class:U({VPNavBarMenuGroup:!0,active:m(tt)(m(i).relativePath,o.item.activeMatch,!!o.item.activeMatch)||n.value}),button:o.item.text,items:o.item.items},null,8,["class","button","items"]))}}),Th={key:0,"aria-labelledby":"main-nav-aria-label",class:"VPNavBarMenu"},Eh=C({__name:"VPNavBarMenu",setup(t){const{theme:e}=N();return(i,r)=>m(e).nav?(v(),_("nav",Th,[r[0]||(r[0]=w("span",{id:"main-nav-aria-label",class:"visually-hidden"}," Main Navigation ",-1)),(v(!0),_(G,null,ee(m(e).nav,n=>(v(),_(G,{key:JSON.stringify(n)},["link"in n?(v(),$(kh,{key:0,item:n},null,8,["item"])):"component"in n?(v(),$(Oe(n.component),He({key:1,ref_for:!0},n.props),null,16)):(v(),$(Oh,{key:2,item:n},null,8,["item"]))],64))),128))])):I("",!0)}}),Ch=x(Eh,[["__scopeId","data-v-79ea727b"]]);function Ih(t){const{localeIndex:e,theme:i}=N();function r(n){var y,b,g;const o=n.split("."),a=(y=i.value.search)==null?void 0:y.options,s=a&&typeof a=="object",u=s&&((g=(b=a.locales)==null?void 0:b[e.value])==null?void 0:g.translations)||null,l=s&&a.translations||null;let c=u,f=l,d=t;const p=o.pop();for(const T of o){let E=null;const O=d==null?void 0:d[T];O&&(E=d=O);const z=f==null?void 0:f[T];z&&(E=f=z);const H=c==null?void 0:c[T];H&&(E=c=H),O||(d=E),z||(f=E),H||(c=E)}return(c==null?void 0:c[p])??(f==null?void 0:f[p])??(d==null?void 0:d[p])??""}return r}const Rh=["aria-label"],$h={class:"DocSearch-Button-Container"},xh={class:"DocSearch-Button-Placeholder"},oa=C({__name:"VPNavBarSearchButton",setup(t){const i=Ih({button:{buttonText:"Search",buttonAriaLabel:"Search"}});return(r,n)=>(v(),_("button",{type:"button",class:"DocSearch DocSearch-Button","aria-label":m(i)("button.buttonAriaLabel")},[w("span",$h,[n[0]||(n[0]=w("span",{class:"vp-icon DocSearch-Search-Icon"},null,-1)),w("span",xh,j(m(i)("button.buttonText")),1)]),n[1]||(n[1]=w("span",{class:"DocSearch-Button-Keys"},[w("kbd",{class:"DocSearch-Button-Key"}),w("kbd",{class:"DocSearch-Button-Key"},"K")],-1))],8,Rh))}}),Lh={class:"VPNavBarSearch"},Ah={id:"local-search"},Dh={key:1,id:"docsearch"},Nh=C({__name:"VPNavBarSearch",setup(t){const e=sl(()=>Ms(()=>import("./VPLocalSearchBox.Cw1LVJ4z.js"),__vite__mapDeps([0,1]))),i=()=>null,{theme:r}=N(),n=M(!1),o=M(!1);ae(()=>{});function a(){n.value||(n.value=!0,setTimeout(s,16))}function s(){const f=new Event("keydown");f.key="k",f.metaKey=!0,window.dispatchEvent(f),setTimeout(()=>{document.querySelector(".DocSearch-Modal")||s()},16)}function u(f){const d=f.target,p=d.tagName;return d.isContentEditable||p==="INPUT"||p==="SELECT"||p==="TEXTAREA"}const l=M(!1);Si("k",f=>{(f.ctrlKey||f.metaKey)&&(f.preventDefault(),l.value=!0)}),Si("/",f=>{u(f)||(f.preventDefault(),l.value=!0)});const c="local";return(f,d)=>{var p;return v(),_("div",Lh,[m(c)==="local"?(v(),_(G,{key:0},[l.value?(v(),$(m(e),{key:0,onClose:d[0]||(d[0]=y=>l.value=!1)})):I("",!0),w("div",Ah,[R(oa,{onClick:d[1]||(d[1]=y=>l.value=!0)})])],64)):m(c)==="algolia"?(v(),_(G,{key:1},[n.value?(v(),$(m(i),{key:0,algolia:((p=m(r).search)==null?void 0:p.options)??m(r).algolia,onVnodeBeforeMount:d[2]||(d[2]=y=>o.value=!0)},null,8,["algolia"])):I("",!0),o.value?I("",!0):(v(),_("div",Dh,[R(oa,{onClick:a})]))],64)):I("",!0)])}}}),Mh=C({__name:"VPNavBarSocialLinks",setup(t){const{theme:e}=N();return(i,r)=>m(e).socialLinks?(v(),$(Yo,{key:0,class:"VPNavBarSocialLinks",links:m(e).socialLinks},null,8,["links"])):I("",!0)}}),jh=x(Mh,[["__scopeId","data-v-f48e73fe"]]),Bh=["href","rel","target"],Fh={key:1},Hh={key:2},Vh=C({__name:"VPNavBarTitle",setup(t){const{site:e,theme:i}=N(),{hasSidebar:r}=Ae(),{currentLang:n}=qn(),o=L(()=>{var u;return typeof i.value.logoLink=="string"?i.value.logoLink:(u=i.value.logoLink)==null?void 0:u.link}),a=L(()=>{var u;return typeof i.value.logoLink=="string"||(u=i.value.logoLink)==null?void 0:u.rel}),s=L(()=>{var u;return typeof i.value.logoLink=="string"||(u=i.value.logoLink)==null?void 0:u.target});return(u,l)=>(v(),_("div",{class:U(["VPNavBarTitle",{"has-sidebar":m(r)}])},[w("a",{class:"title",href:o.value??m(Uo)(m(n).link),rel:a.value,target:s.value},[P(u.$slots,"nav-bar-title-before",{},void 0,!0),m(i).logo?(v(),$(ur,{key:0,class:"logo",image:m(i).logo},null,8,["image"])):I("",!0),m(i).siteTitle?(v(),_("span",Fh,j(m(i).siteTitle),1)):m(i).siteTitle===void 0?(v(),_("span",Hh,j(m(e).title),1)):I("",!0),P(u.$slots,"nav-bar-title-after",{},void 0,!0)],8,Bh)],2))}}),Uh=x(Vh,[["__scopeId","data-v-8823bfbb"]]),zh={class:"items"},Kh={class:"title"},Gh=C({__name:"VPNavBarTranslations",setup(t){const{theme:e}=N(),{localeLinks:i,currentLang:r}=qn({correspondingLink:!0});return(n,o)=>m(i).length&&m(r).label?(v(),$(Wo,{key:0,class:"VPNavBarTranslations",icon:"vpi-languages",label:m(e).langMenuLabel||"Change language"},{default:S(()=>[w("div",zh,[w("p",Kh,j(m(r).label),1),(v(!0),_(G,null,ee(m(i),a=>(v(),$(Zr,{key:a.link,item:a},null,8,["item"]))),128))])]),_:1},8,["label"])):I("",!0)}}),Wh=x(Gh,[["__scopeId","data-v-534ffef1"]]),Yh={class:"wrapper"},Xh={class:"container"},qh={class:"title"},Jh={class:"content"},Qh={class:"content-body"},Zh=C({__name:"VPNavBar",props:{isScreenOpen:{type:Boolean}},emits:["toggle-screen"],setup(t){const e=t,{y:i}=Ns(),{hasSidebar:r}=Ae(),{frontmatter:n}=N(),o=M({});return Bo(()=>{o.value={"has-sidebar":r.value,home:n.value.layout==="home",top:i.value===0,"screen-open":e.isScreenOpen}}),(a,s)=>(v(),_("div",{class:U(["VPNavBar",o.value])},[w("div",Yh,[w("div",Xh,[w("div",qh,[R(Uh,null,{"nav-bar-title-before":S(()=>[P(a.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":S(()=>[P(a.$slots,"nav-bar-title-after",{},void 0,!0)]),_:3})]),w("div",Jh,[w("div",Qh,[P(a.$slots,"nav-bar-content-before",{},void 0,!0),R(Nh,{class:"search"}),R(Ch,{class:"menu"}),R(Wh,{class:"translations"}),R(jf,{class:"appearance"}),R(jh,{class:"social-links"}),R(mh,{class:"extra"}),P(a.$slots,"nav-bar-content-after",{},void 0,!0),R(Ph,{class:"hamburger",active:a.isScreenOpen,onClick:s[0]||(s[0]=u=>a.$emit("toggle-screen"))},null,8,["active"])])])])]),s[1]||(s[1]=w("div",{class:"divider"},[w("div",{class:"divider-line"})],-1))],2))}}),ed=x(Zh,[["__scopeId","data-v-fda2e592"]]),td={key:0,class:"VPNavScreenAppearance"},nd={class:"text"},rd=C({__name:"VPNavScreenAppearance",setup(t){const{site:e,theme:i}=N();return(r,n)=>m(e).appearance&&m(e).appearance!=="force-dark"&&m(e).appearance!=="force-auto"?(v(),_("div",td,[w("p",nd,j(m(i).darkModeSwitchLabel||"Appearance"),1),R(Ko)])):I("",!0)}}),id=x(rd,[["__scopeId","data-v-03857cb0"]]),od=C({__name:"VPNavScreenMenuLink",props:{item:{}},setup(t){const e=Jr("close-screen");return(i,r)=>(v(),$(Te,{class:"VPNavScreenMenuLink",href:i.item.link,target:i.item.target,rel:i.item.rel,onClick:m(e),innerHTML:i.item.text},null,8,["href","target","rel","onClick","innerHTML"]))}}),ad=x(od,[["__scopeId","data-v-5dbaf5aa"]]),sd=C({__name:"VPNavScreenMenuGroupLink",props:{item:{}},setup(t){const e=Jr("close-screen");return(i,r)=>(v(),$(Te,{class:"VPNavScreenMenuGroupLink",href:i.item.link,target:i.item.target,rel:i.item.rel,onClick:m(e)},{default:S(()=>[Ee(j(i.item.text),1)]),_:1},8,["href","target","rel","onClick"]))}}),zs=x(sd,[["__scopeId","data-v-d5724941"]]),ud={class:"VPNavScreenMenuGroupSection"},ld={key:0,class:"title"},cd=C({__name:"VPNavScreenMenuGroupSection",props:{text:{},items:{}},setup(t){return(e,i)=>(v(),_("div",ud,[e.text?(v(),_("p",ld,j(e.text),1)):I("",!0),(v(!0),_(G,null,ee(e.items,r=>(v(),$(zs,{key:r.text,item:r},null,8,["item"]))),128))]))}}),fd=x(cd,[["__scopeId","data-v-47004b0d"]]),hd=["aria-controls","aria-expanded"],dd=["innerHTML"],pd=["id"],vd={key:0,class:"item"},yd={key:1,class:"item"},gd={key:2,class:"group"},md=C({__name:"VPNavScreenMenuGroup",props:{text:{},items:{}},setup(t){const e=t,i=M(!1),r=L(()=>`NavScreenGroup-${e.text.replace(" ","-").toLowerCase()}`);function n(){i.value=!i.value}return(o,a)=>(v(),_("div",{class:U(["VPNavScreenMenuGroup",{open:i.value}])},[w("button",{class:"button","aria-controls":r.value,"aria-expanded":i.value,onClick:n},[w("span",{class:"button-text",innerHTML:o.text},null,8,dd),a[0]||(a[0]=w("span",{class:"vpi-plus button-icon"},null,-1))],8,hd),w("div",{id:r.value,class:"items"},[(v(!0),_(G,null,ee(o.items,s=>(v(),_(G,{key:JSON.stringify(s)},["link"in s?(v(),_("div",vd,[R(zs,{item:s},null,8,["item"])])):"component"in s?(v(),_("div",yd,[(v(),$(Oe(s.component),He({ref_for:!0},s.props,{"screen-menu":""}),null,16))])):(v(),_("div",gd,[R(fd,{text:s.text,items:s.items},null,8,["text","items"])]))],64))),128))],8,pd)],2))}}),bd=x(md,[["__scopeId","data-v-d2b09e4b"]]),_d={key:0,class:"VPNavScreenMenu"},Pd=C({__name:"VPNavScreenMenu",setup(t){const{theme:e}=N();return(i,r)=>m(e).nav?(v(),_("nav",_d,[(v(!0),_(G,null,ee(m(e).nav,n=>(v(),_(G,{key:JSON.stringify(n)},["link"in n?(v(),$(ad,{key:0,item:n},null,8,["item"])):"component"in n?(v(),$(Oe(n.component),He({key:1,ref_for:!0},n.props,{"screen-menu":""}),null,16)):(v(),$(bd,{key:2,text:n.text||"",items:n.items},null,8,["text","items"]))],64))),128))])):I("",!0)}}),wd=C({__name:"VPNavScreenSocialLinks",setup(t){const{theme:e}=N();return(i,r)=>m(e).socialLinks?(v(),$(Yo,{key:0,class:"VPNavScreenSocialLinks",links:m(e).socialLinks},null,8,["links"])):I("",!0)}}),Sd={class:"list"},kd=C({__name:"VPNavScreenTranslations",setup(t){const{localeLinks:e,currentLang:i}=qn({correspondingLink:!0}),r=M(!1);function n(){r.value=!r.value}return(o,a)=>m(e).length&&m(i).label?(v(),_("div",{key:0,class:U(["VPNavScreenTranslations",{open:r.value}])},[w("button",{class:"title",onClick:n},[a[0]||(a[0]=w("span",{class:"vpi-languages icon lang"},null,-1)),Ee(" "+j(m(i).label)+" ",1),a[1]||(a[1]=w("span",{class:"vpi-chevron-down icon chevron"},null,-1))]),w("ul",Sd,[(v(!0),_(G,null,ee(m(e),s=>(v(),_("li",{key:s.link,class:"item"},[R(Te,{class:"link",href:s.link},{default:S(()=>[Ee(j(s.text),1)]),_:2},1032,["href"])]))),128))])],2)):I("",!0)}}),Od=x(kd,[["__scopeId","data-v-10b7d982"]]),Td={class:"container"},Ed=C({__name:"VPNavScreen",props:{open:{type:Boolean}},setup(t){const e=M(null),i=js(Qr?document.body:null);return(r,n)=>(v(),$(Mo,{name:"fade",onEnter:n[0]||(n[0]=o=>i.value=!0),onAfterLeave:n[1]||(n[1]=o=>i.value=!1)},{default:S(()=>[r.open?(v(),_("div",{key:0,class:"VPNavScreen",ref_key:"screen",ref:e,id:"VPNavScreen"},[w("div",Td,[P(r.$slots,"nav-screen-content-before",{},void 0,!0),R(Pd,{class:"menu"}),R(Od,{class:"translations"}),R(id,{class:"appearance"}),R(wd,{class:"social-links"}),P(r.$slots,"nav-screen-content-after",{},void 0,!0)])],512)):I("",!0)]),_:3}))}}),Cd=x(Ed,[["__scopeId","data-v-55183e59"]]),Id={key:0,class:"VPNav"},Rd=C({__name:"VPNav",setup(t){const{isScreenOpen:e,closeScreen:i,toggleScreen:r}=Cf(),{frontmatter:n}=N(),o=L(()=>n.value.navbar!==!1);return Ho("close-screen",i),Xr(()=>{Qr&&document.documentElement.classList.toggle("hide-nav",!o.value)}),(a,s)=>o.value?(v(),_("header",Id,[R(ed,{"is-screen-open":m(e),onToggleScreen:m(r)},{"nav-bar-title-before":S(()=>[P(a.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":S(()=>[P(a.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":S(()=>[P(a.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":S(()=>[P(a.$slots,"nav-bar-content-after",{},void 0,!0)]),_:3},8,["is-screen-open","onToggleScreen"]),R(Cd,{open:m(e)},{"nav-screen-content-before":S(()=>[P(a.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":S(()=>[P(a.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3},8,["open"])])):I("",!0)}}),$d=x(Rd,[["__scopeId","data-v-d498ebd4"]]),xd=["role","tabindex"],Ld={key:1,class:"items"},Ad=C({__name:"VPSidebarItem",props:{item:{},depth:{}},setup(t){const e=t,{collapsed:i,collapsible:r,isLink:n,isActiveLink:o,hasActiveLink:a,hasChildren:s,toggle:u}=xl(L(()=>e.item)),l=L(()=>s.value?"section":"div"),c=L(()=>n.value?"a":"div"),f=L(()=>s.value?e.depth+2===7?"p":`h${e.depth+2}`:"p"),d=L(()=>n.value?void 0:"button"),p=L(()=>[[`level-${e.depth}`],{collapsible:r.value},{collapsed:i.value},{"is-link":n.value},{"is-active":o.value},{"has-active":a.value}]);function y(g){"key"in g&&g.key!=="Enter"||!e.item.link&&u()}function b(){e.item.link&&u()}return(g,T)=>{const E=dt("VPSidebarItem",!0);return v(),$(Oe(l.value),{class:U(["VPSidebarItem",p.value])},{default:S(()=>[g.item.text?(v(),_("div",He({key:0,class:"item",role:d.value},ll(g.item.items?{click:y,keydown:y}:{},!0),{tabindex:g.item.items&&0}),[T[1]||(T[1]=w("div",{class:"indicator"},null,-1)),g.item.link?(v(),$(Te,{key:0,tag:c.value,class:"link",href:g.item.link,rel:g.item.rel,target:g.item.target},{default:S(()=>[(v(),$(Oe(f.value),{class:"text",innerHTML:g.item.text},null,8,["innerHTML"]))]),_:1},8,["tag","href","rel","target"])):(v(),$(Oe(f.value),{key:1,class:"text",innerHTML:g.item.text},null,8,["innerHTML"])),g.item.collapsed!=null&&g.item.items&&g.item.items.length?(v(),_("div",{key:2,class:"caret",role:"button","aria-label":"toggle section",onClick:b,onKeydown:ul(b,["enter"]),tabindex:"0"},T[0]||(T[0]=[w("span",{class:"vpi-chevron-right caret-icon"},null,-1)]),32)):I("",!0)],16,xd)):I("",!0),g.item.items&&g.item.items.length?(v(),_("div",Ld,[g.depth<5?(v(!0),_(G,{key:0},ee(g.item.items,O=>(v(),$(E,{key:O.text,item:O,depth:g.depth+1},null,8,["item","depth"]))),128)):I("",!0)])):I("",!0)]),_:1},8,["class"])}}}),Dd=x(Ad,[["__scopeId","data-v-f44f36ba"]]),Nd=C({__name:"VPSidebarGroup",props:{items:{}},setup(t){const e=M(!0);let i=null;return ae(()=>{i=setTimeout(()=>{i=null,e.value=!1},300)}),cl(()=>{i!=null&&(clearTimeout(i),i=null)}),(r,n)=>(v(!0),_(G,null,ee(r.items,o=>(v(),_("div",{key:o.text,class:U(["group",{"no-transition":e.value}])},[R(Dd,{item:o,depth:0},null,8,["item"])],2))),128))}}),Md=x(Nd,[["__scopeId","data-v-27125ee1"]]),jd={class:"nav",id:"VPSidebarNav","aria-labelledby":"sidebar-aria-label",tabindex:"-1"},Bd=C({__name:"VPSidebar",props:{open:{type:Boolean}},setup(t){const{sidebarGroups:e,hasSidebar:i}=Ae(),r=t,n=M(null),o=js(Qr?document.body:null);ge([r,n],()=>{var s;r.open?(o.value=!0,(s=n.value)==null||s.focus()):o.value=!1},{immediate:!0,flush:"post"});const a=M(0);return ge(e,()=>{a.value+=1},{deep:!0}),(s,u)=>m(i)?(v(),_("aside",{key:0,class:U(["VPSidebar",{open:s.open}]),ref_key:"navEl",ref:n,onClick:u[0]||(u[0]=fl(()=>{},["stop"]))},[u[2]||(u[2]=w("div",{class:"curtain"},null,-1)),w("nav",jd,[u[1]||(u[1]=w("span",{class:"visually-hidden",id:"sidebar-aria-label"}," Sidebar Navigation ",-1)),P(s.$slots,"sidebar-nav-before",{},void 0,!0),(v(),$(Md,{items:m(e),key:a.value},null,8,["items"])),P(s.$slots,"sidebar-nav-after",{},void 0,!0)])],2)):I("",!0)}}),Fd=x(Bd,[["__scopeId","data-v-a82a71e5"]]),Hd=C({__name:"VPSkipLink",setup(t){const e=wn(),i=M();ge(()=>e.path,()=>i.value.focus());function r({target:n}){const o=document.getElementById(decodeURIComponent(n.hash).slice(1));if(o){const a=()=>{o.removeAttribute("tabindex"),o.removeEventListener("blur",a)};o.setAttribute("tabindex","-1"),o.addEventListener("blur",a),o.focus(),window.scrollTo(0,0)}}return(n,o)=>(v(),_(G,null,[w("span",{ref_key:"backToTop",ref:i,tabindex:"-1"},null,512),w("a",{href:"#VPContent",class:"VPSkipLink visually-hidden",onClick:r}," Skip to content ")],64))}}),Vd=x(Hd,[["__scopeId","data-v-2c26a5d6"]]),Ud=C({__name:"Layout",setup(t){const{isOpen:e,open:i,close:r}=Ae(),n=wn();ge(()=>n.path,r),$l(e,r);const{frontmatter:o}=N(),a=hl(),s=L(()=>!!a["home-hero-image"]);return Ho("hero-image-slot-exists",s),(u,l)=>{const c=dt("Content");return m(o).layout!==!1?(v(),_("div",{key:0,class:U(["Layout",m(o).pageClass])},[P(u.$slots,"layout-top",{},void 0,!0),R(Vd),R(ml,{class:"backdrop",show:m(e),onClick:m(r)},null,8,["show","onClick"]),R($d,null,{"nav-bar-title-before":S(()=>[P(u.$slots,"nav-bar-title-before",{},void 0,!0)]),"nav-bar-title-after":S(()=>[P(u.$slots,"nav-bar-title-after",{},void 0,!0)]),"nav-bar-content-before":S(()=>[P(u.$slots,"nav-bar-content-before",{},void 0,!0)]),"nav-bar-content-after":S(()=>[P(u.$slots,"nav-bar-content-after",{},void 0,!0)]),"nav-screen-content-before":S(()=>[P(u.$slots,"nav-screen-content-before",{},void 0,!0)]),"nav-screen-content-after":S(()=>[P(u.$slots,"nav-screen-content-after",{},void 0,!0)]),_:3}),R(Ef,{open:m(e),onOpenMenu:m(i)},null,8,["open","onOpenMenu"]),R(Fd,{open:m(e)},{"sidebar-nav-before":S(()=>[P(u.$slots,"sidebar-nav-before",{},void 0,!0)]),"sidebar-nav-after":S(()=>[P(u.$slots,"sidebar-nav-after",{},void 0,!0)]),_:3},8,["open"]),R(ff,null,{"page-top":S(()=>[P(u.$slots,"page-top",{},void 0,!0)]),"page-bottom":S(()=>[P(u.$slots,"page-bottom",{},void 0,!0)]),"not-found":S(()=>[P(u.$slots,"not-found",{},void 0,!0)]),"home-hero-before":S(()=>[P(u.$slots,"home-hero-before",{},void 0,!0)]),"home-hero-info-before":S(()=>[P(u.$slots,"home-hero-info-before",{},void 0,!0)]),"home-hero-info":S(()=>[P(u.$slots,"home-hero-info",{},void 0,!0)]),"home-hero-info-after":S(()=>[P(u.$slots,"home-hero-info-after",{},void 0,!0)]),"home-hero-actions-after":S(()=>[P(u.$slots,"home-hero-actions-after",{},void 0,!0)]),"home-hero-image":S(()=>[P(u.$slots,"home-hero-image",{},void 0,!0)]),"home-hero-after":S(()=>[P(u.$slots,"home-hero-after",{},void 0,!0)]),"home-features-before":S(()=>[P(u.$slots,"home-features-before",{},void 0,!0)]),"home-features-after":S(()=>[P(u.$slots,"home-features-after",{},void 0,!0)]),"doc-footer-before":S(()=>[P(u.$slots,"doc-footer-before",{},void 0,!0)]),"doc-before":S(()=>[P(u.$slots,"doc-before",{},void 0,!0)]),"doc-after":S(()=>[P(u.$slots,"doc-after",{},void 0,!0)]),"doc-top":S(()=>[P(u.$slots,"doc-top",{},void 0,!0)]),"doc-bottom":S(()=>[P(u.$slots,"doc-bottom",{},void 0,!0)]),"aside-top":S(()=>[P(u.$slots,"aside-top",{},void 0,!0)]),"aside-bottom":S(()=>[P(u.$slots,"aside-bottom",{},void 0,!0)]),"aside-outline-before":S(()=>[P(u.$slots,"aside-outline-before",{},void 0,!0)]),"aside-outline-after":S(()=>[P(u.$slots,"aside-outline-after",{},void 0,!0)]),"aside-ads-before":S(()=>[P(u.$slots,"aside-ads-before",{},void 0,!0)]),"aside-ads-after":S(()=>[P(u.$slots,"aside-ads-after",{},void 0,!0)]),_:3}),R(yf),P(u.$slots,"layout-bottom",{},void 0,!0)],2)):(v(),$(c,{key:1}))}}}),zd=x(Ud,[["__scopeId","data-v-65319936"]]),Ks={Layout:zd,enhanceApp:({app:t})=>{t.component("Badge",vl)}},Kd=["id","host","repo","repoid","category","categoryid","mapping","term","strict","reactionsenabled","emitmetadata","inputposition","theme","lang","loading"],Gd=C({__name:"Giscus",props:{id:{},host:{},repo:{},repoId:{},category:{},categoryId:{},mapping:{},term:{},theme:{},strict:{},reactionsEnabled:{},emitMetadata:{},inputPosition:{},lang:{},loading:{}},setup(t){const e=M(!1);return ae(()=>{e.value=!0,Ms(()=>import("./giscus-BNK3dBIH.B_EkeIy7.js"),[])}),(i,r)=>e.value?(v(),_("giscus-widget",{key:0,id:i.id,host:i.host,repo:i.repo,repoid:i.repoId,category:i.category,categoryid:i.categoryId,mapping:i.mapping,term:i.term,strict:i.strict,reactionsenabled:i.reactionsEnabled,emitmetadata:i.emitMetadata,inputposition:i.inputPosition,theme:i.theme,lang:i.lang,loading:i.loading},null,8,Kd)):I("",!0)}}),Wd=C({setup(){const t=wn(),{isDark:e}=Pn(),i=M(!0);ge(()=>t.path,()=>{i.value=!1,Fo(()=>{i.value=!0})},{immediate:!0});const r=Vo({repo:"pindemo/blog-vitepress",repoId:"R_kgDOMvcRLA",category:"Q&A",categoryId:"DIC_kwDOMvcRLM4CiV8I",mapping:"pathname",reactionsEnabled:"1",emitMetadata:"0",inputPosition:"top",lang:"zh-CN",loading:"lazy"});return()=>R("div",{style:{padding:"20px",borderRadius:"10px"}},[i.value?dl(Gd,{...r,theme:e.value?"dark":"light"}):""])}}),Yd=C({__name:"GoTop",props:{isShow:Boolean},setup(t){const e=t,i=Vo({visibilityHeight:500,catStyle:"hide-cat"});ae(()=>{window.addEventListener("scroll",r,!0),window.addEventListener("resize",r,!0)}),Xn(()=>{window.removeEventListener("scroll",r),window.addEventListener("resize",r,!0)});const r=()=>{e.isShow?i.catStyle=n()>i.visibilityHeight?"show-cat":"hide-cat":i.catStyle="hide-cat"},n=()=>window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0,o=()=>{window.scrollTo({top:0,behavior:"smooth"})};return(a,s)=>(v(),_("div",{id:"goTop",class:U([i.catStyle,"hide"]),onClick:o},null,2))}}),Xd=x(Yd,[["__scopeId","data-v-59112a88"]]),qd=()=>{const t=M();ae(()=>{window.addEventListener("resize",e,!0),e()}),Xn(()=>{window.removeEventListener("resize",e)});const e=()=>{t.value=window.innerHeight||document.documentElement.clientHeight};return{viewportHeight:t}},Jd={showIcon:"https://raw.githubusercontent.com/nsnans/picGo-bed/main/vitepress_1x/202409101530633.ico",showText:"(/≧▽≦/)",hideIcon:"https://raw.githubusercontent.com/nsnans/picGo-bed/main/vitepress_1x/202407021129399.ico",hideText:"(●—●)",recoverTime:500},Qd=()=>{const{showIcon:t,showText:e,hideIcon:i,hideText:r,recoverTime:n}=Jd,o=Vo({originTitle:"",recoverTimeout:void 0,config:{showIcon:t,showText:e,hideIcon:i,hideText:r,recoverTime:n}});ae(()=>{o.originTitle=document.title,o.config.showIcon!==""&&u().setAttribute("href",o.config.showIcon),document.addEventListener("visibilitychange",()=>{document.hidden?a():s()})});const a=()=>{o.config.hideIcon!==""&&u().setAttribute("href",o.config.hideIcon),document.title=o.config.hideText,clearTimeout(o.recoverTimeout)},s=()=>{o.config.showIcon!==""&&u().setAttribute("href",o.config.showIcon),document.title=o.config.showText,o.recoverTimeout=setTimeout(()=>{document.title=o.originTitle},o.config.recoverTime)},u=()=>{let c=document.querySelector("link[rel=icon]");return c===null&&(c=document.createElement("link"),c.setAttribute("rel","icon"),document.head.appendChild(c)),c},l=wn();ge(()=>l.path,(c,f)=>{c!==f&&(setTimeout(()=>{o.originTitle=document.title},100),clearTimeout(o.recoverTimeout))})},Zd=()=>{const{isDark:t}=Pn(),e=()=>"startViewTransition"in document&&window.matchMedia("(prefers-reduced-motion: no-preference)").matches;Ho("toggle-appearance",async({clientX:i,clientY:r})=>{if(!e()){t.value=!t.value;return}const n=[`circle(0px at ${i}px ${r}px)`,`circle(${Math.hypot(Math.max(i,innerWidth-i),Math.max(r,innerHeight-r))}px at ${i}px ${r}px)`];await document.startViewTransition(async()=>{t.value=!t.value,await Fo()}).ready,document.documentElement.animate({clipPath:t.value?n.reverse():n},{duration:300,easing:"ease-in",pseudoElement:`::view-transition-${t.value?"old":"new"}(root)`})})},ep=C({setup(){globalThis!=null&&globalThis.document&&(Zd(),Qd());const{Layout:t}=Ks;Pn();const{viewportHeight:e}=qd(),i=sr("(min-width: 960px)"),r=L(()=>i.value?e.value<700:!0);return()=>R(t,null,{"doc-after":()=>R(G,null,[R(Xd,{isShow:!r.value},null),R(Wd,null,null)])})}}),tp={id:"hero-text"},np={style:{display:"inline-block",position:"relative"}},rp={style:{color:"var(--vp-c-brand)",position:"absolute","z-index":"-1",top:"1em",left:"0.2em",width:"calc(100% - 0.7em)",height:"auto"},width:"240",height:"11",viewBox:"0 0 240 11",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg"},ip=C({__name:"HomeUnderline",setup(t){const{frontmatter:e}=Pn();return ae(()=>{const i=document.querySelector(".VPHero .text"),r=document.querySelector("#hero-text");if(!(!i||!r)){for(;i.lastChild;)i.lastChild.remove();i.append(r)}}),(i,r)=>(v(),_("div",tp,[w("span",np,[Ee(j(m(e).hero.text)+" ",1),(v(),_("svg",rp,r[0]||(r[0]=[w("path",{d:"M20.766 10.187c.939-.024.386-.885.552-1.401 1.105-.301.553.626.962 1.061.685-.263 1.171-1.1 1.696-1.085.044.144.15.191.044.378.697-.736 2.21-.134 2.995-1.052a.55.55 0 0 1 .127.215 3.35 3.35 0 0 1-.204-1.204c.42-.034.751-.593.94 0-.255 0-.266.23-.377.416l.426-.273c.448.813-.586.316-.553.927.84-.306 1.802-1.037 2.476-.831.182.803-1.525.339-.608 1.023l-1.033-.268c.85 1.248-.625-.057.171 1.276 1.348.177 1.47-.478 2.818-.3.276-.479-.132-.66.144-1.124 1.857-.885 1.602 1.984 2.94.846.337-.555.42-1.582 1.442-1.08l-.276.889c1.298.038.668-1.348 2.06-.784-.226.368-1.005.344-.8.444.917.689.59-.545 1.27-.569l.16.827c1.371-.181 2.863-.827 4.388-1.037-.072.249-.326.512.044.746 1.912-.478 4.123-.058 6.007.368l.68-.727c.05.015.095.04.132.074a.275.275 0 0 1 .077.118c.014.044.015.091.004.136a.27.27 0 0 1-.07.122c.74.243 0-.445.354-.732.414-.062.552.383.315.603 1.248-.636 3.586-1.401 4.973-.694l-.254.22c1.06.249 1.105-1.477 2.127-.855l-.182.129c2.293.23 4.785-.478 6.564.52.293-1.017 2.272.393 2.365-1.022 1.327.664.967.927 2.813 1.348.492.052.702-.899 1.299-1.061l.044.731.79-.794.47.87.552-.205a.66.66 0 0 1-.332-.2.517.517 0 0 1-.132-.33c.873-.354 2.177.477 2.21.831l2.078-.679c-.039.301-.387.411-.657.607 1.105-.779.226.77 1.232.053-.144-.163.06-.44.077-.588.553.435 1.691.416 2.547.205l-.149.512c1.558.1 3.271-.31 5.018-.335-.636-.224-.514-1.109 0-1.204l.226.774c.32-.478-.552-.282.122-.884.652.076.464.875.094 1.138l.784-.287c.056.23-.127.358-.165.655.309-.478 1.387.75 1.834-.096l.05.23c1.746-.03 2.53-.316 3.95-.383 0-.674.553-.535.984-1.085 1.05.196 2.21.707 3.482.63.878-.343.243-.568.635-.955.077.612 1.332.535.69.985a15.353 15.353 0 0 0 3.83-.68c-.21-.243-.447-.353-.331-.563a.738.738 0 0 1 .275.01c.09.02.173.058.245.11a.58.58 0 0 1 .169.188c.04.072.061.151.062.232l-.088.067c2.127-.956 4.973 1.706 6.669.41l-.099.068 1.763-.684c.817.1-.481.478.127.842 1.9-1.043 3.022.12 4.586-.574 1.243 1.793 4.327-.167 5.979.956l-.1-.42c.426-.421.52.234.835.33-.05-.33-.464-.378-.205-.613 3.598-.545 7.438.598 11.129.956 1.348.11.757-2.203 2.465-1.195l-.481.794c2.719-.956 5.564 0 8.233-.77-.154.182-.16.416-.425.416.552.574 2.083.034 2.094-.435.42.053.1.425.354.665.552.339 1.42-.732 1.718-.158.05.09-.16.186-.265.23.37-.278 1.719.076 1.365-.589 1 .32 1.917-.287 2.713.105.553-.736 1.713.364 1.884-.683-.077 1.08 1.752.875 2.387.377-.215.326.553.345.299.794.718 0 1.381-.206 1.265-.76 1.315 1.305 2.686-1.018 3.415.645a45.888 45.888 0 0 1 6.078-1.17c-.082 1.075-2.138.09-2.066 1.218 1.834-.425 2.906-1.343 4.719-1.066.47.153-.276.478-.437.65 1.835-.43 3.537.148 5.172-.42 0 .1-.182.21-.348.291.321-.033.741.167.713-.325l-.315.13c-.497-.718 1.304-1.468 1.365-1.841-.553 1.396 1.602.377.707 2.137a.73.73 0 0 0 .337-.263.58.58 0 0 0 .1-.383c.315.1.409.297.083.665 1.155-.254.757-.78 1.801-.75 0 .233-.221.324-.337.601.553-.478 1.078-.908 1.951-.697-.056.143.044.33-.216.325 1.509-.048 2.603-1.195 4.249-.722-.513 1.023.553.349.625 1.243l.895-.254-.348-.44c.785.034 1.492-.602 2.155-.296l-.591.354 1.47-.139-.824-.354c.807-.444-.055-1.132.978-.86-.21.086.785.029 1.177.56.398-.278.801-.57 1.376-.335.138.291-.149.984-.055 1.176.398-.736 1.834-.168 2.337-.956-.143.227-.192.49-.138.745l.337-.597c.359.2.409.296.337.669 1.105.134-.309-1.138.967-.626-.105.048-.055.138-.27.23 1.287.277 2.519-.335 3.702 0 .326.903-1.05.195-.669.955 1.724-.129 3.592-.999 5.25-.74l-.31-.106c.277-1.262 1.221.66 2.083.086-.21.086-.298.693-.237.555 1.105.234 2.343-.249 4.083-.603l-.226.32c.657.311 1.763.216 2.481.383.226-.315.641-.253.403-.731 2.166 1.912 4.305-.89 6.228.726-.238 0-.553.268-.387.273l1.702-.244c-.111-.554-.21-.34-.553-.784.124-.163.292-.298.489-.392.198-.094.419-.145.644-.148-.774.34-.028.884.287 1.205-.049-.173.072-.354.05-.526.846 1.008.199-1.11 1.376-.407l-.077.287c.458-.134.889-.478 1.37-.401.177.645-.492.282-.552.803.685 0 1.403-1.162 1.994-.507-.298.167-.718.158-1.016.325.641.77.729.583 1.221.717h-.044l1.138.378-.282-.21c.928-1.635 1.752-.25 2.951-1.3-1.166.994-.21.592-.332 1.309.288.21.724.454.586.65.553-.564.89.478 1.696-.34 0 .235.581.044.431.627.713-.163-.149-.411-.077-.703 1.133-.76 2.514 1.061 4.139.029 1.376-.397 1.658-1.171 2.94-1.515.403.392-.393.836-.393.836.267.161.581.255.906.27a1.97 1.97 0 0 0 .934-.184c-.138.196 0 .373.172.64.519-.038.386-.831 1.05-.477a3.24 3.24 0 0 1-.553.918c.619-.192 1.243-.603 1.884-.79.149.412-.409.603-.646.856.718-.153 1.851-.296 2.105-.927l-.442-.248c.26 0 .105.559-.094.669-.63.478-.862-.258-.884-.478l.459-.134c-.387-1.382-1.818.148-2.719.033l.431-.956-.973.784c-.182-.263-.287-.822.166-.956-.624-.516-.591.33-1.105-.239-.055-.086-.028-.134.033-.172l-.646.273c.132-.201-.072-.703.309-.545-1.105-.617-1.873.674-2.26-.096l.099-.057c-1.596.272-.193.721-1.414 1.534l-.713-1.83-.188.721c-.16-.033-.481-.1-.409-.387-.63.478.089.32-.287.78-.752-.699-2.172.229-2.293-.957-.31.545.729.478-.127.813-.183-1.258-.978.181-1.658-.416.254-.636.917-.273.226-.875-.486 1.076-1.386-.282-2-.096-.066.87-1.332.32-2.354.579.078-.292-1.89-.54-2.818-.885l.033-.148c-.221.87-1.182.674-1.901.832a.906.906 0 0 1 .132-.55c.102-.169.258-.31.449-.406h-.669a.979.979 0 0 1-.34.327 1.167 1.167 0 0 1-.478.151l.194-.65c-.885 0-1.813.712-2.94.244-.083.607.84 1.725-.381 2.103-.034-.335-.056-.899.27-1.028-.105.043-.381.263-.585.12l.502-.545c-.508-.258-.287.478-.701.397 0-.478-.293-.35-.221-.722.11-.038.359.205.525 0a1.931 1.931 0 0 1-.691-.264 1.649 1.649 0 0 1-.503-.487c.028.268-.028.636-.37.684-.89 0-.282-.574-.79-.832-.227.325-.78-.033-.824.674-.259 0-.293-.34-.387-.535-.469.3-2.149.033-1.657.793l.116.053s-.05 0-.078.033c-1.525.66-3.105-.478-4.608-.224V3.34c-.895.244-1.984.106-2.636.593a.711.711 0 0 1-.402-.28.553.553 0 0 1-.084-.442c-.691.158-.774.416-1.746 0 .701-.396-.221-.373.713-.287-.879-.224-1.067-.607-2.039 0 .342-.597-.641-.774-1.067-.602l.608.445c-.436.053-.88.039-1.31-.043l.254-.794c-1.784-1.004-3.315 1.578-4.647-.067-.497.545.973.411.553 1.052-.829-.124-1.658-1.286-1.929-1.29-1.132-.479-1.105 1.137-2.282.812a.818.818 0 0 1 .031.774.938.938 0 0 1-.264.323 1.11 1.11 0 0 1-.397.198c-.829-.124-.994-1.214-.464-1.434.205 0 .299.072.288.168.27-.096.629-.21.303-.526l-.116.282c-.403-.297-1.552-.292-1.271-.75-.635.257-.281.477.183.616-1.061-.435-1.658-.053-2.763-.344.171.162.326.478.155.478-1.608-.378-.724.526-1.824.636-.608-.445.249-1.033-.862-.684-.668-.306-.127-.755.149-.985-1.016.536-1.867-.387-2.442-.478l.553-.22a1.892 1.892 0 0 1-.846.12l.293.573c-.309-.105-.553-.11-.553-.348-.326.368.227.956-.42 1.434-.403-.297-1.265.286-1.392-.478 1.298.272-.127-.76.978-.866a1.102 1.102 0 0 1-.851.024c-.044-.086.044-.157.133-.2-1.233-.689-.592.846-1.879.807.171-.42-.287-.808-.497-.721.519 0 .237.712-.249 1.027-.823-.34-.906.235-1.337.187l.491.162c-.176.426-.585.364-1.165.478-.045-.33.524-.22.326-.368-.652.736-1.437-.793-2.338-.306-.409-.291-.027-.798-.387-.999-1.011.54-1.077-.588-2.133-.148.293.574.349.435-.403.985l1.735-.387-1.105.822c.525 0 1.105-.35 1.42-.249-.553.478-.481.316-.238.794-.701-.86-1.425.478-2.21-.1l.044-1.41c-1.232-.641-2.21.702-3.823.334l.513.248c-.221.56-.994.072-1.519.292.055-.478-.271-.645-.492-.956.028.349-1.177-.043-1.337.899l-.707-.627c-1.305-.267-1.503 1.33-2.763 1.157.381-.507-.183-.846.657-1.21-.414 0-.79-.095-.801.23-.276-.263-1.199.646-1.575.215-.182.206-.243.698-.713.655a.337.337 0 0 1 0-.234c0 .234-.735.31-.331.837-1.271-1.478-3.592.095-4.708-1.172-.936.165-1.883.277-2.835.335.05-.139 0-.234.16-.186-1.143-.44-.707 1.352-2.005.86-.664-.765.69-.411.276-.703-.171-1.553-1.564.21-2.437-.702l.21-.091c-.663-.555-1.608.564-2.713.454a.326.326 0 0 0 0-.234c-.746.784-2.155 1.051-3.205 1.271.326-.607.475-.32.276-.956-.47.091.138.99-.801 1.167-.304-.33-.984-.622-1.078-1.282l.89-.019c-.459-.85-1.149.034-1.613-.114l.055-.368c-1.36.124-1.376 1.06-2.835.999l.155.282c-.796.956-.674-.521-1.465.172l-.248-.956c-.871.453-1.797.82-2.763 1.094.552-.698 1.658-1.06 2.315-1.477-.519 0-1.774.072-2.044.54.21-.09.475-.325.685-.181a2.832 2.832 0 0 1-1.094.83 3.298 3.298 0 0 1-1.42.27c.171-1.832-2.713-.455-3.482-1.865-1.834.693-3.652-.258-5.796-.13.774 1.435-.625.049-.481 1.507-.497.1-.685.076-.729 0l-1.525-.86c-.365-.421.469-.326.42-.65-1.106-.106-.465-.618-1.194-1 .155.521-.37.75-1 .56l.901.659c-1.52.793-1.338-1.214-2.868-.43l.48-.478c-.79.277-2.917 0-3.674 1.204-.144-.167-.332-.564 0-.674-1.89-.148-4.183 1.31-5.664.612l.138-.358c-.348.105-.602.678-1.05.325 0-.148.138-.359 0-.378-.182.124-.923.64-1.392.44l.386-.411c-1.85-.44-2.807 1.023-4.343 1.29 0-1.051-1.475-1.376-2.21-1.53V.685c-2.15-.086-3.625.956-5.598 1.4-1.265-1.118-4.188-.392-6.194-.99.31.182 0 .818-.37.957-.475-.206-1.266.755-1.221-.21h.165c-.375-.957-1.326-.67-2.072-.675l-.083 1.267c-2.006-1.778-5.106.813-6.227-.803-.459.33-1.045.34-1.498.67v-.68a12.396 12.396 0 0 0-3.575 0l.31-.478c-.912 0-1.072 1.98-1.912 2.042l-.288-1c-1.591.053-3.232-.774-4.763.192 0-.148.055-.445.31-.478-.746 0-2.918-.588-2.587.788-.06-.903-1.657-.038-2.48.388l.104-.689c-.685.875-.701 1.11-1.696 1.377-.243-.076-.238-.526.088-.368-.812-.32-.59.655-1.574.33l.342-.435c-.823-.029-.746.2-1.177.707-.503.287-1.564-.114-1.713-.712-.094.368-.52.875-1.011.717a.38.38 0 0 1 .013-.245.442.442 0 0 1 .164-.2c-1.393-.406-2 .851-2.973.235a.553.553 0 0 0-.182-.392 9.431 9.431 0 0 1 1.89.028c0-.616-.912-.688-.255-1.563-.685.478-1.845 1.54-2.713 1.286a.84.84 0 0 1-.1-.215l.061-.072a.668.668 0 0 0-.295 0 .61.61 0 0 0-.257.125 1.992 1.992 0 0 0-.718-.158c-.128-.507-1.023-.234-1.465-.244.072.67-.508.583.06 1.119-.07-.048.078-.086.366-.125a.528.528 0 0 0 .188-.076l-.028.062c.287-.033.663-.062 1.105-.09-.332.358-.68.654-1.183.3-.204.445-.43.894-.552 1.11-.647-.914-1.83-1.377-2.022-1.946-1.321.43-3.145.368-3.918 1.663-.376.177-.459-.344-.614-.535.216-.139.476-.13.586-.316-.74.354-2.249.216-2.381 1.105-.984-.364.491-.837-.818-.636l.166-.277c-2.675-1.291-4.09 2.433-7.068.755.204.105.304.148.354.296-3.316-.645-6.709 1.038-10.018-.062-.94-.205-1 .359-1.531.818l-.249-.713-.906.88c-1.315.679-2.47-1.65-4.117-.411l.254.478c-.624-.058-1.939.387-1.873-.177-.055.09-.166.516-.425.272l-.044-.372-1.487.712c-1.199-.215.078-1.506-1.658-1.492C.895 5.105-.22 6.114.04 6.362c.178.01.347.073.478.179a.645.645 0 0 1 .24.4l-.558.225C.17 8.279-.194 9.44 1.304 10.144l.917-.732.36.521-.818.1c.513.479.784 0 1.105-.305.07.225.233.42.458.55l.907-1.114c.149.43-.376.884.292 1.094.426-.516-.502-.956.233-1.314.513.478.403.898.933.44a.447.447 0 0 1 .012.336.525.525 0 0 1-.233.27c.476-.367 1.304-.214 1.525-.817.553.598 1.658-.248 1.691.808.29-.433.74-.77 1.277-.956-.752 1.3 1.724 0 1.591 1.348.553-1.162 2.21-.617 3.255-1.3-.055.095-.16.282-.265.23.624.061.823.391 1.237.592 0-.956.967-1.195 1.448-1.797.812.87-.392 1.118-.1 1.974-.082-.755 1.272-.813.973-1.434.614.53.514.248.862 1.008.028-1.17.553-.22.962-.956.873.54.282 1.086 1.182.689.453.354-.342.808-.342.808Zm21.793-2.93-.447.057.447-.058Zm1.818-.091a7.552 7.552 0 0 0-.801 0c-.072-.23 0-.478.171-.478-.083.186.348.305.63.478Zm-4.128-4.49c.288-.109.393 0 .442.159-.172.02-.343.053-.508.1v.081a.973.973 0 0 1 .066-.34Z"},null,-1)])))])]))}});var op=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Xo(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Gs={exports:{}};(function(t){var e=Object.prototype.hasOwnProperty,i="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(i=!1));function n(u,l,c){this.fn=u,this.context=l,this.once=c||!1}function o(u,l,c,f,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var p=new n(c,f||u,d),y=i?i+l:l;return u._events[y]?u._events[y].fn?u._events[y]=[u._events[y],p]:u._events[y].push(p):(u._events[y]=p,u._eventsCount++),u}function a(u,l){--u._eventsCount===0?u._events=new r:delete u._events[l]}function s(){this._events=new r,this._eventsCount=0}s.prototype.eventNames=function(){var l=[],c,f;if(this._eventsCount===0)return l;for(f in c=this._events)e.call(c,f)&&l.push(i?f.slice(1):f);return Object.getOwnPropertySymbols?l.concat(Object.getOwnPropertySymbols(c)):l},s.prototype.listeners=function(l){var c=i?i+l:l,f=this._events[c];if(!f)return[];if(f.fn)return[f.fn];for(var d=0,p=f.length,y=new Array(p);d<p;d++)y[d]=f[d].fn;return y},s.prototype.listenerCount=function(l){var c=i?i+l:l,f=this._events[c];return f?f.fn?1:f.length:0},s.prototype.emit=function(l,c,f,d,p,y){var b=i?i+l:l;if(!this._events[b])return!1;var g=this._events[b],T=arguments.length,E,O;if(g.fn){switch(g.once&&this.removeListener(l,g.fn,void 0,!0),T){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,c),!0;case 3:return g.fn.call(g.context,c,f),!0;case 4:return g.fn.call(g.context,c,f,d),!0;case 5:return g.fn.call(g.context,c,f,d,p),!0;case 6:return g.fn.call(g.context,c,f,d,p,y),!0}for(O=1,E=new Array(T-1);O<T;O++)E[O-1]=arguments[O];g.fn.apply(g.context,E)}else{var z=g.length,H;for(O=0;O<z;O++)switch(g[O].once&&this.removeListener(l,g[O].fn,void 0,!0),T){case 1:g[O].fn.call(g[O].context);break;case 2:g[O].fn.call(g[O].context,c);break;case 3:g[O].fn.call(g[O].context,c,f);break;case 4:g[O].fn.call(g[O].context,c,f,d);break;default:if(!E)for(H=1,E=new Array(T-1);H<T;H++)E[H-1]=arguments[H];g[O].fn.apply(g[O].context,E)}}return!0},s.prototype.on=function(l,c,f){return o(this,l,c,f,!1)},s.prototype.once=function(l,c,f){return o(this,l,c,f,!0)},s.prototype.removeListener=function(l,c,f,d){var p=i?i+l:l;if(!this._events[p])return this;if(!c)return a(this,p),this;var y=this._events[p];if(y.fn)y.fn===c&&(!d||y.once)&&(!f||y.context===f)&&a(this,p);else{for(var b=0,g=[],T=y.length;b<T;b++)(y[b].fn!==c||d&&!y[b].once||f&&y[b].context!==f)&&g.push(y[b]);g.length?this._events[p]=g.length===1?g[0]:g:a(this,p)}return this},s.prototype.removeAllListeners=function(l){var c;return l?(c=i?i+l:l,this._events[c]&&a(this,c)):(this._events=new r,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=i,s.EventEmitter=s,t.exports=s})(Gs);var Ws=Gs.exports;const Ys=Xo(Ws);var Ei=JSON.parse('"3.0.0-alpha.138"'),ap=typeof window<"u"&&window.location&&window.location.href.indexOf("xgplayerdebugger=1")>-1,si={info:"color: #525252; background-color: #90ee90;",error:"color: #525252; background-color: red;",warn:"color: #525252; background-color: yellow; "},ui="%c[xgplayer]",A={config:{debug:ap?3:1},logInfo:function(e){for(var i,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.config.debug>=3&&(i=console).log.apply(i,[ui,si.info,e].concat(n))},logWarn:function(e){for(var i,r=arguments.length,n=new Array(r>1?r-1:0),o=1;o<r;o++)n[o-1]=arguments[o];this.config.debug>=1&&(i=console).warn.apply(i,[ui,si.warn,e].concat(n))},logError:function(e){var i;if(!(this.config.debug<1)){for(var r=this.config.debug>=2?"trace":"error",n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(i=console)[r].apply(i,[ui,si.error,e].concat(o))}}};function sp(t){t.logInfo=A.logInfo.bind(t),t.logWarn=A.logWarn.bind(t),t.logError=A.logError.bind(t)}function Hn(t){"@babel/helpers - typeof";return Hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Hn(t)}function up(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function lp(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,fp(r.key),r)}}function cp(t,e,i){return e&&lp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function fp(t){var e=hp(t,"string");return Hn(e)==="symbol"?e:String(e)}function hp(t,e){if(Hn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Hn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var dp=function(){function t(e){up(this,t),this.bufferedList=e}return cp(t,[{key:"start",value:function(i){return this.bufferedList[i].start}},{key:"end",value:function(i){return this.bufferedList[i].end}},{key:"length",get:function(){return this.bufferedList.length}}]),t}();function pp(t){return mp(t)||gp(t)||yp(t)||vp()}function vp(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function yp(t,e){if(t){if(typeof t=="string")return Ci(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ci(t,e)}}function gp(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function mp(t){if(Array.isArray(t))return Ci(t)}function Ci(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function nt(t){"@babel/helpers - typeof";return nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nt(t)}var h={};h.createDom=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"div",e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:"",n=document.createElement(t);return n.className=r,n.innerHTML=e,Object.keys(i).forEach(function(o){var a=o,s=i[o];t==="video"||t==="audio"||t==="live-video"?s&&n.setAttribute(a,s):n.setAttribute(a,s)}),n};h.createDomFromHtml=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";try{var r=document.createElement("div");r.innerHTML=t;var n=r.children;return r=null,n.length>0?(n=n[0],i&&h.addClass(n,i),e&&Object.keys(e).forEach(function(o){n.setAttribute(o,e[o])}),n):null}catch(o){return A.logError("util.createDomFromHtml",o),null}};h.hasClass=function(t,e){if(!t||!e)return!1;try{return Array.prototype.some.call(t.classList,function(r){return r===e})}catch{var i=t.className&&nt(t.className)==="object"?t.getAttribute("class"):t.className;return i&&!!i.match(new RegExp("(\\s|^)"+e+"(\\s|$)"))}};h.addClass=function(t,e){if(!(!t||!e))try{e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&t.classList.add(i)})}catch{h.hasClass(t,e)||(t.className&&nt(t.className)==="object"?t.setAttribute("class",t.getAttribute("class")+" "+e):t.className+=" "+e)}};h.removeClass=function(t,e){if(!(!t||!e))try{e.replace(/(^\s+|\s+$)/g,"").split(/\s+/g).forEach(function(i){i&&t.classList.remove(i)})}catch{h.hasClass(t,e)&&e.split(/\s+/g).forEach(function(r){var n=new RegExp("(\\s|^)"+r+"(\\s|$)");t.className&&nt(t.className)==="object"?t.setAttribute("class",t.getAttribute("class").replace(n," ")):t.className=t.className.replace(n," ")})}};h.toggleClass=function(t,e){t&&e.split(/\s+/g).forEach(function(i){h.hasClass(t,i)?h.removeClass(t,i):h.addClass(t,i)})};h.classNames=function(){for(var t=arguments,e=[],i=function(o){h.typeOf(t[o])==="String"?e.push(t[o]):h.typeOf(t[o])==="Object"&&Object.keys(t[o]).map(function(a){t[o][a]&&e.push(a)})},r=0;r<arguments.length;r++)i(r);return e.join(" ")};h.findDom=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:document,e=arguments.length>1?arguments[1]:void 0,i;try{i=t.querySelector(e)}catch(r){A.logError("util.findDom",r),e.indexOf("#")===0&&(i=t.getElementById(e.slice(1)))}return i};h.getCss=function(t,e){return t.currentStyle?t.currentStyle[e]:document.defaultView.getComputedStyle(t,!1)[e]};h.padStart=function(t,e,i){for(var r=String(i),n=e>>0,o=Math.ceil(n/r.length),a=[],s=String(t);o--;)a.push(r);return a.join("").substring(0,n-s.length)+s};h.format=function(t){if(window.isNaN(t))return"";t=Math.round(t);var e=h.padStart(Math.floor(t/3600),2,0),i=h.padStart(Math.floor((t-e*3600)/60),2,0),r=h.padStart(Math.floor(t-e*3600-i*60),2,0);return(e==="00"?[i,r]:[e,i,r]).join(":")};h.event=function(t){if(t.touches){var e=t.touches[0]||t.changedTouches[0];t.clientX=e.clientX||0,t.clientY=e.clientY||0,t.offsetX=e.pageX-e.target.offsetLeft,t.offsetY=e.pageY-e.target.offsetTop}t._target=t.target||t.srcElement};h.typeOf=function(t){return Object.prototype.toString.call(t).match(/([^\s.*]+)(?=]$)/g)[0]};h.deepCopy=function(t,e){if(h.typeOf(e)==="Object"&&h.typeOf(t)==="Object")return Object.keys(e).forEach(function(i){h.typeOf(e[i])==="Object"&&!(e[i]instanceof Node)?t[i]===void 0||t[i]===void 0?t[i]=e[i]:h.deepCopy(t[i],e[i]):h.typeOf(e[i])==="Array"?t[i]=h.typeOf(t[i])==="Array"?t[i].concat(e[i]):e[i]:t[i]=e[i]}),t};h.deepMerge=function(t,e){return Object.keys(e).map(function(i){if(h.typeOf(e[i])==="Array"&&h.typeOf(t[i])==="Array"){if(h.typeOf(t[i])==="Array"){var r;(r=t[i]).push.apply(r,pp(e[i]))}}else h.typeOf(t[i])===h.typeOf(e[i])&&t[i]!==null&&h.typeOf(t[i])==="Object"&&!(e[i]instanceof window.Node)?h.deepMerge(t[i],e[i]):e[i]!==null&&(t[i]=e[i])}),t};h.getBgImage=function(t){var e=(t.currentStyle||window.getComputedStyle(t,null)).backgroundImage;if(!e||e==="none")return"";var i=document.createElement("a");return i.href=e.replace(/url\("|"\)/g,""),i.href};h.copyDom=function(t){if(t&&t.nodeType===1){var e=document.createElement(t.tagName);return Array.prototype.forEach.call(t.attributes,function(i){e.setAttribute(i.name,i.value)}),t.innerHTML&&(e.innerHTML=t.innerHTML),e}else return""};h.setInterval=function(t,e,i,r){t._interval[e]||(t._interval[e]=window.setInterval(i.bind(t),r))};h.clearInterval=function(t,e){clearInterval(t._interval[e]),t._interval[e]=null};h.setTimeout=function(t,e,i){t._timers||(t._timers=[]);var r=setTimeout(function(){e(),h.clearTimeout(t,r)},i);return t._timers.push(r),r};h.clearTimeout=function(t,e){var i=t._timers;if(h.typeOf(i)==="Array"){for(var r=0;r<i.length;r++)if(i[r]===e){i.splice(r,1),clearTimeout(e);break}}else clearTimeout(e)};h.clearAllTimers=function(t){var e=t._timers;h.typeOf(e)==="Array"&&(e.map(function(i){clearTimeout(i)}),t._timerIds=[])};h.createImgBtn=function(t,e,i,r){var n=h.createDom("xg-".concat(t),"",{},"xgplayer-".concat(t,"-img"));if(n.style.backgroundImage='url("'.concat(e,'")'),i&&r){var o,a,s;["px","rem","em","pt","dp","vw","vh","vm","%"].every(function(u){return i.indexOf(u)>-1&&r.indexOf(u)>-1?(o=parseFloat(i.slice(0,i.indexOf(u)).trim()),a=parseFloat(r.slice(0,r.indexOf(u)).trim()),s=u,!1):!0}),n.style.width="".concat(o).concat(s),n.style.height="".concat(a).concat(s),n.style.backgroundSize="".concat(o).concat(s," ").concat(a).concat(s),t==="start"?n.style.margin="-".concat(a/2).concat(s," auto auto -").concat(o/2).concat(s):n.style.margin="auto 5px auto 5px"}return n};h.Hex2RGBA=function(t,e){var i=[];if(/^\#[0-9A-F]{3}$/i.test(t)){var r="#";t.replace(/[0-9A-F]/ig,function(n){r+=n+n}),t=r}return/^#[0-9A-F]{6}$/i.test(t)?(t.replace(/[0-9A-F]{2}/ig,function(n){i.push(parseInt(n,16))}),"rgba(".concat(i.join(","),", ").concat(e,")")):"rgba(255, 255, 255, 0.1)"};h.getFullScreenEl=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement};h.checkIsFunction=function(t){return t&&typeof t=="function"};h.checkIsObject=function(t){return t!==null&&nt(t)==="object"};h.hide=function(t){t.style.display="none"};h.show=function(t,e){t.style.display=e||"block"};h.isUndefined=function(t){if(typeof t>"u"||t===null)return!0};h.setStyleFromCsstext=function(t,e){if(e)if(h.typeOf(e)==="String"){var i=e.replace(/\s+/g,"").split(";");i.map(function(r){if(r){var n=r.split(":");n.length>1&&(t.style[n[0]]=n[1])}})}else Object.keys(e).map(function(r){t.style[r]=e[r]})};function bp(t,e){for(var i=0,r=e.length;i<r;i++)if(t.indexOf(e[i])>-1)return!0;return!1}h.filterStyleFromText=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:["width","height","top","left","bottom","right","position","z-index","padding","margin","transform"],i=t.style.cssText;if(!i)return{};var r=i.replace(/\s+/g,"").split(";"),n={},o={};return r.map(function(a){if(a){var s=a.split(":");s.length>1&&(bp(s[0],e)?n[s[0]]=s[1]:o[s[0]]=s[1])}}),t.setAttribute("style",""),Object.keys(o).map(function(a){t.style[a]=o[a]}),n};h.getStyleFromCsstext=function(t){var e=t.style.cssText;if(!e)return{};var i=e.replace(/\s+/g,"").split(";"),r={};return i.map(function(n){if(n){var o=n.split(":");o.length>1&&(r[o[0]]=o[1])}}),r};h.preloadImg=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(){},i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(t){var r=new window.Image;r.onload=function(n){r=null,e&&e(n)},r.onerror=function(n){r=null,i&&i(n)},r.src=t}};h.stopPropagation=function(t){t&&(t.stopPropagation(),t.cancelable&&t.preventDefault())};h.scrollTop=function(){return window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop||0};h.scrollLeft=function(){return window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft||0};h.checkTouchSupport=function(){return"ontouchstart"in window};h.getBuffered2=function(t){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:.5,i=[],r=0;r<t.length;r++)i.push({start:t.start(r)<.5?0:t.start(r),end:t.end(r)});i.sort(function(u,l){var c=u.start-l.start;return c||l.end-u.end});var n=[];if(e)for(var o=0;o<i.length;o++){var a=n.length;if(a){var s=n[a-1].end;i[o].start-s<e?i[o].end>s&&(n[a-1].end=i[o].end):n.push(i[o])}else n.push(i[o])}else n=i;return new dp(n)};h.getBufferByCurrentTime=function(t,e){var i={start:0,end:0,include:0,diff:0,cur:e};if(!t||t.length<1)return i;for(var r=-1,n=-1,o=parseInt(e*1e3,10),a=t.length-1;a>-1;a--){var s=parseInt(t.start(a)*1e3,10),u=parseInt(t.end(a)*1e3,10);if(o>=s&&o<=u){i.include=1,i.start=s/1e3,i.end=u/1e3,i.diff=(u-o)/1e3;break}else o<s&&(r<0||s-o<r)?(r=(s-o)/1e3,n=a):o>u&&(r<0||o-u<r)&&(r=(o-u)/1e3,n=a)}return i.include!==1&&(n<0&&(n=t.length-1),i.start=parseInt(t.start(n)*1e3,10)/1e3,i.end=parseInt(t.end(n)*1e3,10)/1e3,i.diff=(parseInt(i.end*1e3,10)-o)/1e3),i};h.getEventPos=function(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;return t.touches&&t.touches.length>0&&(t=t.touches[0]),{x:t.x/e,y:t.y/e,clientX:t.clientX/e,clientY:t.clientY/e,offsetX:t.offsetX/e,offsetY:t.offsetY/e,pageX:t.pageX/e,pageY:t.pageY/e}};h.requestAnimationFrame=function(t){var e=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame;if(e)return e(t)};h.getHostFromUrl=function(t){if(h.typeOf(t)!=="String")return"";var e=t.split("/"),i="";return e.length>3&&e[2]&&(i=e[2]),i};h.cancelAnimationFrame=function(t){var e=window.cancelAnimationFrame||window.mozCancelAnimationFrame||window.cancelRequestAnimationFrame;e&&e(t)};h.isMSE=function(t){return t.media&&(t=t.media),!t||!(t instanceof HTMLMediaElement)?!1:/^blob/.test(t.currentSrc)||/^blob/.test(t.src)};h.isBlob=function(t){return typeof t=="string"&&/^blob/.test(t)};h.generateSessionId=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,e=new Date().getTime();try{t=parseInt(t)}catch{t=0}e+=t,window.performance&&typeof window.performance.now=="function"&&(e+=parseInt(window.performance.now()));var i="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(r){var n=(e+Math.random()*16)%16|0;return e=Math.floor(e/16),(r==="x"?n:n&3|8).toString(16)});return i};h.adjustTimeByDuration=function(t,e,i){return!e||!t?t:t>e||i&&t<e?e:t};h.getTransformStyle=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{x:0,y:0,scale:1,rotate:0},e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",i={scale:"".concat(t.scale||1),translate:"".concat(t.x||0,"%, ").concat(t.y||0,"%"),rotate:"".concat(t.rotate||0,"deg")},r=Object.keys(i);return r.forEach(function(n){var o=new RegExp("".concat(n,"\\([^\\(]+\\)"),"g"),a="".concat(n,"(").concat(i[n],")");o.test(e)?(o.lastIndex=-1,e=e.replace(o,a)):e+="".concat(a," ")}),e};h.convertDeg=function(t){return Math.abs(t)<=1?t*360:t%360};function Xs(t){var e=nt(t);return t!==null&&(e==="object"||e==="function")}function _p(t,e,i){var r,n,o,a,s,u,l=0,c=!1,f=!1,d=!0,p=!e&&e!==0&&typeof window.requestAnimationFrame=="function";if(typeof t!="function")throw new TypeError("Expected a function");e=+e||0,Xs(i)&&(c=!!i.leading,f="maxWait"in i,o=f?Math.max(+i.maxWait||0,e):o,d="trailing"in i?!!i.trailing:d);function y(B){var ie=r,de=n;return r=n=void 0,l=B,a=t.apply(de,ie),a}function b(B,ie){return p?(window.cancelAnimationFrame(s),window.requestAnimationFrame(B)):setTimeout(B,ie)}function g(B){if(p)return window.cancelAnimationFrame(B);clearTimeout(B)}function T(B){return l=B,s=b(z,e),c?y(B):a}function E(B){var ie=B-u,de=B-l,pe=e-ie;return f?Math.min(pe,o-de):pe}function O(B){var ie=B-u,de=B-l;return u===void 0||ie>=e||ie<0||f&&de>=o}function z(){var B=Date.now();if(O(B))return H(B);s=b(z,E(B))}function H(B){return s=void 0,d&&r?y(B):(r=n=void 0,a)}function q(){s!==void 0&&g(s),l=0,r=u=n=s=void 0}function V(){return s===void 0?a:H(Date.now())}function ue(){return s!==void 0}function re(){for(var B=Date.now(),ie=O(B),de=arguments.length,pe=new Array(de),Ke=0;Ke<de;Ke++)pe[Ke]=arguments[Ke];if(r=pe,n=this,u=B,ie){if(s===void 0)return T(u);if(f)return s=b(z,e),y(u)}return s===void 0&&(s=b(z,e)),a}return re.cancel=q,re.flush=V,re.pending=ue,re}function Pp(t,e,i){var r=!0,n=!0;if(typeof t!="function")throw new TypeError("Expected a function");return Xs(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),_p(t,e,{leading:r,trailing:n,maxWait:e})}function wp(){var t=(document.documentElement.getAttribute("lang")||navigator.language||"zh-cn").toLocaleLowerCase();return t==="zh-cn"&&(t="zh"),t}function Sp(t,e,i){if(t){var r=t.getAttribute(i);return!!(r&&r===e&&(t.tagName==="VIDEO"||t.tagName==="AUDIO"))}}function kp(t,e,i){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Op(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var aa={1:"network",2:"network",3:"decoder",4:"format"},lr=kp(function t(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{errorType:"",errorCode:0,errorMessage:"",originError:"",ext:{},mediaError:null,src:null};Op(this,t);var r=e&&e.i18n?e.i18n.ERROR_TYPES:null;if(e!=null&&e.video){var n=i.mediaError?i.mediaError:e.video.error||{},o=e.duration,a=e.currentTime,s=e.ended,u=e.src,l=e.currentSrc,c=e.video,f=c.readyState,d=c.networkState,p={playerVersion:Ei,domain:document.domain,currentTime:a,duration:o,ended:s,readyState:f,networkState:d,src:i.src||u||l,errorType:i.errorType,errorCode:i.errorCode||n.code,message:i.errorMessage||n.message,mediaError:n,originError:i.originError?i.originError.stack:"",host:h.getHostFromUrl(u||l)};return i.ext&&Object.keys(i.ext).map(function(T){p[T]=i.ext[T]}),p}else if(arguments.length>1){for(var y={playerVersion:Ei,domain:document.domain},b=["errorType","currentTime","duration","networkState","readyState","src","currentSrc","ended","errd","errorCode","mediaError"],g=0;g<arguments.length;g++)y[b[g]]=arguments[g];return y.ex=r?(r[arguments[0]]||{}).msg:"",y}}),be="play",qo="playing",ze="ended",pt="pause",ei="error",Jo="seeking",xe="seeked",ye="timeupdate",Jn="waiting",Le="canplay",Tp="canplaythrough",Sn="durationchange",qs="volumechange",It="loadeddata",Ep="loadedmetadata",Js="ratechange",Qs="progress",ti="loadstart",kn="emptied",Cp="stalled",Ip="suspend",Rp="abort",$p="bufferedChange",Qo="focus",Zs="blur",Zo="ready",eu="urlNull",et="autoplay_started",ea="autoplay_was_prevented",ni="complete",cr="replay",ta="destroy",ri="urlchange",Ii="download_speed_change",Tt="buffer_control",je="fullscreen_change",fr="cssFullscreen_change",hr="mini_state_change",na="definition_change",xp="before_definition_change",Ri="after_definition_change",Lp="SEI_PARSED",Ap="retry",Rt="video_resize",$i="pip_change",tu="rotate",nu="screenShot",dr="playnext",ru="shortcut",iu="xglog",pr="user_action",ii="reset",ou="source_error",au="source_success",Dp="switch_subtitle",su=["play","playing","ended","pause","error","seeking","seeked","timeupdate","waiting","canplay","canplaythrough","durationchange","volumechange","loadeddata","loadedmetadata","ratechange","progress","loadstart","emptied","stalled","suspend","abort","lowdecode"],uu={STATS_INFO:"stats_info",STATS_DOWNLOAD:"stats_download",STATS_RESET:"stats_reset"},lu="fps_stuck",Np="degrade";const Mp=Object.freeze(Object.defineProperty({__proto__:null,ABORT:Rp,AFTER_DEFINITION_CHANGE:Ri,AUTOPLAY_PREVENTED:ea,AUTOPLAY_STARTED:et,BEFORE_DEFINITION_CHANGE:xp,BUFFER_CHANGE:$p,BUFFER_CONTROLS:Tt,CANPLAY:Le,CANPLAY_THROUGH:Tp,COMPLETE:ni,CSS_FULLSCREEN_CHANGE:fr,DEFINITION_CHANGE:na,DEGRADE:Np,DESTROY:ta,DOWNLOAD_SPEED_CHANGE:Ii,DURATION_CHANGE:Sn,EMPTIED:kn,ENDED:ze,ERROR:ei,FPS_STUCK:lu,FULLSCREEN_CHANGE:je,LOADED_DATA:It,LOADED_METADATA:Ep,LOAD_START:ti,MINI_STATE_CHANGE:hr,PAUSE:pt,PIP_CHANGE:$i,PLAY:be,PLAYER_BLUR:Zs,PLAYER_FOCUS:Qo,PLAYING:qo,PLAYNEXT:dr,PROGRESS:Qs,RATE_CHANGE:Js,READY:Zo,REPLAY:cr,RESET:ii,RETRY:Ap,ROTATE:tu,SCREEN_SHOT:nu,SEEKED:xe,SEEKING:Jo,SEI_PARSED:Lp,SHORTCUT:ru,SOURCE_ERROR:ou,SOURCE_SUCCESS:au,STALLED:Cp,STATS_EVENTS:uu,SUSPEND:Ip,SWITCH_SUBTITLE:Dp,TIME_UPDATE:ye,URL_CHANGE:ri,URL_NULL:eu,USER_ACTION:pr,VIDEO_EVENTS:su,VIDEO_RESIZE:Rt,VOLUME_CHANGE:qs,WAITING:Jn,XGLOG:iu},Symbol.toStringTag,{value:"Module"}));var sa={android:/(Android)\s([\d.]+)/,ios:/(Version)\/([\d.]+)/},jp=["avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","avc1.42E01E","mp4v.20.8","avc1.42E01E, mp4a.40.2","avc1.58A01E, mp4a.40.2","avc1.4D401E, mp4a.40.2","avc1.64001E, mp4a.40.2","mp4v.20.8, mp4a.40.2","mp4v.20.240, mp4a.40.2"],D={get device(){var t=D.os;return t.isPc?"pc":"mobile"},get browser(){if(typeof navigator>"u")return"";var t=navigator.userAgent.toLowerCase(),e={ie:/rv:([\d.]+)\) like gecko/,firefox:/firefox\/([\d.]+)/,chrome:/chrome\/([\d.]+)/,opera:/opera.([\d.]+)/,safari:/version\/([\d.]+).*safari/};return[].concat(Object.keys(e).filter(function(i){return e[i].test(t)}))[0]},get os(){if(typeof navigator>"u")return{};var t=navigator.userAgent,e=/(?:Windows Phone)/.test(t),i=/(?:SymbianOS)/.test(t)||e,r=/(?:Android)/.test(t),n=/(?:Firefox)/.test(t),o=/(?:iPad|PlayBook)/.test(t)||r&&!/(?:Mobile)/.test(t)||n&&/(?:Tablet)/.test(t),a=/(?:iPhone)/.test(t)&&!o,s=!a&&!r&&!i&&!o,u=/(?:iPad|PlayBook)/.test(t);return{isTablet:o,isPhone:a,isIpad:u,isIos:a||u,isAndroid:r,isPc:s,isSymbian:i,isWindowsPhone:e,isFireFox:n}},get osVersion(){if(typeof navigator>"u")return 0;var t=navigator.userAgent,e="";/(?:iPhone)|(?:iPad|PlayBook)/.test(t)?e=sa.ios:e=sa.android;var i=e?e.exec(t):[];if(i&&i.length>=3){var r=i[2].split(".");return r.length>0?parseInt(r[0]):0}return 0},get isWeixin(){if(typeof navigator>"u")return!1;var t=/(micromessenger)\/([\d.]+)/,e=t.exec(navigator.userAgent.toLocaleLowerCase());return!!e},isSupportMP4:function(){var e={isSupport:!1,mime:""};if(typeof document>"u")return e;if(this.supportResult)return this.supportResult;var i=document.createElement("video");return typeof i.canPlayType=="function"&&jp.map(function(r){i.canPlayType('video/mp4; codecs="'.concat(r,'"'))==="probably"&&(e.isSupport=!0,e.mime+="||".concat(r))}),this.supportResult=e,i=null,e},isHevcSupported:function(){return typeof MediaSource>"u"||!MediaSource.isTypeSupported?!1:MediaSource.isTypeSupported('video/mp4;codecs="hev1.1.6.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.2.4.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.3.E.L120.90"')||MediaSource.isTypeSupported('video/mp4;codecs="hev1.4.10.L120.90"')},probeConfigSupported:function(e){var i={supported:!1,smooth:!1,powerEfficient:!1};if(!e||typeof navigator>"u")return Promise.resolve(i);if(navigator.mediaCapabilities&&navigator.mediaCapabilities.decodingInfo)return navigator.mediaCapabilities.decodingInfo(e);var r=e.video||{},n=e.audio||{};try{var o=MediaSource.isTypeSupported(r.contentType),a=MediaSource.isTypeSupported(n.contentType);return Promise.resolve({supported:o&&a,smooth:!1,powerEfficient:!1})}catch{return Promise.resolve(i)}}};function $t(t){"@babel/helpers - typeof";return $t=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},$t(t)}function Bp(t,e,i){return e=cu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Fp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Hp(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,cu(r.key),r)}}function Vp(t,e,i){return e&&Hp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cu(t){var e=Up(t,"string");return $t(e)==="symbol"?e:String(e)}function Up(t,e){if($t(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if($t(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Be(){return typeof Reflect<"u"&&Reflect.get?Be=Reflect.get.bind():Be=function(e,i,r){var n=zp(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Be.apply(this,arguments)}function zp(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=Se(t),t!==null););return t}function Kp(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&xi(t,e)}function xi(t,e){return xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},xi(t,e)}function Gp(t){var e=Xp();return function(){var r=Se(t),n;if(e){var o=Se(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Wp(this,n)}}function Wp(t,e){if(e&&($t(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yp(t)}function Yp(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Xp(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Se(t){return Se=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Se(t)}function li(t,e){!this||!this.emit||(t==="error"?this.errorHandler(t,e.error):this.emit(t,e))}function qp(t,e){var i="on".concat(t.charAt(0).toUpperCase()).concat(t.slice(1));return e[i]&&typeof e[i]=="function"&&e.on(t,e[i]),function(r,n){var o=t,a={player:e,eventName:o,originalEvent:r,detail:r.detail||{},timeStamp:r.timeStamp,currentTime:e.currentTime,duration:e.duration,paused:e.paused,ended:e.ended,isInternalOp:!!e._internalOp[r.type],muted:e.muted,volume:e.volume,host:h.getHostFromUrl(e.currentSrc),vtype:e.vtype};if(e.removeInnerOP(r.type),o==="timeupdate"&&(e._currentTime=e.video&&e.video.currentTime),o==="ratechange"){var s=e.video?e.video.playbackRate:0;if(s&&e._rate===s)return;e._rate=e.video&&e.video.playbackRate}if(o==="durationchange"&&(e._duration=e.video.duration),o==="volumechange"&&(a.isMutedChange=e._lastMuted!==e.muted,e._lastMuted=e.muted),o==="error"&&(a.error=n||e.video.error),e.videoEventMiddleware[t]){var u=li.bind(e,t,a);try{e.videoEventMiddleware[t].call(e,a,u)}catch(l){throw li.call(e,o,a),l}}else li.call(e,o,a)}}var Jp=function(t){Kp(i,t);var e=Gp(i);function i(r){var n;Fp(this,i),n=e.call(this,r),n._hasStart=!1,n._currentTime=0,n._duration=0,n._internalOp={},n._lastMuted=!1,n.vtype=r.vtype||"MP4",n.bizType=typeof r.bizType=="number"&&r.bizType>=0?r.bizType:0,n._rate=-1,n.videoConfig=Object.assign({},{controls:!1,autoplay:r.autoplay,playsinline:r.playsinline,"x5-playsinline":r.playsinline,"webkit-playsinline":r.playsinline,"x5-video-player-fullscreen":r["x5-video-player-fullscreen"]||r.x5VideoPlayerFullscreen,"x5-video-orientation":r["x5-video-orientation"]||r.x5VideoOrientation,airplay:r.airplay,"webkit-airplay":r.airplay,tabindex:r.tabindex|0,mediaType:r.mediaType||"video","data-index":-1},r.videoConfig,r.videoAttributes);var o=r["x5-video-player-type"]||r.x5VideoPlayerType;return D.isWeixin&&D.os.isAndroid&&o&&(n.videoConfig["x5-video-player-type"]=o,delete n.videoConfig.playsinline,delete n.videoConfig["webkit-playsinline"],delete n.videoConfig["x5-playsinline"]),r.loop&&(n.videoConfig.loop="loop"),n.video=h.createDom(n.videoConfig.mediaType,"",n.videoConfig,""),r.defaultPlaybackRate&&(n.video.defaultPlaybackRate=n.video.playbackRate=r.defaultPlaybackRate),h.typeOf(r.volume)==="Number"&&(n.volume=r.volume),r.autoplayMuted&&(n.video.muted=!0,n._lastMuted=!0),r.autoplay&&(n.video.autoplay=!0),n._interval={},n.videoEventMiddleware={},n.attachVideoEvents(),n}return Vp(i,[{key:"setEventsMiddleware",value:function(n){var o=this;Object.keys(n).map(function(a){o.videoEventMiddleware[a]=n[a]})}},{key:"removeEventsMiddleware",value:function(n){var o=this;Object.keys(n).map(function(a){delete o.videoEventMiddleware[a]})}},{key:"attachVideoEvents",value:function(n){var o=this;this.evHandlers||(this._evHandlers=su.map(function(a){return Bp({},a,qp(a,o))})),n||(n=this.video),this._evHandlers.forEach(function(a){var s=Object.keys(a)[0];n.addEventListener(s,a[s],!1)})}},{key:"detachVideoEvents",value:function(n){n||(n=this.video),this._evHandlers.map(function(o){var a=Object.keys(o)[0];n.removeEventListener(Object.keys(o)[0],o[a],!1)})}},{key:"_attachSourceEvents",value:function(n,o){var a=this;n.removeAttribute("src"),n.load(),n.removeEventListener("loadeddata",this._vLoadeddata),o.forEach(function(f){a.video.appendChild(h.createDom("source","",{src:"".concat(f.src),type:"".concat(f.type||"")}))});var s=n.children;if(s){this._videoSourceCount=s.length,this._vLoadeddata=function(f){a.emit(au,{src:f.target.currentSrc,host:h.getHostFromUrl(f.target.currentSrc)})};for(var u=null,l=0;l<this._evHandlers.length;l++)if(Object.keys(this._evHandlers[l])[0]==="error"){u=this._evHandlers[l];break}!this._sourceError&&(this._sourceError=function(f){if(a._videoSourceCount--,a._videoSourceCount===0){var d={code:4,message:"sources_load_error"};u?u.error(f,d):a.errorHandler("error",d)}var p=aa[4];a.emit(ou,new lr(a,{errorType:p,errorCode:4,errorMessage:"sources_load_error",mediaError:{code:4,message:"sources_load_error"},src:f.target.src}))});for(var c=0;c<s.length;c++)s[c].addEventListener("error",this._sourceError);n.addEventListener("loadeddata",this._vLoadeddata)}}},{key:"_detachSourceEvents",value:function(n){var o=n.children;if(!(!o||o.length===0||!this._sourceError)){for(var a=0;a<o.length;a++)o[a].removeEventListener("error",this._sourceError);for(;o.length>0;)n.removeChild(o[0]);this._vLoadeddata&&n.removeEventListener("loadeddata",this._vLoadeddata)}}},{key:"errorHandler",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(this.video&&(this.video.error||o)){var a=this.video.error||o,s=a.code?aa[a.code]:"other",u=a.message||"";this.video.currentSrc||(u="empty_src_".concat(a.message),a={code:6,message:u}),this.emit(n,new lr(this,{errorType:s,errorCode:a.code,errorMessage:a.message||"",mediaError:a}))}}},{key:"hasStart",get:function(){return this._hasStart},set:function(n){typeof n=="boolean"&&(this._hasStart=n,this.emit("hasstart"))}},{key:"destroy",value:function(){var n=this;this.video&&(this.video.pause&&(this.video.pause(),this.video.muted=!0),this.video.removeAttribute("src"),this.video.load()),this._currentTime=0,this._duration=0,this._hasStart=!1,this.videoConfig=null;for(var o in this._interval)Object.prototype.hasOwnProperty.call(this._interval,o)&&(clearInterval(this._interval[o]),this._interval[o]=null);this.detachVideoEvents(),this._evHandlers.map(function(a){var s=Object.keys(a)[0],u="on".concat(s.charAt(0).toUpperCase()).concat(s.slice(1));typeof n[u]=="function"&&n.off(s,n[u])}),this._evHandlers=null,this.video=null,this.videoEventMiddleware={},this.removeAllListeners()}},{key:"play",value:function(){var n=this.video?this.video.play():null;return n}},{key:"pause",value:function(){this.video&&this.video.pause()}},{key:"load",value:function(){this.video&&this.video.load()}},{key:"canPlayType",value:function(n){return this.video?this.video.canPlayType(n):!1}},{key:"getBufferedRange",value:function(n){var o=[0,0];if(!this.video)return o;n||(n=this.video.buffered);var a=this.video.currentTime;if(n)for(var s=0,u=n.length;s<u&&(o[0]=n.start(s),o[1]=n.end(s),!(o[0]<=a&&a<=o[1]));s++);return o[0]-a<=0&&a-o[1]<=0?o:[0,0]}},{key:"autoplay",get:function(){return this.video?this.video.autoplay:!1},set:function(n){this.video&&(this.video.autoplay=n)}},{key:"buffered",get:function(){return this.video?this.video.buffered:null}},{key:"buffered2",get:function(){return this.video?h.getBuffered2(this.video.buffered):null}},{key:"bufferedPoint",get:function(){var n={start:0,end:0};if(!this.video)return n;var o=this.video.buffered;if(!o||o.length===0)return n;for(var a=0;a<o.length;a++)if((o.start(a)<=this.currentTime||o.start(a)<.1)&&o.end(a)>=this.currentTime)return{start:o.start(a),end:o.end(a)};return n}},{key:"crossOrigin",get:function(){return this.video?this.video.crossOrigin:""},set:function(n){this.video&&(this.video.crossOrigin=n)}},{key:"currentSrc",get:function(){return this.video?this.video.currentSrc:""},set:function(n){this.video&&(this.video.currentSrc=n)}},{key:"currentTime",get:function(){return this.video?this.video.currentTime!==void 0?this.video.currentTime:this._currentTime:0},set:function(n){this.video&&(this.video.currentTime=n)}},{key:"defaultMuted",get:function(){return this.video?this.video.defaultMuted:!1},set:function(n){this.video&&(this.video.defaultMuted=n)}},{key:"duration",get:function(){return this._duration}},{key:"ended",get:function(){return this.video?this.video.ended:!1}},{key:"error",get:function(){if(!this.video||!this.video.error)return null;var n=["MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];return n[this.video.error.code-1]}},{key:"loop",get:function(){return this.video?this.video.loop:!1},set:function(n){this.video&&(this.video.loop=n)}},{key:"muted",get:function(){return this.video?this.video.muted:!1},set:function(n){!this.video||this.video.muted===n||(this._lastMuted=this.video.muted,this.video.muted=n)}},{key:"networkState",get:function(){return this.video?this.video.networkState:0}},{key:"paused",get:function(){return this.video?this.video.paused:!0}},{key:"playbackRate",get:function(){return this.video?this.video.playbackRate:0},set:function(n){!this.video||n===1/0||(this.video.defaultPlaybackRate=n,this.video.playbackRate=n)}},{key:"played",get:function(){return this.video?this.video.played:null}},{key:"preload",get:function(){return this.video?this.video.preload:!1},set:function(n){this.video&&(this.video.preload=n)}},{key:"readyState",get:function(){return this.video?this.video.readyState:0}},{key:"seekable",get:function(){return this.video?this.video.seekable:!1}},{key:"seeking",get:function(){return this.video?this.video.seeking:!1}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(n){this.video.src=n}},{key:"volume",get:function(){return this.video?this.video.volume:0},set:function(n){n===1/0||!this.video||(this.video.volume=n)}},{key:"addInnerOP",value:function(n){this._internalOp[n]=!0}},{key:"removeInnerOP",value:function(n){delete this._internalOp[n]}},{key:"emit",value:function(n,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Be(Se(i.prototype),"emit",this)).call.apply(a,[this,n,o].concat(u))}},{key:"on",value:function(n,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Be(Se(i.prototype),"on",this)).call.apply(a,[this,n,o].concat(u))}},{key:"once",value:function(n,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Be(Se(i.prototype),"once",this)).call.apply(a,[this,n,o].concat(u))}},{key:"off",value:function(n,o){for(var a,s=arguments.length,u=new Array(s>2?s-2:0),l=2;l<s;l++)u[l-2]=arguments[l];(a=Be(Se(i.prototype),"off",this)).call.apply(a,[this,n,o].concat(u))}},{key:"offAll",value:function(){Be(Se(i.prototype),"removeAllListeners",this).call(this)}}]),i}(Ys);function Vn(t){"@babel/helpers - typeof";return Vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vn(t)}function Qp(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Zp(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,tv(r.key),r)}}function ev(t,e,i){return e&&Zp(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tv(t){var e=nv(t,"string");return Vn(e)==="symbol"?e:String(e)}function nv(t,e){if(Vn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Vn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var rv=function(){function t(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{name:"xgplayer",version:1,db:null,ojstore:{name:"xg-m4a",keypath:"vid"}};Qp(this,t),this.indexedDB=window.indexedDB||window.webkitindexedDB,this.IDBKeyRange=window.IDBKeyRange||window.webkitIDBKeyRange,this.myDB=e}return ev(t,[{key:"openDB",value:function(i){var r=this,n=this,o=this.myDB.version||1,a=n.indexedDB.open(n.myDB.name,o);a.onerror=function(s){},a.onsuccess=function(s){r.myDB.db=s.target.result,i.call(n)},a.onupgradeneeded=function(s){var u=s.target.result;s.target.transaction,u.objectStoreNames.contains(n.myDB.ojstore.name)||u.createObjectStore(n.myDB.ojstore.name,{keyPath:n.myDB.ojstore.keypath})}}},{key:"deletedb",value:function(){var i=this;i.indexedDB.deleteDatabase(this.myDB.name)}},{key:"closeDB",value:function(){this.myDB.db.close()}},{key:"addData",value:function(i,r){for(var n=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<r.length;a++)o=n.add(r[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"putData",value:function(i,r){for(var n=this.myDB.db.transaction(i,"readwrite").objectStore(i),o,a=0;a<r.length;a++)o=n.put(r[a]),o.onerror=function(){},o.onsuccess=function(){}}},{key:"getDataByKey",value:function(i,r,n){var o=this,a=this.myDB.db.transaction(i,"readwrite").objectStore(i),s=a.get(r);s.onerror=function(){n.call(o,null)},s.onsuccess=function(u){var l=u.target.result;n.call(o,l)}}},{key:"deleteData",value:function(i,r){var n=this.myDB.db.transaction(i,"readwrite").objectStore(i);n.delete(r)}},{key:"clearData",value:function(i){var r=this.myDB.db.transaction(i,"readwrite").objectStore(i);r.clear()}}]),t}(),ua=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],la=["requestFullscreen","webkitRequestFullscreen","mozRequestFullScreen","msRequestFullscreen"],ca=["exitFullscreen","webkitExitFullscreen","mozCancelFullScreen","msExitFullscreen"],Ye="data-xgplayerid",fu={BUFFER_CONTROLS:"buffer_control"},Li={PLAYING:"playing",WAITING:"waiting"};function iv(t){return uv(t)||sv(t)||av(t)||ov()}function ov(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function av(t,e){if(t){if(typeof t=="string")return Ai(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ai(t,e)}}function sv(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function uv(t){if(Array.isArray(t))return Ai(t)}function Ai(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function Qn(t,e,i){for(var r=arguments.length,n=new Array(r>3?r-3:0),o=3;o<r;o++)n[o-3]=arguments[o];var a=e.call.apply(e,[t].concat(n));!i||typeof i!="function"||(a&&a.then?a.then(function(){for(var s=arguments.length,u=new Array(s),l=0;l<s;l++)u[l]=arguments[l];i.call.apply(i,[t].concat(u))}):i.call.apply(i,[t].concat(n)))}function vr(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{pre:null,next:null};return this.__hooks||(this.__hooks={}),!this.__hooks[t]&&(this.__hooks[t]=null),(function(){var r=arguments,n=this;if(i.pre)try{var o;(o=i.pre).call.apply(o,[this].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(t,":pre error] >> ").concat(u.message),u}if(this.__hooks&&this.__hooks[t])try{var a,s=(a=this.__hooks[t]).call.apply(a,[this,this].concat(Array.prototype.slice.call(arguments)));s?s.then?s.then(function(u){u!==!1&&Qn.apply(void 0,[n,e,i.next].concat(iv(r)))}).catch(function(u){throw u}):Qn.apply(void 0,[this,e,i.next].concat(Array.prototype.slice.call(arguments))):s===void 0&&Qn.apply(void 0,[this,e,i.next].concat(Array.prototype.slice.call(arguments)))}catch(u){throw u.message="[pluginName: ".concat(this.pluginName,":").concat(t,"] >> ").concat(u.message),u}else Qn.apply(void 0,[this,e,i.next].concat(Array.prototype.slice.call(arguments)))}).bind(this)}function yr(t,e){var i=this.__hooks;if(i)return i.hasOwnProperty(t)?(i&&(i[t]=e),!0):(console.warn("has no supported hook which name [".concat(t,"]")),!1)}function gr(t,e){var i=this.__hooks;i&&delete i[t]}function fa(t){if(!(!this.plugins||!this.plugins[t.toLowerCase()])){for(var e=this.plugins[t.toLowerCase()],i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return e.useHooks&&e.useHooks.apply(e,r)}}function ha(t){if(!(!this.plugins||!this.plugins[t.toLowerCase()])){var e=this.plugins[t.toLowerCase()];if(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return e.removeHooks&&e.removeHooks.apply(e,r)}}}function hu(t){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];t.__hooks={},e&&e.map(function(i){t.__hooks[i]=null}),Object.defineProperty(t,"hooks",{get:function(){return t.__hooks&&Object.keys(t.__hooks).map(function(r){if(t.__hooks[r])return r})}})}function du(t){t.__hooks=null}function Re(t,e,i){for(var r=arguments.length,n=new Array(r>3?r-3:0),o=3;o<r;o++)n[o-3]=arguments[o];if(t.__hooks&&t.__hooks[e]){var a,s=(a=t.__hooks[e]).call.apply(a,[t,t].concat(n));if(s&&s.then)s.then(function(u){return u===!1?null:i.call.apply(i,[t,t].concat(n))}).catch(function(u){console.warn("[runHooks]".concat(e," reject"),u.message)});else if(s!==!1)return i.call.apply(i,[t,t].concat(n))}else return i.call.apply(i,[t,t].concat(n))}function Un(t){"@babel/helpers - typeof";return Un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Un(t)}function da(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function pa(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?da(Object(i),!0).forEach(function(r){lv(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):da(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function lv(t,e,i){return e=pu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function cv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function va(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,pu(r.key),r)}}function fv(t,e,i){return e&&va(t.prototype,e),i&&va(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function pu(t){var e=hv(t,"string");return Un(e)==="symbol"?e:String(e)}function hv(t,e){if(Un(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Un(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function ci(t,e){A.logError("[".concat(t,"] event or callback cant be undefined or null when call ").concat(e))}var rt=function(){function t(e){cv(this,t),h.checkIsFunction(this.beforeCreate)&&this.beforeCreate(e),hu(this),this.__args=e,this.__events={},this.__onceEvents={},this.config=e.config||{},this.player=null,this.playerConfig={},this.pluginName="",this.__init(e)}return fv(t,[{key:"beforeCreate",value:function(i){}},{key:"afterCreate",value:function(){}},{key:"beforePlayerInit",value:function(){}},{key:"onPluginsReady",value:function(){}},{key:"afterPlayerInit",value:function(){}},{key:"destroy",value:function(){}},{key:"__init",value:function(i){this.player=i.player,this.playerConfig=i.player&&i.player.config,this.pluginName=i.pluginName?i.pluginName.toLowerCase():this.constructor.pluginName.toLowerCase(),this.logger=i.player&&i.player.logger}},{key:"updateLang",value:function(i){i||(i=this.lang)}},{key:"lang",get:function(){return this.player.lang}},{key:"i18n",get:function(){return this.player.i18n}},{key:"i18nKeys",get:function(){return this.player.i18nKeys}},{key:"domEventType",get:function(){var i=h.checkTouchSupport()?"touch":"mouse";return this.playerConfig&&(this.playerConfig.domEventType==="touch"||this.playerConfig.domEventType==="mouse")&&(i=this.playerConfig.domEventType),i}},{key:"on",value:function(i,r){var n=this;if(!i||!r||!this.player){ci(this.pluginName,"plugin.on(event, callback)");return}typeof i=="string"?(this.__events[i]=r,this.player.on(i,r)):Array.isArray(i)&&i.forEach(function(o){n.__events[o]=r,n.player.on(o,r)})}},{key:"once",value:function(i,r){var n=this;if(!i||!r||!this.player){ci(this.pluginName,"plugin.once(event, callback)");return}typeof i=="string"?(this.__onceEvents[i]=r,this.player.once(i,r)):Array.isArray(i)&&i.forEach(function(o){n.__onceEvents[o]=r,n.player.once(i,r)})}},{key:"off",value:function(i,r){var n=this;if(!i||!r||!this.player){ci(this.pluginName,"plugin.off(event, callback)");return}typeof i=="string"?(delete this.__events[i],this.player.off(i,r)):Array.isArray(i)&&i.forEach(function(o){delete n.__events[i],n.player.off(o,r)})}},{key:"offAll",value:function(){var i=this;["__events","__onceEvents"].forEach(function(r){Object.keys(i[r]).forEach(function(n){i[r][n]&&i.off(n,i[r][n]),n&&delete i[r][n]})}),this.__events={},this.__onceEvents={}}},{key:"emit",value:function(i){var r;if(this.player){for(var n=arguments.length,o=new Array(n>1?n-1:0),a=1;a<n;a++)o[a-1]=arguments[a];(r=this.player).emit.apply(r,[i].concat(o))}}},{key:"emitUserAction",value:function(i,r){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(this.player){var o=pa(pa({},n),{},{pluginName:this.pluginName});this.player.emitUserAction(i,r,o)}}},{key:"hook",value:function(i,r){return vr.call.apply(vr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(i,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return yr.call.apply(yr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(i,r){for(var n=arguments.length,o=new Array(n>2?n-2:0),a=2;a<n;a++)o[a-2]=arguments[a];return gr.call.apply(gr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"registerPlugin",value:function(i){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";if(this.player)return n&&(r.pluginName=n),this.player.registerPlugin({plugin:i,options:r})}},{key:"getPlugin",value:function(i){return this.player?this.player.getPlugin(i):null}},{key:"__destroy",value:function(){var i=this,r=this.player,n=this.pluginName;this.offAll(),h.clearAllTimers(this),h.checkIsFunction(this.destroy)&&this.destroy(),["player","playerConfig","pluginName","logger","__args","__hooks"].map(function(o){i[o]=null}),r.unRegisterPlugin(n),du(this)}}],[{key:"defineGetterOrSetter",value:function(i,r){for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&Object.defineProperty(i,n,r[n])}},{key:"defaultConfig",get:function(){return{}}},{key:"pluginName",get:function(){return"pluginName"}}]),t}(),dv=9;if(typeof Element<"u"&&!Element.prototype.matches){var yt=Element.prototype;yt.matches=yt.matchesSelector||yt.mozMatchesSelector||yt.msMatchesSelector||yt.oMatchesSelector||yt.webkitMatchesSelector}function pv(t,e){for(;t&&t.nodeType!==dv;){if(typeof t.matches=="function"&&t.matches(e))return t;t=t.parentNode}}var vv=pv,yv=vv;function fi(t,e,i,r,n){var o=mv.apply(this,arguments);return t.addEventListener(i,o,n),{destroy:function(){t.removeEventListener(i,o,n)}}}function gv(t,e,i,r,n){return typeof t.addEventListener=="function"?fi.apply(null,arguments):typeof i=="function"?fi.bind(null,document).apply(null,arguments):(typeof t=="string"&&(t=document.querySelectorAll(t)),Array.prototype.map.call(t,function(o){return fi(o,e,i,r,n)}))}function mv(t,e,i,r){return function(n){n.delegateTarget=yv(n.target,e),n.delegateTarget&&r.call(t,n)}}var bv=gv;const ya=Xo(bv);function _v(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ga(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wv(r.key),r)}}function Pv(t,e,i){return e&&ga(t.prototype,e),i&&ga(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function wv(t){var e=Sv(t,"string");return me(e)==="symbol"?e:String(e)}function Sv(t,e){if(me(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(me(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Et(){return typeof Reflect<"u"&&Reflect.get?Et=Reflect.get.bind():Et=function(e,i,r){var n=kv(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Et.apply(this,arguments)}function kv(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=Ve(t),t!==null););return t}function Ov(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Di(t,e)}function Di(t,e){return Di=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Di(t,e)}function Tv(t){var e=Iv();return function(){var r=Ve(t),n;if(e){var o=Ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ev(this,n)}}function Ev(t,e){if(e&&(me(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Cv(t)}function Cv(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Iv(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ve(t){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ve(t)}function me(t){"@babel/helpers - typeof";return me=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},me(t)}var Rv={CONTROLS:"controls",ROOT:"root"},W={ROOT:"root",ROOT_LEFT:"rootLeft",ROOT_RIGHT:"rootRight",ROOT_TOP:"rootTop",CONTROLS_LEFT:"controlsLeft",CONTROLS_RIGTH:"controlsRight",CONTROLS_RIGHT:"controlsRight",CONTROLS_CENTER:"controlsCenter",CONTROLS:"controls"},ma={ICON_DISABLE:"xg-icon-disable",ICON_HIDE:"xg-icon-hide"};function hi(t){return t?t.indexOf&&/^(?:http|data:|\/)/.test(t):!1}function $v(t,e){return me(t)==="object"&&t.class&&typeof t.class=="string"?"".concat(e," ").concat(t.class):e}function xv(t,e){return me(t)==="object"&&t.attr&&me(t.attr)==="object"&&Object.keys(t.attr).map(function(i){e[i]=t.attr[i]}),e}function ba(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"",r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:{},n=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",o=null;if(t instanceof window.Element)return h.addClass(t,i),Object.keys(r).map(function(a){t.setAttribute(a,r[a])}),t;if(hi(t)||hi(t.url))return r.src=hi(t)?t:t.url||"",o=h.createDom(t.tag||"img","",r,"xg-img ".concat(i)),o;if(typeof t=="function")try{return o=t(),o instanceof window.Element?(h.addClass(o,i),Object.keys(r).map(function(a){o.setAttribute(a,r[a])}),o):(A.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(n,"] is a function mast return an Element Object")),null)}catch(a){return A.logError("Plugin named [".concat(n,"]:createIcon"),a),null}return typeof t=="string"?h.createDomFromHtml(t,r,i):(A.logWarn("warn>>icons.".concat(e," in config of plugin named [").concat(n,"] is invalid")),null)}function Lv(t,e){var i=e.config.icons||e.playerConfig.icons;Object.keys(t).map(function(r){var n=t[r],o=n&&n.class?n.class:"",a=n&&n.attr?n.attr:{},s=null;i&&i[r]&&(o=$v(i[r],o),a=xv(i[r],a),s=ba(i[r],r,o,a,e.pluginName)),!s&&n&&(s=ba(n.icon?n.icon:n,a,o,{},e.pluginName)),e.icons[r]=s})}function Av(t,e){Object.keys(t).map(function(i){Object.defineProperty(e.langText,i,{get:function(){var n=e.lang,o=e.i18n;return o[i]?o[i]:t[i]&&t[i][n]||""}})})}var F=function(t){Ov(i,t);var e=Tv(i);function i(){var r,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};return _v(this,i),r=e.call(this,n),r.__delegates=[],r}return Pv(i,[{key:"__init",value:function(n){if(Et(Ve(i.prototype),"__init",this).call(this,n),!!n.root){var o=n.root,a=null;this.icons={},this.root=null,this.parent=null;var s=this.registerIcons()||{};Lv(s,this),this.langText={};var u=this.registerLanguageTexts()||{};Av(u,this);var l="";try{l=this.render()}catch(d){throw A.logError("Plugin:".concat(this.pluginName,":render"),d),new Error("Plugin:".concat(this.pluginName,":render:").concat(d.message))}if(l)a=i.insert(l,o,n.index),a.setAttribute("data-index",n.index);else if(n.tag)a=h.createDom(n.tag,"",n.attr,n.name),a.setAttribute("data-index",n.index),o.appendChild(a);else return;this.root=a,this.parent=o;var c=this.config.attr||{},f=this.config.style||{};this.setAttr(c),this.setStyle(f),this.config.index&&this.root.setAttribute("data-index",this.config.index),this.__registerChildren()}}},{key:"__registerChildren",value:function(){var n=this;if(this.root){this._children=[];var o=this.children();o&&me(o)==="object"&&Object.keys(o).length>0&&Object.keys(o).map(function(a){var s=a,u=o[s],l={root:n.root},c,f;typeof u=="function"?(c=n.config[s]||{},f=u):me(u)==="object"&&typeof u.plugin=="function"&&(c=u.options?h.deepCopy(n.config[s]||{},u.options):n.config[s]||{},f=u.plugin),l.config=c,c.index!==void 0&&(l.index=c.index),c.root&&(l.root=c.root),n.registerPlugin(f,l,s)})}}},{key:"updateLang",value:function(n){n||(n=this.lang);function o(l,c){for(var f=0;f<l.children.length;f++)l.children[f].children.length>0?o(l.children[f],c):c(l.children[f])}var a=this.root,s=this.i18n,u=this.langText;a&&o(a,function(l){var c=l.getAttribute&&l.getAttribute("lang-key");if(c){var f=s[c.toUpperCase()]||u[c];f&&(l.innerHTML=typeof f=="function"?f(n):f)}})}},{key:"lang",get:function(){return this.player.lang}},{key:"changeLangTextKey",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",a=this.i18n||{},s=this.langText;n.setAttribute&&n.setAttribute("lang-key",o);var u=a[o]||s[o]||"";u&&(n.innerHTML=u)}},{key:"plugins",value:function(){return this._children}},{key:"disable",value:function(){this.config.disable=!0,h.addClass(this.find(".xgplayer-icon"),ma.ICON_DISABLE)}},{key:"enable",value:function(){this.config.disable=!1,h.removeClass(this.find(".xgplayer-icon"),ma.ICON_DISABLE)}},{key:"children",value:function(){return{}}},{key:"registerPlugin",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";o.root=o.root||this.root;var s=Et(Ve(i.prototype),"registerPlugin",this).call(this,n,o,a);return this._children.push(s),s}},{key:"registerIcons",value:function(){return{}}},{key:"registerLanguageTexts",value:function(){return{}}},{key:"find",value:function(n){if(this.root)return this.root.querySelector(n)}},{key:"bind",value:function(n,o,a){var s=this;if(arguments.length<3&&typeof o=="function")Array.isArray(n)?n.forEach(function(l){s.bindEL(l,o)}):this.bindEL(n,o);else{var u=i.delegate.call(this,this.root,n,o,a);this.__delegates=this.__delegates.concat(u)}}},{key:"unbind",value:function(n,o){var a=this;if(arguments.length<3&&typeof o=="function")Array.isArray(n)?n.forEach(function(l){a.unbindEL(l,o)}):this.unbindEL(n,o);else for(var s="".concat(n,"_").concat(o),u=0;u<this.__delegates.length;u++)if(this.__delegates[u].key===s){this.__delegates[u].destroy(),this.__delegates.splice(u,1);break}}},{key:"setStyle",value:function(n,o){var a=this;if(this.root){if(h.typeOf(n)==="String")return this.root.style[n]=o;h.typeOf(n)==="Object"&&Object.keys(n).map(function(s){a.root.style[s]=n[s]})}}},{key:"setAttr",value:function(n,o){var a=this;if(this.root){if(h.typeOf(n)==="String")return this.root.setAttribute(n,o);h.typeOf(n)==="Object"&&Object.keys(n).map(function(s){a.root.setAttribute(s,n[s])})}}},{key:"setHtml",value:function(n,o){this.root&&(this.root.innerHTML=n,typeof o=="function"&&o())}},{key:"bindEL",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(n)in this.root&&typeof o=="function"&&this.root.addEventListener(n,o,a)}},{key:"unbindEL",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;this.root&&"on".concat(n)in this.root&&typeof o=="function"&&this.root.removeEventListener(n,o,a)}},{key:"show",value:function(n){if(this.root){this.root.style.display=n!==void 0?n:"block";var o=window.getComputedStyle(this.root,null),a=o.getPropertyValue("display");if(a==="none")return this.root.style.display="block"}}},{key:"hide",value:function(){this.root&&(this.root.style.display="none")}},{key:"appendChild",value:function(n,o){if(!this.root)return null;if(arguments.length<2&&arguments[0]instanceof window.Element)return this.root.appendChild(arguments[0]);if(!o||!(o instanceof window.Element))return null;try{return typeof n=="string"?this.find(n).appendChild(o):n.appendChild(o)}catch(a){return A.logError("Plugin:appendChild",a),null}}},{key:"render",value:function(){return""}},{key:"destroy",value:function(){}},{key:"__destroy",value:function(){var n=this,o=this.player;this.__delegates.map(function(a){a.destroy()}),this.__delegates=[],this._children instanceof Array&&(this._children.map(function(a){o.unRegisterPlugin(a.pluginName)}),this._children=null),this.root&&(this.root.hasOwnProperty("remove")?this.root.remove():this.root.parentNode&&this.root.parentNode.removeChild(this.root)),Et(Ve(i.prototype),"__destroy",this).call(this),this.icons={},["root","parent"].map(function(a){n[a]=null})}}],[{key:"insert",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=o.children.length,u=Number(a),l=n instanceof window.Node;if(s){for(var c=0,f=null,d="";c<s;c++){f=o.children[c];var p=Number(f.getAttribute("data-index"));if(p>=u){d="beforebegin";break}else p<u&&(d="afterend")}return l?d==="afterend"?o.appendChild(n):o.insertBefore(n,f):f.insertAdjacentHTML(d,n),d==="afterend"?o.children[o.children.length-1]:o.children[c]}else return l?o.appendChild(n):o.insertAdjacentHTML("beforeend",n),o.children[o.children.length-1]}},{key:"defaultConfig",get:function(){return{}}},{key:"delegate",value:function(n,o,a,s){var u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1,l=[];if(n instanceof window.Node&&typeof s=="function")if(Array.isArray(a))a.forEach(function(f){var d=ya(n,o,f,s,u);d.key="".concat(o,"_").concat(f),l.push(d)});else{var c=ya(n,o,a,s,u);c.key="".concat(o,"_").concat(a),l.push(c)}return l}},{key:"ROOT_TYPES",get:function(){return Rv}},{key:"POSITIONS",get:function(){return W}}]),i}(rt);function zn(t){"@babel/helpers - typeof";return zn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zn(t)}function Dv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Nv(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,vu(r.key),r)}}function Mv(t,e,i){return e&&Nv(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function jv(t,e,i){return e=vu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function vu(t){var e=Bv(t,"string");return zn(e)==="symbol"?e:String(e)}function Bv(t,e){if(zn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(zn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Fv=function(){function t(){var e=this;if(Dv(this,t),jv(this,"__trigger",function(i){var r=new Date().getTime();e.timeStamp=r;for(var n=0;n<i.length;n++)e.__runHandler(i[n].target)}),this.__handlers=[],this.timeStamp=0,this.observer=null,!!window.ResizeObserver)try{this.observer=new window.ResizeObserver(Pp(this.__trigger,100,{trailing:!0})),this.timeStamp=new Date().getTime()}catch(i){console.error(i)}}return Mv(t,[{key:"addObserver",value:function(i,r){if(this.observer){this.observer&&this.observer.observe(i);for(var n=i.getAttribute(Ye),o=this.__handlers,a=-1,s=0;s<o.length;s++)o[s]&&i===o[s].target&&(a=s);a>-1?this.__handlers[a].handler=r:this.__handlers.push({target:i,handler:r,playerId:n})}}},{key:"unObserver",value:function(i){var r=-1;this.__handlers.map(function(n,o){i===n.target&&(r=o)});try{this.observer&&this.observer.unobserve(i)}catch{}this.observer&&this.observer.unobserve(i),r>-1&&this.__handlers.splice(r,1)}},{key:"destroyObserver",value:function(){this.observer&&this.observer.disconnect(),this.observer=null,this.__handlers=null}},{key:"__runHandler",value:function(i){for(var r=this.__handlers,n=0;n<r.length;n++)if(r[n]&&i===r[n].target){try{r[n].handler(i)}catch(o){console.error(o)}return!0}return!1}}]),t}(),Rn=null;function Hv(t,e){return Rn||(Rn=new Fv),Rn.addObserver(t,e),Rn}function Vv(t,e){Rn.unObserver(t,e)}var J={pluginGroup:{},init:function(e){var i=e._pluginInfoId;i||(i=new Date().getTime(),e._pluginInfoId=i),!e.config.closeResizeObserver&&Hv(e.root,function(){e.getVideoSize()}),this.pluginGroup[i]={_originalOptions:e.config||{},_plugins:{}}},formatPluginInfo:function(e,i){var r=null,n=null;return e.plugin&&typeof e.plugin=="function"?(r=e.plugin,n=e.options):(r=e,n={}),i&&(n.config=i||{}),{PLUFGIN:r,options:n}},checkPluginIfExits:function(e,i){for(var r=0;r<i.length;r++)if(e.toLowerCase()===i[r].pluginName.toLowerCase())return!0;return!1},getRootByConfig:function(e,i){for(var r=Object.keys(i),n=null,o=0;o<r.length;o++)if(e.toLowerCase()===r[o].toLowerCase()){n=i[r[o]];break}return h.typeOf(n)==="Object"?{root:n.root,position:n.position}:{}},lazyRegister:function(e,i){var r=this,n=i.timeout||1500;return Promise.race([i.loader().then(function(o){var a;o&&o.__esModule?a=o.default:a=o,r.register(e,a,o.options)}),new Promise(function(o,a){setTimeout(function(){a(new Error("timeout"))},n)})])},register:function(e,i){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!e||!i||typeof i!="function"||i.prototype===void 0)){var n=e._pluginInfoId;if(!(!n||!this.pluginGroup[n])){this.pluginGroup[n]._plugins||(this.pluginGroup[n]._plugins={});var o=this.pluginGroup[n]._plugins,a=this.pluginGroup[n]._originalOptions;r.player=e;var s=r.pluginName||i.pluginName;if(!s)throw new Error("The property pluginName is necessary");if(i.isSupported&&!i.isSupported()){console.warn("not supported plugin [".concat(s,"]"));return}r.config||(r.config={});for(var u=Object.keys(a),l=0;l<u.length;l++)if(s.toLowerCase()===u[l].toLowerCase()){var c=a[u[l]];h.typeOf(c)==="Object"&&(r.config=Object.assign({},r.config,a[u[l]]));break}i.defaultConfig&&Object.keys(i.defaultConfig).forEach(function(d){typeof r.config[d]>"u"&&(r.config[d]=i.defaultConfig[d])}),r.root?typeof r.root=="string"&&(r.root=e[r.root]):r.root=e.root,r.index=r.config.index||0;try{o[s.toLowerCase()]&&(this.unRegister(n,s.toLowerCase()),console.warn("the is one plugin with same pluginName [".concat(s,"] exist, destroy the old instance")));var f=new i(r);return o[s.toLowerCase()]=f,o[s.toLowerCase()].func=i,f&&typeof f.afterCreate=="function"&&f.afterCreate(),f}catch(d){throw console.error(d),d}}}},unRegister:function(e,i){e._pluginInfoId&&(e=e._pluginInfoId),i=i.toLowerCase();try{var r=this.pluginGroup[e]._plugins[i];r&&(r.pluginName&&r.__destroy(),delete this.pluginGroup[e]._plugins[i])}catch(n){console.error("[unRegister:".concat(i,"] cgid:[").concat(e,"] error"),n)}},deletePlugin:function(e,i){var r=e._pluginInfoId;r&&this.pluginGroup[r]&&this.pluginGroup[r]._plugins&&delete this.pluginGroup[r]._plugins[i]},getPlugins:function(e){var i=e._pluginInfoId;return i&&this.pluginGroup[i]?this.pluginGroup[i]._plugins:{}},findPlugin:function(e,i){var r=e._pluginInfoId;if(!r||!this.pluginGroup[r])return null;var n=i.toLowerCase();return this.pluginGroup[r]._plugins[n]},beforeInit:function(e){var i=this;function r(n){return!n||!n.then?new Promise(function(o){o()}):n}return new Promise(function(n){if(i.pluginGroup){var o;return e._loadingPlugins&&e._loadingPlugins.length?o=Promise.all(e._loadingPlugins):o=Promise.resolve(),o.then(function(){var a=e._pluginInfoId;if(!i.pluginGroup[a]){n();return}var s=i.pluginGroup[a]._plugins,u=[];Object.keys(s).forEach(function(l){if(s[l]&&s[l].beforePlayerInit)try{var c=s[l].beforePlayerInit();u.push(r(c))}catch(f){throw u.push(r(null)),f}}),Promise.all([].concat(u)).then(function(){n()}).catch(function(l){console.error(l),n()})})}})},afterInit:function(e){var i=e._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var r=this.pluginGroup[i]._plugins;Object.keys(r).forEach(function(n){r[n]&&r[n].afterPlayerInit&&r[n].afterPlayerInit()})}},setLang:function(e,i){var r=i._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var n=this.pluginGroup[r]._plugins;Object.keys(n).forEach(function(o){if(n[o].updateLang)n[o].updateLang(e);else try{n[o].lang=e}catch{console.warn("".concat(o," setLang"))}})}},reRender:function(e){var i=this,r=e._pluginInfoId;if(!(!r||!this.pluginGroup[r])){var n=[],o=this.pluginGroup[r]._plugins;Object.keys(o).forEach(function(a){a!=="controls"&&o[a]&&(n.push({plugin:o[a].func,options:o[a].__args}),i.unRegister(r,a))}),n.forEach(function(a){i.register(e,a.plugin,a.options)})}},onPluginsReady:function(e){var i=e._pluginInfoId;if(!(!i||!this.pluginGroup[i])){var r=this.pluginGroup[i]._plugins||{};Object.keys(r).forEach(function(n){r[n].onPluginsReady&&typeof r[n].onPluginsReady=="function"&&r[n].onPluginsReady()})}},destroy:function(e){var i=e._pluginInfoId;if(this.pluginGroup[i]){Vv(e.root);for(var r=this.pluginGroup[i]._plugins,n=0,o=Object.keys(r);n<o.length;n++){var a=o[n];this.unRegister(i,a)}delete this.pluginGroup[i],delete e._pluginInfoId}}};const k={DEFAULT:"xgplayer",DEFAULT_SKIN:"xgplayer-skin-default",ENTER:"xgplayer-is-enter",PAUSED:"xgplayer-pause",PLAYING:"xgplayer-playing",ENDED:"xgplayer-ended",CANPLAY:"xgplayer-canplay",LOADING:"xgplayer-isloading",ERROR:"xgplayer-is-error",REPLAY:"xgplayer-replay",NO_START:"xgplayer-nostart",ACTIVE:"xgplayer-inactive",FULLSCREEN:"xgplayer-is-fullscreen",CSS_FULLSCREEN:"xgplayer-is-cssfullscreen",PARENT_FULLSCREEN:"xgplayer-fullscreen-parent",ROTATE_FULLSCREEN:"xgplayer-rotate-fullscreen",PARENT_ROTATE_FULLSCREEN:"xgplayer-rotate-parent",INNER_FULLSCREEN:"xgplayer-inner-fullscreen",NO_CONTROLS:"no-controls",FLEX_CONTROLS:"flex-controls",CONTROLS_FOLLOW:"controls-follow",AUTOHIDE:"xgplayer_autohide",NOT_ALLOW_AUTOPLAY:"not-allow-autoplay",SEEKING:"seeking",PC:"xgplayer-pc",MOBILE:"xgplayer-mobile",MINI:"xgplayer-mini"};function _a(){return{id:"",el:null,url:"",domEventType:"default",nullUrlStart:!1,width:600,height:337.5,fluid:!1,fitVideoSize:"fixed",videoFillMode:"auto",volume:.6,autoplay:!1,autoplayMuted:!1,loop:!1,isLive:!1,zoom:1,videoInit:!0,poster:"",isMobileSimulateMode:!1,defaultPlaybackRate:1,execBeforePluginsCall:null,allowSeekAfterEnded:!0,enableContextmenu:!0,closeVideoClick:!1,closeVideoDblclick:!1,closePlayerBlur:!1,closeDelayBlur:!1,leavePlayerTime:3e3,closePlayVideoFocus:!1,closePauseVideoFocus:!1,closeFocusVideoFocus:!0,closeControlsBlur:!0,topBarAutoHide:!0,videoAttributes:{},startTime:0,seekedStatus:"play",miniprogress:!1,disableSwipeHandler:function(){},enableSwipeHandler:function(){},preProcessUrl:null,ignores:[],whitelist:[],inactive:3e3,lang:wp(),controls:!0,marginControls:!1,fullscreenTarget:null,screenShot:!1,rotate:!1,pip:!1,download:!1,mini:!1,cssFullscreen:!0,keyShortcut:!0,presets:[],plugins:[],playbackRate:1,definition:{list:[]},playsinline:!0,customDuration:0,timeOffset:0,icons:{},i18n:[],tabindex:0,thumbnail:null,videoConfig:{},isHideTips:!1,minWaitDelay:200,commonStyle:{progressColor:"",playedColor:"",cachedColor:"",sliderBtnStyle:{},volumeColor:""}}}function di(t){return Gv(t)||Kv(t)||zv(t)||Uv()}function Uv(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zv(t,e){if(t){if(typeof t=="string")return Ni(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Ni(t,e)}}function Kv(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Gv(t){if(Array.isArray(t))return Ni(t)}function Ni(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var Wv=function(e,i){var r,n,o;i.preset&&i.options?o=new i.preset(i.options,e.config):o=new i({},e.config);var a=o,s=a.plugins,u=s===void 0?[]:s,l=a.ignores,c=l===void 0?[]:l,f=a.icons,d=f===void 0?{}:f,p=a.i18n,y=p===void 0?[]:p;e.config.plugins||(e.config.plugins=[]),e.config.ignores||(e.config.ignores=[]),(r=e.config.plugins).push.apply(r,di(u)),(n=e.config.ignores).push.apply(n,di(c)),Object.keys(d).map(function(g){e.config.icons[g]||(e.config.icons[g]=d[g])});var b=e.config.i18n||[];y.push.apply(y,di(b)),e.config.i18n=y};function xt(t){"@babel/helpers - typeof";return xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},xt(t)}function Yv(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Pa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,yu(r.key),r)}}function Xv(t,e,i){return e&&Pa(t.prototype,e),i&&Pa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function or(){return typeof Reflect<"u"&&Reflect.get?or=Reflect.get.bind():or=function(e,i,r){var n=qv(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},or.apply(this,arguments)}function qv(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=Lt(t),t!==null););return t}function Jv(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Mi(t,e)}function Mi(t,e){return Mi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Mi(t,e)}function Qv(t){var e=ey();return function(){var r=Lt(t),n;if(e){var o=Lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zv(this,n)}}function Zv(t,e){if(e&&(xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return $n(t)}function $n(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ey(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lt(t){return Lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Lt(t)}function wa(t,e,i){return e=yu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function yu(t){var e=ty(t,"string");return xt(e)==="symbol"?e:String(e)}function ty(t,e){if(xt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(xt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var ny=function(t){Jv(i,t);var e=Qv(i);function i(){var r;Yv(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),wa($n(r),"onMouseEnter",function(s){var u=$n(r),l=u.player,c=u.playerConfig;c.closeControlsBlur&&l.focus({autoHide:!1})}),wa($n(r),"onMouseLeave",function(){var s=$n(r),u=s.player;u.focus()}),r}return Xv(i,[{key:"beforeCreate",value:function(n){typeof n.player.config.controls=="boolean"&&(n.config.disable=!n.player.config.controls),!n.config.mode&&D.device==="mobile"&&(n.config.mode="flex"),n.player.config.marginControls&&(n.config.autoHide=!1)}},{key:"afterCreate",value:function(){var n=this,o=this.config,a=o.disable,s=o.height,u=o.mode,l=o.autoHide;if(!a){u==="flex"&&this.player.addClass(k.FLEX_CONTROLS),l&&this.player.addClass(k.AUTOHIDE);var c={height:"".concat(s,"px")};Object.keys(c).map(function(d){n.root.style[d]=c[d]}),this.left=this.find("xg-left-grid"),this.center=this.find("xg-center-grid"),this.right=this.find("xg-right-grid"),this.innerRoot=this.find("xg-inner-controls"),this.on(hr,function(d){d?h.addClass(n.root,"mini-controls"):h.removeClass(n.root,"mini-controls")});var f=this.playerConfig.isMobileSimulateMode;D.device!=="mobile"&&f!=="mobile"&&(this.bind("mouseenter",this.onMouseEnter),this.bind("mouseleave",this.onMouseLeave))}}},{key:"focus",value:function(){this.player.focus({autoHide:!1})}},{key:"unFocus",value:function(){this.player.focus({autoHide:!0})}},{key:"blur",value:function(){this.player.blur({ignorePaused:!0})}},{key:"recoverAutoHide",value:function(){this.config.autoHide&&h.addClass(this.root,"control_autohide")}},{key:"pauseAutoHide",value:function(){h.removeClass(this.root,"control_autohide")}},{key:"show",value:function(){this.root.style.display="",this.player.focus()}},{key:"hide",value:function(){this.root.style.display="none"}},{key:"mode",get:function(){return this.config.mode}},{key:"registerPlugin",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=arguments.length>2?arguments[2]:void 0;if(this.root){var s=n.defaultConfig||{};if(!o.root){var u=o.position?o.position:o.config&&o.config.position?o.config.position:s.position;switch(u){case W.CONTROLS_LEFT:o.root=this.left;break;case W.CONTROLS_RIGHT:o.root=this.right;break;case W.CONTROLS_CENTER:o.root=this.center;break;case W.CONTROLS:o.root=this.root;break;default:o.root=this.left}return or(Lt(i.prototype),"registerPlugin",this).call(this,n,o,a)}}}},{key:"destroy",value:function(){D.device!=="mobile"&&(this.unbind("mouseenter",this.onMouseEnter),this.unbind("mouseleave",this.onMouseLeave))}},{key:"render",value:function(){var n=this.config,o=n.mode,a=n.autoHide,s=n.initShow,u=n.disable;if(!u){var l=h.classNames({"xgplayer-controls":!0},{"flex-controls":o==="flex"},{"bottom-controls":o==="bottom"},{control_autohide:a},{controls_permanent:!a},{"xgplayer-controls-initshow":s||!a});return'<xg-controls class="'.concat(l,`" unselectable="on">
    <xg-inner-controls class="xg-inner-controls xg-pos">
      <xg-left-grid class="xg-left-grid">
      </xg-left-grid>
      <xg-center-grid class="xg-center-grid"></xg-center-grid>
      <xg-right-grid class="xg-right-grid">
      </xg-right-grid>
    </xg-inner-controls>
    </xg-controls>`)}}}],[{key:"pluginName",get:function(){return"controls"}},{key:"defaultConfig",get:function(){return{disable:!1,autoHide:!0,mode:"",initShow:!1}}}]),i}(F);const ry={LANG:"en",TEXT:{ERROR_TYPES:{network:{code:1,msg:"video download error"},mse:{code:2,msg:"stream append error"},parse:{code:3,msg:"parsing error"},format:{code:4,msg:"wrong format"},decoder:{code:5,msg:"decoding error"},runtime:{code:6,msg:"grammatical errors"},timeout:{code:7,msg:"play timeout"},other:{code:8,msg:"other errors"}},HAVE_NOTHING:"There is no information on whether audio/video is ready",HAVE_METADATA:"Audio/video metadata is ready ",HAVE_CURRENT_DATA:"Data about the current play location is available, but there is not enough data to play the next frame/millisecond",HAVE_FUTURE_DATA:"Current and at least one frame of data is available",HAVE_ENOUGH_DATA:"The available data is sufficient to start playing",NETWORK_EMPTY:"Audio/video has not been initialized",NETWORK_IDLE:"Audio/video is active and has been selected for resources, but no network is used",NETWORK_LOADING:"The browser is downloading the data",NETWORK_NO_SOURCE:"No audio/video source was found",MEDIA_ERR_ABORTED:"The fetch process is aborted by the user",MEDIA_ERR_NETWORK:"An error occurred while downloading",MEDIA_ERR_DECODE:"An error occurred while decoding",MEDIA_ERR_SRC_NOT_SUPPORTED:"Audio/video is not supported",REPLAY:"Replay",ERROR:"Network is offline",PLAY_TIPS:"Play",PAUSE_TIPS:"Pause",PLAYNEXT_TIPS:"Play next",DOWNLOAD_TIPS:"Download",ROTATE_TIPS:"Rotate",RELOAD_TIPS:"Reload",FULLSCREEN_TIPS:"Fullscreen",EXITFULLSCREEN_TIPS:"Exit fullscreen",CSSFULLSCREEN_TIPS:"Cssfullscreen",EXITCSSFULLSCREEN_TIPS:"Exit cssfullscreen",TEXTTRACK:"Caption",PIP:"PIP",SCREENSHOT:"Screenshot",LIVE:"LIVE",OFF:"Off",OPEN:"Open",MINI_DRAG:"Click and hold to drag",MINISCREEN:"Miniscreen",REFRESH_TIPS:"Please Try",REFRESH:"Refresh",FORWARD:"forward",LIVE_TIP:"Live"}};function gu(t){return sy(t)||ay(t)||oy(t)||iy()}function iy(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oy(t,e){if(t){if(typeof t=="string")return ji(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return ji(t,e)}}function ay(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function sy(t){if(Array.isArray(t))return ji(t)}function ji(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}var oe={lang:{},langKeys:[],textKeys:[]};function Kn(t,e){return Object.keys(e).forEach(function(i){var r=h.typeOf(e[i]),n=h.typeOf(t[i]);if(r==="Array"){var o;n!=="Array"&&(t[i]=[]),(o=t[i]).push.apply(o,gu(e[i]))}else r==="Object"?(n!=="Object"&&(t[i]={}),Kn(t[i],e[i])):t[i]=e[i]}),t}function mu(){Object.keys(oe.lang.en).map(function(t){oe.textKeys[t]=t})}function uy(t,e){var i=[];if(e||(e=oe),!!e.lang){h.typeOf(t)!=="Array"?i=Object.keys(t).map(function(o){var a=o==="zh"?"zh-cn":o;return{LANG:a,TEXT:t[o]}}):i=t;var r=e,n=r.lang;i.map(function(o){o.LANG==="zh"&&(o.LANG="zh-cn"),n[o.LANG]?Kn(n[o.LANG]||{},o.TEXT||{}):ra(o,e)}),mu()}}function ra(t,e){var i=t.LANG;if(e||(e=oe),!!e.lang){var r=t.TEXT||{};i==="zh"&&(i="zh-cn"),e.lang[i]?Kn(e.lang[i],r):(e.langKeys.push(i),e.lang[i]=r),mu()}}function ly(t){var e,i={lang:{},langKeys:[],textKeys:{},pId:t};return Kn(i.lang,oe.lang),(e=i.langKeys).push.apply(e,gu(oe.langKeys)),Kn(i.textKeys,oe.textKeys),i}ra(ry);var Ot={get textKeys(){return oe.textKeys},get langKeys(){return oe.langKeys},get lang(){var t={};return oe.langKeys.map(function(e){t[e]=oe.lang[e]}),oe.lang["zh-cn"]&&(t.zh=oe.lang["zh-cn"]||{}),t},extend:uy,use:ra,init:ly};function At(t){"@babel/helpers - typeof";return At=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},At(t)}function cy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Sa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,hy(r.key),r)}}function fy(t,e,i){return e&&Sa(t.prototype,e),i&&Sa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function hy(t){var e=dy(t,"string");return At(e)==="symbol"?e:String(e)}function dy(t,e){if(At(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(At(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function py(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Bi(t,e)}function Bi(t,e){return Bi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Bi(t,e)}function vy(t){var e=my();return function(){var r=mr(t),n;if(e){var o=mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return yy(this,n)}}function yy(t,e){if(e&&(At(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gy(t)}function gy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function my(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function mr(t){return mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},mr(t)}var ne={},pi=null,bu=function(t){py(i,t);var e=vy(i);function i(){return cy(this,i),e.apply(this,arguments)}return fy(i,[{key:"add",value:function(n){n&&(ne[n.playerId]=n,Object.keys(ne).length===1&&this.setActive(n.playerId,!0))}},{key:"remove",value:function(n){n&&(n.isUserActive,delete ne[n.playerId])}},{key:"_iterate",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;for(var a in ne)if(Object.prototype.hasOwnProperty.call(ne,a)){var s=ne[a];if(o){if(n(s))break}else n(s)}}},{key:"forEach",value:function(n){this._iterate(n)}},{key:"find",value:function(n){var o=null;return this._iterate(function(a){var s=n(a);return s&&(o=a),s},!0),o}},{key:"findAll",value:function(n){var o=[];return this._iterate(function(a){n(a)&&o.push(a)}),o}},{key:"setActive",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ne[n])return o?this.forEach(function(a){n===a.playerId?(a.isUserActive=!0,a.isInstNext=!1):a.isUserActive=!1}):ne[n].isUserActive=o,n}},{key:"getActiveId",value:function(){for(var n=Object.keys(ne),o=0;o<n.length;o++){var a=ne[n[o]];if(a&&a.isUserActive)return n[o]}return null}},{key:"setNext",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(ne[n])return o?this.forEach(function(a){n===a.playerId?(a.isUserActive=!1,a.isInstNext=!0):a.isInstNext=!1}):ne[n].isInstNext=o,n}}],[{key:"getInstance",value:function(){return pi||(pi=new i),pi}}]),i}(Ws.EventEmitter);function by(t){for(var e=Object.keys(ne),i=0;i<e.length;i++){var r=ne[e[i]];if(r.root===t)return r}return null}function Dt(t){"@babel/helpers - typeof";return Dt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Dt(t)}function ka(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function vi(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?ka(Object(i),!0).forEach(function(r){Qe(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):ka(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function _y(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Oa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Pu(r.key),r)}}function Py(t,e,i){return e&&Oa(t.prototype,e),i&&Oa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function we(){return typeof Reflect<"u"&&Reflect.get?we=Reflect.get.bind():we=function(e,i,r){var n=wy(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},we.apply(this,arguments)}function wy(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=fe(t),t!==null););return t}function Sy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Fi(t,e)}function Fi(t,e){return Fi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Fi(t,e)}function ky(t){var e=Oy();return function(){var r=fe(t),n;if(e){var o=fe(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _u(this,n)}}function _u(t,e){if(e&&(Dt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return le(t)}function le(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Oy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function fe(t){return fe=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},fe(t)}function Qe(t,e,i){return e=Pu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Pu(t){var e=Ty(t,"string");return Dt(e)==="symbol"?e:String(e)}function Ty(t,e){if(Dt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Dt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ey=["play","pause","replay","retry","playnext"],Ta=0,Ea=0,De=null,oi=function(t){Sy(i,t);var e=ky(i);function i(r){var n;_y(this,i);var o=h.deepMerge(_a(),r);n=e.call(this,o),Qe(le(n),"canPlayFunc",function(){if(n.config){var l=n.config,c=l.autoplay,f=l.startTime,d=l.defaultPlaybackRate;A.logInfo("player","canPlayFunc, startTime",f),f&&(n.currentTime=f>n.duration?n.duration:f,n.config.startTime=0),n.playbackRate=d,c&&n.videoPlay(),n.off(Le,n.canPlayFunc),n.removeClass(k.ENTER)}}),Qe(le(n),"onFullscreenChange",function(l,c){var f=function(){h.setTimeout(le(n),function(){n.getVideoSize()},100)},d=h.getFullScreenEl();n._fullActionFrom?n._fullActionFrom="":n.emit(pr,{eventType:"system",action:"switch_fullscreen",pluginName:"player",currentTime:n.currentTime,duration:n.duration,props:[{prop:"fullscreen",from:!0,to:!1}]});var p=Sp(d,n.playerId,Ye);if(c||d&&(d===n._fullscreenEl||p))f(),!n.config.closeFocusVideoFocus&&n.video.focus(),n.fullscreen=!0,n.emit(je,!0,n._fullScreenOffset),n.cssfullscreen&&n.exitCssFullscreen();else if(n.fullscreen){f();var y=le(n),b=y._fullScreenOffset,g=y.config;g.needFullscreenScroll?(window.scrollTo(b.left,b.top),h.setTimeout(le(n),function(){n.fullscreen=!1,n._fullScreenOffset=null},100)):(!n.config.closeFocusVideoFocus&&n.video.focus(),n.fullscreen=!1,n._fullScreenOffset=null),n.cssfullscreen?n.removeClass(k.FULLSCREEN):n.recoverFullStyle(n.root,n._fullscreenEl,k.FULLSCREEN),n._fullscreenEl=null,n.emit(je,!1)}}),Qe(le(n),"_onWebkitbeginfullscreen",function(l){n._fullscreenEl=n.video,n.onFullscreenChange(l,!0)}),Qe(le(n),"_onWebkitendfullscreen",function(l){n.onFullscreenChange(l,!1)}),hu(le(n),Ey),n.config=o,n._pluginInfoId=h.generateSessionId(),sp(le(n));var a=n.constructor.defaultPreset;if(n.config.presets.length){var s=n.config.presets.indexOf("default");s>=0&&a&&(n.config.presets[s]=a)}else a&&n.config.presets.push(a);n.userTimer=null,n.waitTimer=null,n.isReady=!1,n.isPlaying=!1,n.isError=!1,n.isSeeking=!1,n.isCanplay=!1,n._runPending=!1,n.rotateDeg=0,n.isActive=!1,n.isBufferControlPaused=!1,n.isCssfullScreen=!1,n.fullscreen=!1,n._fullscreenEl=null,n._cssfullscreenEl=null,n.curDefinition=null,n._orgCss="",n._fullScreenOffset=null,n._videoHeight=0,n._videoWidth=0,n.videoPos={pi:1,scale:0,rotate:-1,x:0,y:0,h:-1,w:-1,vy:0,vx:0},n.sizeInfo={width:0,height:0,left:0,top:0},n._accPlayed={t:0,acc:0,loopAcc:0},n.innerContainer=null,n.controls=null,n.topBar=null,n.topBar=null,n.root=null,n.__i18n=Ot.init(),D.os.isAndroid&&D.osVersion>0&&D.osVersion<6&&(n.config.autoplay=!1),n.database=new rv,n.isUserActive=!1,n._onceSeekCanplay=null,n._isPauseBeforeSeek=0,n.innerStates={isActiveLocked:!1},n.instManager=De;var u=n._initDOM();return u?(n._bindEvents(),n._registerPresets(),n._registerPlugins(),J.onPluginsReady(le(n)),h.setTimeout(le(n),function(){n.emit(Zo),n.onReady&&n.onReady(),n.isReady=!0},0),n.getInitDefinition(),(n.config.videoInit||n.config.autoplay)&&(n.hasStart||n.start()),n):(console.error(new Error("can't find the dom which id is ".concat(n.config.id," or this.config.el does not exist"))),_u(n))}return Py(i,[{key:"_initDOM",value:function(){var n,o=this;if(this.root=this.config.id?document.getElementById(this.config.id):null,!this.root){var a=this.config.el;if(a&&a.nodeType===1)this.root=a;else return this.emit(ei,new lr("use",this.config.vid,{line:32,handle:"Constructor",msg:"container id can't be empty"})),console.error("this.confg.id or this.config.el can't be empty"),!1}var s=by(this.root);s&&(A.logWarn("The is an Player instance already exists in this.root, destroy it and reinitialize"),s.destroy()),this.root.setAttribute(Ye,this.playerId),(n=De)===null||n===void 0||n.add(this),J.init(this),this._initBaseDoms();var u=this.constructor.XgVideoProxy;if(u&&this.videoConfig.mediaType===u.mediaType){var l=this.innerContainer||this.root;this.detachVideoEvents(this.video);var c=new u(l,this.config,this.videoConfig);this.attachVideoEvents(c),this.video=c}if(this.video.setAttribute(Ye,this.playerId),this.config.controls){var f=J.register(this,ny);this.controls=f}var d=this.config.isMobileSimulateMode==="mobile"?"mobile":D.device;if(this.addClass("".concat(k.DEFAULT," ").concat(k.ACTIVE," xgplayer-").concat(d," ").concat(this.config.controls?"":k.NO_CONTROLS)),this.config.autoplay?this.addClass(k.ENTER):this.addClass(k.NO_START),this.config.fluid){var p={"max-width":"100%",width:"100%",height:"0","padding-top":"".concat(this.config.height*100/this.config.width,"%"),position:"position",top:"0",left:"0"};Object.keys(p).map(function(O){o.root.style[O]=p[O]})}else["width","height"].map(function(O){o.config[O]&&(typeof o.config[O]!="number"?o.root.style[O]=o.config[O]:o.root.style[O]="".concat(o.config[O],"px"))});var y=this.root.getBoundingClientRect(),b=y.width,g=y.height,T=y.left,E=y.top;return this.sizeInfo.width=b,this.sizeInfo.height=g,this.sizeInfo.left=T,this.sizeInfo.top=E,!0}},{key:"_initBaseDoms",value:function(){this.topBar=h.createDom("xg-bar","",{"data-index":-1},"xg-top-bar"),this.leftBar=h.createDom("xg-bar","",{"data-index":-1},"xg-left-bar"),this.rightBar=h.createDom("xg-bar","",{"data-index":-1},"xg-right-bar"),this.config.marginControls&&(this.innerContainer=h.createDom("xg-video-container","",{"data-index":-1},"xg-video-container"),this.root.appendChild(this.innerContainer)),this.root.appendChild(this.topBar),this.root.appendChild(this.leftBar),this.root.appendChild(this.rightBar)}},{key:"_bindEvents",value:function(){var n=this;["focus","blur"].forEach(function(o){n.on(o,n["on"+o.charAt(0).toUpperCase()+o.slice(1)])}),ua.forEach(function(o){document&&document.addEventListener(o,n.onFullscreenChange)}),D.os.isIos&&(this.video.addEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.video.addEventListener("webkitendfullscreen",this._onWebkitendfullscreen)),this.once("loadeddata",this.getVideoSize),this.playFunc=function(){n.config.closeFocusVideoFocus||n.video.focus()},this.once("play",this.playFunc),this.on(Tt,this.onBufferControl)}},{key:"_unbindEvents",value:function(){var n=this;this.root.removeEventListener("mousemove",this.mousemoveFunc),ua.forEach(function(o){document.removeEventListener(o,n.onFullscreenChange)}),this.playFunc&&this.off("play",this.playFunc),this.off("canplay",this.canPlayFunc),this.video.removeEventListener("webkitbeginfullscreen",this._onWebkitbeginfullscreen),this.video.removeEventListener("webkitendfullscreen",this._onWebkitendfullscreen)}},{key:"_startInit",value:function(n){var o=this;if(this.video&&!((!n||n===""||h.typeOf(n)==="Array"&&n.length===0)&&(n="",this.emit(eu),A.logWarn("config.url is null, please get url and run player._startInit(url)"),this.config.nullUrlStart))){this._detachSourceEvents(this.video),h.typeOf(n)==="Array"&&n.length>0?this._attachSourceEvents(this.video,n):!this.video.src||this.video.src!==n?this.video.src=n:n||this.video.removeAttribute("src"),h.typeOf(this.config.volume)==="Number"&&(this.volume=this.config.volume);var a=this.innerContainer?this.innerContainer:this.root;this.video instanceof window.Element&&!a.contains(this.video)&&a.insertBefore(this.video,a.firstChild);var s=this.video.readyState;A.logInfo("_startInit readyState",s),this.config.autoplay&&(!h.isMSE(this.video)&&this.load(),(D.os.isIpad||D.os.isPhone)&&this.videoPlay()),s>=2?this.canPlayFunc():this.once(Le,this.canPlayFunc),h.setTimeout(this,function(){o.emit(ni)},1),this.hasStart||J.afterInit(this),this.hasStart=!0}}},{key:"_registerPlugins",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this._loadingPlugins=[];var a=this.config.ignores||[],s=this.config.plugins||[],u=this.config.i18n||[];o&&Ot.extend(u,this.__i18n);var l=a.join("||").toLowerCase().split("||"),c=this.plugins;s.forEach(function(f){try{var d=f.plugin?f.plugin.pluginName:f.pluginName;if(!d)return;var p=d.toLowerCase(),y=n.config[p]||n.config[d];if(h.typeOf(y)==="Boolean"&&!y||l.indexOf(p)>-1||!o&&c[p])return;if(f.lazy&&f.loader){var b=J.lazyRegister(n,f);f.forceBeforeInit&&(b.then(function(){n._loadingPlugins.splice(n._loadingPlugins.indexOf(b),1)}).catch(function(g){A.logError("_registerPlugins:loadingPlugin",g),n._loadingPlugins.splice(n._loadingPlugins.indexOf(b),1)}),n._loadingPlugins.push(b));return}return n.registerPlugin(f)}catch(g){A.logError("_registerPlugins:",g)}})}},{key:"_registerPresets",value:function(){var n=this;this.config.presets.forEach(function(o){Wv(n,o)})}},{key:"_getRootByPosition",value:function(n){var o=null;switch(n){case W.ROOT_RIGHT:o=this.rightBar;break;case W.ROOT_LEFT:o=this.leftBar;break;case W.ROOT_TOP:o=this.topBar;break;default:o=this.innerContainer||this.root;break}return o}},{key:"registerPlugin",value:function(n,o){var a=J.formatPluginInfo(n,o),s=a.PLUFGIN,u=a.options,l=this.config.plugins,c=J.checkPluginIfExits(s.pluginName,l);!c&&l.push(s);var f=J.getRootByConfig(s.pluginName,this.config);f.root&&(u.root=f.root),f.position&&(u.position=f.position);var d=u.position?u.position:u.config&&u.config.position||s.defaultConfig&&s.defaultConfig.position;return!u.root&&typeof d=="string"&&d.indexOf("controls")>-1?this.controls&&this.controls.registerPlugin(s,u,s.pluginName):(u.root||(u.root=this._getRootByPosition(d)),J.register(this,s,u))}},{key:"deregister",value:function(n){typeof n=="string"?J.unRegister(this,n):n instanceof rt&&J.unRegister(this,n.pluginName)}},{key:"unRegisterPlugin",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;this.deregister(n),o&&this.removePluginFromConfig(n)}},{key:"removePluginFromConfig",value:function(n){var o;if(typeof n=="string"?o=n:n instanceof rt&&(o=n.pluginName),!!o)for(var a=this.config.plugins.length-1;a>-1;a--){var s=this.config.plugins[a];if(s.pluginName.toLowerCase()===o.toLowerCase()){this.config.plugins.splice(a,1);break}}}},{key:"plugins",get:function(){return J.getPlugins(this)}},{key:"getPlugin",value:function(n){var o=J.findPlugin(this,n);return o&&o.pluginName?o:null}},{key:"addClass",value:function(n){this.root&&(h.hasClass(this.root,n)||h.addClass(this.root,n))}},{key:"removeClass",value:function(n){this.root&&h.removeClass(this.root,n)}},{key:"hasClass",value:function(n){if(this.root)return h.hasClass(this.root,n)}},{key:"setAttribute",value:function(n,o){this.root&&this.root.setAttribute(n,o)}},{key:"removeAttribute",value:function(n,o){this.root&&this.root.removeAttribute(n,o)}},{key:"start",value:function(n){var o=this;if(!this.hasStart)return!n&&!this.config.url&&this.getInitDefinition(),this.hasStart=!0,this._registerPlugins(!1),J.beforeInit(this).then(function(){if(o.config){n||(n=o.url||o.config.url);var a=o.preProcessUrl(n),s=o._startInit(a.url);return s}}).catch(function(a){throw a.fileName="player",a.lineNumber="236",A.logError("start:beforeInit:",a),a})}},{key:"switchURL",value:function(n){var o=this,a=n;h.typeOf(n)==="Object"&&(a=n.url);var s=this.currentTime,u=this.paused&&!this.isError;return this.src=a,new Promise(function(l){var c=function(){o.currentTime=s,u&&o.once("canplay",function(){o.pause()}),l()};D.os.isAndroid?o.once("timeupdate",function(){c()}):o.once("canplay",function(){c()}),o.play()})}},{key:"videoPlay",value:function(){var n=this;if(!this.hasStart){this.removeClass(k.NO_START),this.addClass(k.ENTER);var o=this.start();o&&o.then(function(s){!n.config.autoplay&&n.videoPlay()});return}this.isPlaying||(this.removeClass(k.NO_START),!this.isCanplay&&this.addClass(k.ENTER));var a=we(fe(i.prototype),"play",this).call(this);return a!==void 0&&a&&a.then?a.then(function(){n.removeClass(k.NOT_ALLOW_AUTOPLAY),n.addClass(k.PLAYING),n.isPlaying||(A.logInfo(">>>>playPromise.then"),n.isPlaying=!0,n.emit(et))}).catch(function(s){if(A.logWarn(">>>>playPromise.catch",s.name),n.video&&n.video.error){n.onError(),n.removeClass(k.ENTER);return}s.name==="NotAllowedError"&&(n._errorTimer=h.setTimeout(n,function(){n._errorTimer=null,n.emit(ea),n.addClass(k.NOT_ALLOW_AUTOPLAY),n.removeClass(k.ENTER),n.pause()},0))}):(A.logWarn("video.play not return promise"),this.isPlaying||(this.isPlaying=!0,this.removeClass(k.NOT_ALLOW_AUTOPLAY),this.removeClass(k.NO_START),this.removeClass(k.ENTER),this.addClass(k.PLAYING),this.emit(et))),a}},{key:"videoPause",value:function(){we(fe(i.prototype),"pause",this).call(this)}},{key:"play",value:function(){var n=this;this.removeClass(k.PAUSED),Re(this,"play",function(){n.videoPlay()})}},{key:"pause",value:function(n){var o=this;Re(this,"pause",function(){n===fu.BUFFER_CONTROLS?o.isBufferControlPaused||(o.isBufferControlPaused=!0,o.emit(Tt,{type:Li.WAITING})):o.isBufferControlPaused&&(o.isBufferControlPaused=!1,o.emit(Tt,{type:Li.PLAYING})),we(fe(i.prototype),"pause",o).call(o)},n)}},{key:"seek",value:function(n,o){var a=this;if(!(!this.video||Number.isNaN(Number(n))||!this.hasStart)){var s=this.config,u=s.isSeekedPlay,l=s.seekedStatus,c=o||(u?"play":l);n=n<0?0:n>this.duration?parseInt(this.duration,10):n,!this._isPauseBeforeSeek&&(this._isPauseBeforeSeek=this.paused?2:1),this._onceSeekCanplay&&this.off(xe,this._onceSeekCanplay),this._onceSeekCanplay=function(){switch(a.removeClass(k.ENTER),a.isSeeking=!1,c){case"play":a.play();break;case"pause":a.pause();break;default:a._isPauseBeforeSeek>1||a.paused?a.pause():a.play()}a._isPauseBeforeSeek=0,a._onceSeekCanplay=null},this.once(xe,this._onceSeekCanplay),this.isPlaying?this.currentTime=n:(this.removeClass(k.NO_START),this.currentTime=n,this.play())}}},{key:"getInitDefinition",value:function(){var n=this,o=this.config,a=o.definition,s=o.url;!s&&a&&a.list&&a.list.length>0&&a.defaultDefinition&&a.list.map(function(u){u.definition===a.defaultDefinition&&(n.config.url=u.url,n.curDefinition=u.definition)})}},{key:"changeDefinition",value:function(n,o){var a=this,s=this.config.definition;if(Array.isArray(s==null?void 0:s.list)&&s.list.forEach(function(l){(n==null?void 0:n.definition)===l.definition&&(a.curDefinition=l)}),n!=null&&n.bitrate&&typeof n.bitrate!="number"&&(n.bitrate=parseInt(n.bitrate,10)||0),this.emit(na,{from:o,to:n}),!this.hasStart){this.config.url=n.url;return}var u=this.switchURL(n.url);u&&u.then?u.then(function(){a.emit(Ri,{from:o,to:n})}):this.emit(Ri,{from:o,to:n})}},{key:"reload",value:function(){this.load(),this.reloadFunc=function(){this.play()},this.once("loadeddata",this.reloadFunc)}},{key:"resetState",value:function(){var n=this,o=k.NOT_ALLOW_AUTOPLAY,a=k.PLAYING,s=k.NO_START,u=k.PAUSED,l=k.REPLAY,c=k.ENTER,f=k.ENDED,d=k.ERROR,p=k.LOADING,y=[o,a,s,u,l,c,f,d,p];this.hasStart=!1,this.isError=!1,this.isPlaying=!1,this.videoPause(),this._accPlayed.acc=0,this._accPlayed.t=0,this._accPlayed.loopAcc=0,y.forEach(function(b){n.removeClass(b)}),this.addClass(k.ENTER),this.emit(ii)}},{key:"reset",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1?arguments[1]:void 0;this.resetState();var s=this.plugins;if(s&&(o.map(function(l){n.deregister(l)}),a)){var u=_a();Object.keys(this.config).keys(function(l){n.config[l]!=="undefined"&&(l==="plugins"||l==="presets"||l==="el"||l==="id")&&(n.config[l]=u[l])})}}},{key:"destroy",value:function(){var n,o=this,a=this.innerContainer,s=this.root,u=this.video;if(!(!s||!u)){if(s.removeAttribute(Ye),this.updateAcc("destroy"),this._unbindEvents(),this._detachSourceEvents(this.video),h.clearAllTimers(this),this.emit(ta),(n=De)===null||n===void 0||n.remove(this),J.destroy(this),du(this),we(fe(i.prototype),"destroy",this).call(this),this.fullscreen&&this._fullscreenEl===this.root)try{this.exitFullscreen()}catch{}if(a)for(var l=a.children,c=0;c<l.length;c++)a.removeChild(l[c]);!a&&u instanceof window.Node&&s.contains(u)&&s.removeChild(u),["topBar","leftBar","rightBar","innerContainer"].map(function(d){o[d]&&s.removeChild(o[d]),o[d]=null});var f=s.className.split(" ");f.length>0?s.className=f.filter(function(d){return d.indexOf("xgplayer")<0}).join(" "):s.className="",this.removeAttribute("data-xgfill"),["isReady","isPlaying","isSeeking","isCanplay","isActive","isCssfullScreen","fullscreen"].map(function(d){o[d]=!1})}}},{key:"replay",value:function(){var n=this;this.removeClass(k.ENDED),this.currentTime=0,this.isSeeking=!1,Re(this,"replay",function(){n.once(xe,function(){var o=n.videoPlay();o&&o.catch&&o.catch(function(a){console.log(a)})}),n.play(),n.emit(cr),n.onPlay()})}},{key:"retry",value:function(){var n=this;this.removeClass(k.ERROR),this.addClass(k.LOADING),Re(this,"retry",function(){var o=n.currentTime;n.src=n.config.url,!n.config.isLive&&(n.currentTime=o),n.once(Le,function(){n.videoPlay()})})}},{key:"changeFullStyle",value:function(n,o,a,s){n&&(s||(s=k.PARENT_FULLSCREEN),this._orgCss||(this._orgCss=h.filterStyleFromText(n)),h.addClass(n,a),o&&o!==n&&!this._orgPCss&&(this._orgPCss=h.filterStyleFromText(o),h.addClass(o,s),o.setAttribute(Ye,this.playerId)))}},{key:"recoverFullStyle",value:function(n,o,a,s){s||(s=k.PARENT_FULLSCREEN),this._orgCss&&(h.setStyleFromCsstext(n,this._orgCss),this._orgCss=""),h.removeClass(n,a),o&&o!==n&&this._orgPCss&&(h.setStyleFromCsstext(o,this._orgPCss),this._orgPCss="",h.removeClass(o,s),o.removeAttribute(Ye))}},{key:"getFullscreen",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget,o=this.root,a=this.video;n||(n=o),this._fullScreenOffset={top:h.scrollTop(),left:h.scrollLeft()},this._fullscreenEl=n,this._fullActionFrom="get";var s=h.getFullScreenEl();if(s===this._fullscreenEl)return this.onFullscreenChange(),Promise.resolve();try{this.changeFullStyle(this.root,n,k.FULLSCREEN);for(var u=0;u<la.length;u++){var l=la[u];if(n[l]){var c=l==="webkitRequestFullscreen"?n.webkitRequestFullscreen(window.Element.ALLOW_KEYBOARD_INPUT):n[l]();return c&&c.then?c:Promise.resolve()}}return a.fullscreenEnabled||a.webkitSupportsFullscreen?(a.webkitEnterFullscreen(),Promise.resolve()):(this.recoverFullStyle(this.root,this._fullscreenEl,k.FULLSCREEN),Promise.reject(new Error("call getFullscreen fail")))}catch(f){return this.recoverFullStyle(this.root,this._fullscreenEl,k.FULLSCREEN),Promise.reject(f)}}},{key:"exitFullscreen",value:function(n){if(!(!this._fullscreenEl&&!h.getFullScreenEl())){this.root;var o=this.video;this._fullActionFrom="exit";for(var a=0;a<ca.length;a++){var s=ca[a];if(document[s]){var u=document[s]();return u&&u.then?u:Promise.resolve()}}return o&&o.webkitSupportsFullscreen?(o.webkitExitFullScreen(),Promise.resolve()):Promise.reject(new Error("call exitFullscreen fail"))}}},{key:"getCssFullscreen",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.config.fullscreenTarget;this.fullscreen&&this.exitFullscreen(),this._cssfullscreenEl=n,this.changeFullStyle(this.root,n,n?k.INNER_FULLSCREEN:k.CSS_FULLSCREEN),this.isCssfullScreen=!0,this.emit(fr,!0)}},{key:"exitCssFullscreen",value:function(){var n=this._cssfullscreenEl?k.INNER_FULLSCREEN:k.CSS_FULLSCREEN;this.fullscreen?this.removeClass(n):this.recoverFullStyle(this.root,this._cssfullscreenEl,n),this._cssfullscreenEl=null,this.isCssfullScreen=!1,this.emit(fr,!1)}},{key:"focus",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!this.config.closeDelayBlur,delay:this.config.inactive};if(this.isActive){this.onFocus(n);return}this.emit(Qo,vi({paused:this.paused,ended:this.ended},n))}},{key:"blur",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!this.isActive){this.onBlur(n);return}this.emit(Zs,vi({paused:this.paused,ended:this.ended},n))}},{key:"onFocus",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{autoHide:!0,delay:3e3},a=this.innerStates;if(this.isActive=!0,this.removeClass(k.ACTIVE),this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),o.isLock!==void 0&&(a.isActiveLocked=o.isLock),o.autoHide===!1||o.isLock===!0||a.isActiveLocked){this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null);return}var s=o&&o.delay?o.delay:this.config.inactive;this.userTimer=h.setTimeout(this,function(){n.userTimer=null,n.blur()},s)}},{key:"onBlur",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{ignorePaused:!1};if(!(!this.isActive||this.innerStates.isActiveLocked)){var o=this.config.closePauseVideoFocus;this.isActive=!1,(n.ignorePaused||o||!this.paused&&!this.ended)&&this.addClass(k.ACTIVE)}}},{key:"onEmptied",value:function(){this.updateAcc("emptied")}},{key:"onCanplay",value:function(){this.hasStart&&this.removeClass(k.ENTER),!this.isBufferControlPaused&&this.removeClass(k.LOADING),this.isCanplay=!0,this.waitTimer&&h.clearTimeout(this,this.waitTimer)}},{key:"onLoadeddata",value:function(){this.isError=!1}},{key:"onPlay",value:function(){this.removeClass(k.PAUSED),this.ended&&this.removeClass(k.ENDED),!this.config.closePlayVideoFocus&&this.focus()}},{key:"onPause",value:function(){!this.isBufferControlPaused&&this.addClass(k.PAUSED),this.updateAcc("pause"),this.config.closePauseVideoFocus||(this.userTimer&&(h.clearTimeout(this,this.userTimer),this.userTimer=null),this.focus())}},{key:"onEnded",value:function(){this.isBufferControlPaused=!1,this.updateAcc("ended"),this.addClass(k.ENDED)}},{key:"onError",value:function(){this.isBufferControlPaused=!1,this.isError=!0,this.updateAcc("error"),this.removeClass(k.NOT_ALLOW_AUTOPLAY),this.removeClass(k.NO_START),this.removeClass(k.ENTER),this.removeClass(k.LOADING),this.addClass(k.ERROR)}},{key:"onSeeking",value:function(){this.isSeeking||this.updateAcc("seeking"),this.isSeeking=!0,this.addClass(k.SEEKING)}},{key:"onSeeked",value:function(){this.isSeeking=!1,this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.removeClass(k.LOADING),this.removeClass(k.SEEKING)}},{key:"onWaiting",value:function(){var n=this;this.waitTimer&&h.clearTimeout(this,this.waitTimer),this.updateAcc("waiting"),this.waitTimer=h.setTimeout(this,function(){n.addClass(k.LOADING),h.clearTimeout(n,n.waitTimer),n.waitTimer=null},200)}},{key:"onPlaying",value:function(){var n=this;this.isError=!1;var o=k.NO_START,a=k.PAUSED,s=k.ENDED,u=k.ERROR,l=k.REPLAY,c=k.LOADING,f=[o,a,s,u,l,c];f.forEach(function(d){n.removeClass(d)})}},{key:"onTimeupdate",value:function(){!this._videoHeight&&this.getVideoSize(),(this.waitTimer||this.hasClass(k.LOADING))&&this.video.readyState>2&&(!this.isBufferControlPaused&&this.removeClass(k.LOADING),h.clearTimeout(this,this.waitTimer),this.waitTimer=null),!this.paused&&!this.isPlaying&&this.duration&&(this.isPlaying=!0,this.emit(et)),!this._accPlayed.t&&!this.paused&&!this.ended&&(this._accPlayed.t=new Date().getTime())}},{key:"onVolumechange",value:function(){h.typeOf(this.config.volume)==="Number"&&(this.config.volume=this.volume)}},{key:"onRatechange",value:function(){this.config.defaultPlaybackRate=this.playbackRate}},{key:"onBufferControl",value:function(n){this.isPlaying&&(n.type==="waiting"?(this.isBufferControlPaused=!0,this.addClass(k.LOADING),this.removeClass(k.PAUSED)):n.type==="playing"&&(this.isBufferControlPaused=!1,this.removeClass(k.LOADING),this.paused&&this.addClass(k.PAUSED)))}},{key:"emitUserAction",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};if(!(!this.video||!o||!n)){var s=h.typeOf(n)==="String"?n:n.type||"";o==="switch_play_pause"&&(h.typeOf(a.paused)==="Undefined"&&(a.paused=this.paused),a.isFirstStart=!this.playing),this.emit(pr,vi({eventType:s,action:o,currentTime:this.currentTime,duration:this.duration,ended:this.ended,event:n},a))}}},{key:"updateAcc",value:function(n){if(this._accPlayed.t){var o=new Date().getTime()-this._accPlayed.t;this._accPlayed.acc+=o,this._accPlayed.t=0,(n==="ended"||this.ended)&&(this._accPlayed.loopAcc=this._accPlayed.acc)}}},{key:"checkBuffer",value:function(n){var o=this.video.buffered;if(!o||o.length===0||!this.duration)return!0;for(var a=parseInt((n||this.video.currentTime||0)*1e3,10),s=o.length,u=0;u<s;u++)if(parseInt(o.start(u)*1e3,10)+200<=a&&parseInt(o.end(u)*1e3,10)-200>a)return!0;return!1}},{key:"resizePosition",value:function(){var n=this.videoPos,o=n.rotate,a=n.vy,s=n.vx,u=n.h,l=n.w;if(!(o<0&&u<0&&l<0)){var c=this.videoPos._pi;if(!c&&this.video.videoHeight&&(c=this.video.videoWidth/this.video.videoHeight*100),!!c){this.videoPos.pi=c;var f={},d=0,p=0,y=1,b=o<0?0:Math.abs(o/90),g=this.root,T=this.innerContainer,E=g.offsetWidth,O=T?T.offsetHeight:g.offsetHeight,z=O,H=E,q={width:E,height:O};if(b%2===0)y=u>0?100/u:l>0?100/l:1,f.scale=y,d=a>0?(100-u)/2-a:0,f.y=b===2?0-d:d,p=s>0?(100-l)/2-s:0,f.x=b===2?0-p:p,q.width=H,q.height=z;else if(b%2===1){H=O,z=E;var V=O-E;p=-V/2/H*100,f.x=b===3?p+a/2:p-a/2,d=V/2/z*100,f.y=b===3?d+s/2:d-s/2,f.scale=y,q.width=H,q.height=z}var ue=this.video;o>=0&&["width","height"].forEach(function(B){ue.style[B]="".concat(q[B],"px")}),f.rotate=o<0?0:o;var re=h.getTransformStyle(f,this.video.style.transform||this.video.style.webkitTransform);ue.style.transform=re,ue.style.webkitTransform=re}}}},{key:"position",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{h:0,y:0,x:0,w:0};if(!(!this.video||!n||!n.h)){var o=this.videoPos;o.h=n.h*100||0,o.w=n.w*100||0,o.vx=n.x*100||0,o.vy=n.y*100||0,this.resizePosition()}}},{key:"setConfig",value:function(n){var o=this;n&&Object.keys(n).map(function(a){if(a!=="plugins"){o.config[a]=n[a];var s=o.plugins[a.toLowerCase()];s&&h.typeOf(s.setConfig)==="Function"&&s.setConfig(n[a])}})}},{key:"playNext",value:function(n){var o=this;this.resetState(),this._currentTime=0,this._duration=0,this.isPlaying=!1,this.setConfig(n),this.vtype="MP4",Re(this,"playnext",function(){o.start(),o.emit(dr,n)})}},{key:"getVideoSize",value:function(){var n=this;if(this.video){var o=this.root.getBoundingClientRect();this.sizeInfo.width=o.width,this.sizeInfo.height=o.height,this.sizeInfo.left=o.left,this.sizeInfo.top=o.top;var a=this.video,s=a.videoWidth,u=a.videoHeight,l=this.config,c=l.fitVideoSize,f=l.videoFillMode;if((f==="fill"||f==="cover"||f==="contain")&&this.setAttribute("data-xgfill",f),!(!u||!s)){this._videoHeight=u,this._videoWidth=s;var d=this.controls&&this.innerContainer?this.controls.root.getBoundingClientRect().height:0,p=o.width,y=o.height-d,b=parseInt(s/u*1e3,10),g=parseInt(p/y*1e3,10),T=p,E=y,O={};c==="auto"&&g>b||c==="fixWidth"?(E=p/b*1e3,this.config.fluid?O.paddingTop="".concat(E*100/T,"%"):O.height="".concat(E+d,"px")):(c==="auto"&&g<b||c==="fixHeight")&&(T=b*y/1e3,O.width="".concat(T,"px")),!this.fullscreen&&!this.cssfullscreen&&Object.keys(O).forEach(function(H){n.root.style[H]=O[H]}),(f==="fillHeight"&&g<b||f==="fillWidth"&&g>b)&&this.setAttribute("data-xgfill","cover");var z={videoScale:b,vWidth:T,vHeight:E,cWidth:T,cHeight:E+d};this.resizePosition(),this.emit(Rt,z)}}}},{key:"updateObjectPosition",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;if(this.video.updateObjectPosition){this.video.updateObjectPosition(n,o);return}this.video.style.objectPosition="".concat(n*100,"% ").concat(o*100,"%")}},{key:"preProcessUrl",value:function(n,o){var a=this.config,s=a.preProcessUrl,u=a.preProcessUrlOptions,l=Object.assign({},u,o);return!h.isBlob(n)&&typeof s=="function"?s(n,l):{url:n}}},{key:"src",get:function(){return this.video?this.video.src:""},set:function(n){if(this.video){if(this.emit(ri,n),this.emit(Jn),this._currentTime=0,this._duration=0,h.isMSE(this.video)){this.onWaiting();return}n=this.preProcessUrl(n).url,this._detachSourceEvents(this.video),h.typeOf(n)==="Array"?this._attachSourceEvents(this.video,n):n?this.video.src=n:this.video.removeAttribute("src"),this.load()}}},{key:"definitionList",get:function(){return!this.config||!this.config.definition?[]:this.config.definition.list||[]},set:function(n){var o=this,a=this.config.definition;a.list=n,this.emit("resourceReady",n);var s=null,u=null;n.map(function(l){o.curDefinition===l.definition&&(s=l),a.defaultDefinition===l.definition&&(u=l)}),!u&&n.length>0&&(u=n[0]),s?this.changeDefinition(s):u&&this.changeDefinition(u)}},{key:"videoFrameInfo",get:function(){var n={total:0,dropped:0,corrupted:0,droppedRate:0,droppedDuration:0};if(!this.video||!this.video.getVideoPlaybackQuality)return n;var o=this.video.getVideoPlaybackQuality();return n.dropped=o.droppedVideoFrames||0,n.total=o.totalVideoFrames||0,n.corrupted=o.corruptedVideoFrames||0,n.total>0&&(n.droppedRate=n.dropped/n.total*100,n.droppedDuration=parseInt(this.cumulateTime/n.total*n.dropped,0)),n}},{key:"lang",get:function(){return this.config.lang},set:function(n){var o=Ot.langKeys.filter(function(a){return a===n});if(o.length===0&&n!=="zh"){console.error("Sorry, set lang fail, because the language [".concat(n,"] is not supported now, list of all supported languages is [").concat(Ot.langKeys.join(),"] "));return}this.config.lang=n,J.setLang(n,this)}},{key:"i18n",get:function(){var n=this.config.lang;return n==="zh"&&(n="zh-cn"),this.__i18n.lang[n]||this.__i18n.lang.en}},{key:"i18nKeys",get:function(){return this.__i18n.textKeys||{}}},{key:"version",get:function(){return Ei}},{key:"playerId",get:function(){return this._pluginInfoId}},{key:"url",get:function(){return this.__url||this.config.url},set:function(n){this.__url=n}},{key:"poster",get:function(){return this.plugins.poster?this.plugins.poster.config.poster:this.config.poster},set:function(n){this.plugins.poster&&this.plugins.poster.update(n)}},{key:"readyState",get:function(){var n=we(fe(i.prototype),"readyState",this);return this.i18n[n]||n}},{key:"error",get:function(){var n=we(fe(i.prototype),"error",this);return this.i18n[n]||n}},{key:"networkState",get:function(){var n=we(fe(i.prototype),"networkState",this);return this.i18n[n]||n}},{key:"fullscreenChanging",get:function(){return this._fullScreenOffset!==null}},{key:"cumulateTime",get:function(){var n=this._accPlayed;return this.updateAcc("get"),n.acc}},{key:"zoom",get:function(){return this.config.zoom},set:function(n){this.config.zoom=n}},{key:"videoRotateDeg",get:function(){return this.videoPos.rotate},set:function(n){n=h.convertDeg(n),!(n%90!==0||n===this.videoPos.rotate)&&(this.videoPos.rotate=n,this.resizePosition())}},{key:"avgSpeed",get:function(){return Ea},set:function(n){Ea=n}},{key:"realTimeSpeed",get:function(){return Ta},set:function(n){Ta=n}},{key:"hook",value:function(n,o){return vr.call.apply(vr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"useHooks",value:function(n,o){return yr.call.apply(yr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removeHooks",value:function(n,o){return gr.call.apply(gr,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"usePluginHooks",value:function(n,o,a){for(var s=arguments.length,u=new Array(s>3?s-3:0),l=3;l<s;l++)u[l-3]=arguments[l];return fa.call.apply(fa,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"removePluginHooks",value:function(n,o,a){for(var s=arguments.length,u=new Array(s>3?s-3:0),l=3;l<s;l++)u[l-3]=arguments[l];return ha.call.apply(ha,[this].concat(Array.prototype.slice.call(arguments)))}},{key:"setUserActive",value:function(n,o){var a;typeof o=="boolean"&&o!==this.muted&&(this.addInnerOP("volumechange"),this.muted=o),(a=De)===null||a===void 0||a.setActive(this.playerId,n)}}],[{key:"debugger",get:function(){return A.config.debug},set:function(n){A.config.debug=n}},{key:"instManager",get:function(){return De},set:function(n){De=n}},{key:"pluginsManager",get:function(){return J}},{key:"getCurrentUserActivePlayerId",value:function(){var n;return(n=De)===null||n===void 0?void 0:n.getActiveId()}},{key:"setCurrentUserActive",value:function(n,o){var a;(a=De)===null||a===void 0||a.setActive(n,o)}},{key:"isHevcSupported",value:function(){return D.isHevcSupported()}},{key:"probeConfigSupported",value:function(n){return D.probeConfigSupported(n)}},{key:"install",value:function(n,o){i.plugins||(i.plugins={}),i.plugins[n]||(i.plugins[n]=o)}},{key:"use",value:function(n,o){i.plugins||(i.plugins={}),i.plugins[n]=o}}]),i}(Jp);Qe(oi,"defaultPreset",null);Qe(oi,"XgVideoProxy",null);oi.instManager=bu.getInstance();function Nt(t){"@babel/helpers - typeof";return Nt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Nt(t)}function Ca(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Zn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ca(Object(i),!0).forEach(function(r){Z(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ca(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Cy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ia(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,wu(r.key),r)}}function Iy(t,e,i){return e&&Ia(t.prototype,e),i&&Ia(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ry(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Hi(t,e)}function Hi(t,e){return Hi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Hi(t,e)}function $y(t){var e=Ly();return function(){var r=br(t),n;if(e){var o=br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return xy(this,n)}}function xy(t,e){if(e&&(Nt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return K(t)}function K(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Ly(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function br(t){return br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},br(t)}function Z(t,e,i){return e=wu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function wu(t){var e=Ay(t,"string");return Nt(e)==="symbol"?e:String(e)}function Ay(t,e){if(Nt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Nt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Q(){return new Date().getTime()}var _e={LOAD_START:"loadstart",LOADED_DATA:"loadeddata",FIRST_FRAME:"firstFrame",WAIT_START:"waitingStart",WAIT_END:"waitingEnd",SEEK_START:"seekStart",SEEK_END:"seekEnd",WAIT_END_EXT:"waitingEndExt",SEEK_END_EXT:"seekEndEndExt"},X="[xgLogger]",Dy=function(t){Ry(i,t);var e=$y(i);function i(){var r;Cy(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Z(K(r),"_onLoadStart",function(){var s=K(r),u=s._state,l=u.autoplayStart,c=u.isFFSend;r.startCostTime=Q()-r.newPointTime,A.logInfo(X,"LOAD_START","autoplayStart:".concat(l," isFFSend:").concat(c," startCostTime:").concat(r.startCostTime," newPointTime").concat(r.newPointTime)),!c&&(!u.isLs&&r.emitLog(_e.LOAD_START,{}),u.isLs=!0,u.isTimeUpdate=!1,u.isFFLoading=!0,r.pt=Q(),r.vt=0,r.fvt=0,r._initOnceEvents())}),Z(K(r),"_onLoadedData",function(){r.vt=Q(),r.fvt=r.vt-r.pt,r.loadedCostTime=r.vt-r.newPointTime,r._updateBuffer();var s=r._state,u=s.isTimeUpdate,l=s.isFFSend,c=s.autoplayStart;A.logInfo(X,"LOADED_DATA","fvt:".concat(r.fvt," isTimeUpdate:").concat(r._state.isTimeUpdate," loadedCostTime:").concat(r.loadedCostTime)),(u||c)&&r._sendFF("loadedData"),l||r.emitLog(_e.LOADED_DATA,{})}),Z(K(r),"_onTimeupdate",function(){var s=K(r),u=s._state;u.isTimeUpdate=!0,u.time=r.player.currentTime,r._state.autoplayStart&&!u.isFFSend&&r._sendFF("onTimeupdate")}),Z(K(r),"_onPlay",function(){var s=r.player.buffered,u=K(r),l=u.levelInfo;A.logInfo(X,"_onPlay playPos:".concat(l.startBuffer)),l.startBuffer<0&&(l.startBuffer=s.length>0?parseInt(s.end(0)*1e3,10):0,l.startType="onplay")}),Z(K(r),"_onAutoplayStart",function(){A.logInfo(X,"_onAutoplayStart"),r._state.autoplayStart=!0,r.vt&&r._sendFF("onAutoplayStart")}),Z(K(r),"_onReset",function(){r._state={time:0,autoplayStart:!1,isFFLoading:!1,isTimeUpdate:!1,isFFSend:!1,isLs:!1},r.vt=0,r.pt=0,r.fvt=0,r.newPointTime=Q(),r.loadedCostTime=0,r.startCostTime=0,r.seekingStart=0,r.seekData={startTime:0,lastTime:0,timeBefore:0,timeAfter:0,inBuffer:0,diffStart:0,interval:-1},r.waitData={startTime:0,lastTime:0,interval:-1,diffStart:0},r.waitingStart=0,r.fixedWaitingStart=0,r.ffsendTime=0,r.levelInfo={diff:0,buffer:-1,startBuffer:-1,startType:""},r._isWaiting=!1,r._waitTimer&&h.clearTimeout(K(r),r._waitTimer),r._waittTimer&&h.clearTimeout(K(r),r._waittTimer),r._waitTimer=null,r._waittTimer=null,r._waitType=0}),Z(K(r),"_onSeeking",function(){var s=K(r),u=s.seekData,l=s._state;if(!u.startTime){var c=r.player,f=c.buffered,d=c.currentTime;u.startTime=Q(),u.timeBefore=l.time,u.timeAfter=d;var p=h.getBufferByCurrentTime(f,d);A.logInfo(X,"onSeeking",d,p),u.inBuffer=p.include,u.diffStart=p.diff*1e3,u.lastTime>0?u.interval=u.startTime-u.lastTime:u.interval=-1,A.logInfo(X,"onSeeking",u),r.suspendWaitingStatus("seek");var y=r._getSeekInfo();r.emitLog(_e.SEEK_START,Zn({start:Q()},y))}}),Z(K(r),"_onSeeked",function(){A.logInfo(X,"onSeeked"),r.suspendSeekingStatus("seeked")}),Z(K(r),"_onWaitingLoadStart",function(){r._isWaiting||r.vt||(r._isWaiting=!0,r.waitingStart=Q(),r.fixedWaitingStart=Q(),r._waitType=1,r.emitLog(_e.WAIT_START,{fixedStart:r.fixedWaitingStart,start:r.waitingStart,type:1,endType:"loadstart"}))}),Z(K(r),"_onWaiting",function(){if(!(r._isWaiting||!r.vt)){r._isWaiting=!0;var s=K(r),u=s.waitData,l=s.seekData,c=s._state;!c.isTimeUpdate&&l.startTime===0?r._waitType=1:l.startTime?r._waitType=2:r._waitType=0,r.fixedWaitingStart=Q(),A.logInfo(X,"_onWaiting"),u.lastTime>0?u.interval=r.fixedWaitingStart-u.lastTime:u.interval=-1;var f=r.player,d=f.buffered,p=f.currentTime,y=h.getBufferByCurrentTime(d,p);u.diffStart=y.diff*1e3,r._waitTimer=h.setTimeout(K(r),function(){A.logInfo(X,"_onWaiting real");var b=K(r),g=b.waitData;r._isWaiting?(r.waitingStart=Q(),h.clearTimeout(K(r),r._waitTimer),g.lastTime=r.fixedWaitingStart,r._waitTimer=null,r._startWaitTimeout(),r.emitLog(_e.WAIT_START,{fixedStart:r.fixedWaitingStart,start:r.waitingStart,type:r._waitType,endType:r._waitType===2?"seek":"playing",diffStart:g.diffStart,interval:g.interval})):(g.interval=-1,g.diffStart=0)},200)}}),Z(K(r),"_onError",function(){r.suspendSeekingStatus("error"),r.suspendWaitingStatus("error")}),Z(K(r),"_onWaitingTimeout",function(s){r.suspendWaitingStatus(s||"timeout"),h.clearTimeout(K(r),r._waittTimer),r._waittTimer=null}),Z(K(r),"_onProgress",function(){A.logInfo(X,"_onProgress")}),Z(K(r),"_onPlaying",function(){A.logInfo(X,"_onPlaying"),r._isWaiting&&r.suspendWaitingStatus("playing")}),r}return Iy(i,[{key:"afterCreate",value:function(){var n=this;this._onReset(),this._waitType=-1,this._initOnceEvents(),this.newPointTime=Q(),this.loadedCostTime=0,this.startCostTime=0,this.ffsendTime=0,this.on(ti,this._onLoadStart),this.on(It,this._onLoadedData),this.on(Jo,this._onSeeking),this.on(xe,this._onSeeked),this.on(ta,function(){n.endState("destroy")}),this.on(ze,function(){n.endState("ended")}),this.on(pt,function(){n.endState("pause")}),this.on(be,this._onPlay),this.on(ri,function(){n.endState("urlChange"),A.logInfo(X,"URL_CHANGE"),n._state.isFFSend&&n._onReset()}),this.on([qo,Le],this._onPlaying),this.on(Jn,this._onWaiting),this.on(ei,this._onError),this.on(ii,function(){A.logInfo(X,"RESET"),n.endState("reset"),n._initOnceEvents(),n._onReset();var o=n.levelInfo,a=n.playerConfig;a.autoplay&&(o.startType="onreset",o.startBuffer=0)})}},{key:"_initOnceEvents",value:function(){this.off(et,this._onAutoplayStart),this.off(ye,this._onTimeupdate),this.once(et,this._onAutoplayStart),this.on(ye,this._onTimeupdate)}},{key:"_sendFF",value:function(n){var o=this._state,a=o.isFFLoading,s=o.isFFSend;if(A.logInfo(X,"_sendFF","".concat(n," fvt:").concat(this.fvt," isFFLoading:").concat(a," !isFFSend:").concat(!s)),this.vt>0&&a&&!s){var u;this.ffsendTime=Q();var l=this.levelInfo,c=l.buffer,f=l.startBuffer,d=l.startType;A.logInfo(X,"emitLog_firstFrame",n,"startBuffer:".concat(f," startType:").concat(d," buffer:").concat(c," ")),this._state.isFFLoading=!1,this._state.isFFSend=!0;var p=this.fvt+(((u=this.player)===null||u===void 0?void 0:u.beforeLoadStartCostTime)||0);this.emitLog(_e.FIRST_FRAME,{fvt:this.fvt,costTime:p,vt:this.vt,startCostTime:this.startCostTime,loadedCostTime:this.loadedCostTime,buffer:c,startBuffer:f,endType:n})}}},{key:"_updateBuffer",value:function(){var n=this.player,o=n.buffered,a=n.currentTime,s=h.getBufferByCurrentTime(o,a);A.logInfo(X,"_updateBuffer",s);var u=this.levelInfo;u.buffer=s.end*1e3,u.diff=s.diff*1e3}},{key:"_getSeekInfo",value:function(){var n=this.seekData,o=n.interval,a=n.timeBefore,s=n.timeAfter,u=n.inBuffer,l=n.diffStart;return{interval:o,timeBefore:a,timeAfter:s,inBuffer:u,diffStart:l}}},{key:"_startWaitTimeout",value:function(){this._waittTimer&&h.clearTimeout(this,this._waittTimer),this._waittTimer=h.setTimeout(this,this._onWaitingTimeout,this.config.waitTimeout)}},{key:"endState",value:function(n){var o=this.player,a=o.currentTime,s=o.duration,u=s-a,l=!(s>0&&a>0&&u<1);A.logInfo(X,"endState:".concat(n," duration - currentTime:").concat(u," _emit:").concat(l)),this.suspendWaitingStatus(n,l),this.suspendSeekingStatus(n,l)}},{key:"suspendSeekingStatus",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.seekData;if(a.startTime){var s=Q(),u=s-a.startTime,l=this.player,c=l.buffered,f=l.currentTime,d=h.getBufferByCurrentTime(c,f);A.logInfo(X,"suspendSeekingStatus",f,u),a.lastTime=a.startTime,a.startTime=0;var p=o?_e.SEEK_END:_e.SEEK_END_EXT,y=this._getSeekInfo();this.emitLog(p,Zn(Zn({end:s,costTime:u,endType:n},y),{},{diffEnd:d.diff*1e3}))}}},{key:"suspendWaitingStatus",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(this._waitTimer&&(h.clearTimeout(this,this._waitTimer),this._waitTimer=null),this._waittTimer&&(h.clearTimeout(this,this._waittTimer),this._waittTimer=null),this._isWaiting=!1,!!this.waitingStart){var a=this.waitData,s=Q(),u=s-this.waitingStart,l=s-this.fixedWaitingStart,c=this.config.waitTimeout;this._isWaiting=!1,this.waitingStart=0,this.fixedWaitingStart=0;var f=this.player,d=f.buffered,p=f.currentTime,y=h.getBufferByCurrentTime(d,p),b=o?_e.WAIT_END:_e.WAIT_END_EXT;this.emitLog(b,{fixedCostTime:l>c?c:l,costTime:u>c?c:u,type:n==="loadeddata"?1:this._waitType,endType:this._waitType===2?"seek":n,diffStart:a.diffStart,diffEnd:y.diff*1e3,interval:a.interval})}}},{key:"emitLog",value:function(n,o){var a=this.player,s=a.video,u=s.readyState,l=s.networkState;this.emit(iu,Zn({t:Q(),host:h.getHostFromUrl(a.currentSrc),vtype:a.vtype,eventType:n,currentTime:a.currentTime,readyState:u,networkState:l},o))}}],[{key:"pluginName",get:function(){return"xgLogger"}},{key:"defaultConfig",get:function(){return{waitTimeout:1e4}}}]),i}(F);function Mt(t){"@babel/helpers - typeof";return Mt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Mt(t)}function Ny(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ra(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,jy(r.key),r)}}function My(t,e,i){return e&&Ra(t.prototype,e),i&&Ra(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function jy(t){var e=By(t,"string");return Mt(e)==="symbol"?e:String(e)}function By(t,e){if(Mt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Mt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Vi(t,e)}function Vi(t,e){return Vi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Vi(t,e)}function Hy(t){var e=zy();return function(){var r=_r(t),n;if(e){var o=_r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Vy(this,n)}}function Vy(t,e){if(e&&(Mt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uy(t)}function Uy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zy(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _r(t){return _r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},_r(t)}var Ky='<svg class="xgplayer-replay-svg" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 78 78" width="78" height="78"><path fill="#fff" d="M28.227 33.876l3.04-1.229a1 1 0 011.303.553l.374.927a1 1 0 01-.552 1.302l-5.564 2.247-.927.375a1 1 0 01-1.302-.553l-2.622-6.49a1 1 0 01.553-1.302l.927-.374a1 1 0 011.302.552l.92 2.278A15.005 15.005 0 0139.5 23c8.284 0 15 6.716 15 15 0 8.284-6.716 15-15 15a14.955 14.955 0 01-10.63-4.417 1.5 1.5 0 112.126-2.116A11.956 11.956 0 0039.5 50c6.627 0 12-5.373 12-12s-5.373-12-12-12a12.005 12.005 0 00-11.273 7.876z"/></svg>',Gy=function(t){Fy(i,t);var e=Hy(i);function i(){return Ny(this,i),e.apply(this,arguments)}return My(i,[{key:"registerIcons",value:function(){return{replay:Ky}}},{key:"afterCreate",value:function(){var n=this;F.insert(this.icons.replay,this.root,0),this.__handleReplay=this.hook("replayHandler",function(){n.player.replay()},{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(".xgplayer-replay",["click","touchend"],this.__handleReplay),this.on(ze,function(){if(n.playerConfig.loop||h.addClass(n.player.root,"replay"),!n.config.disable){n.show();var o=n.root.querySelector("path");if(o){var a=window.getComputedStyle(o).getPropertyValue("transform");if(typeof a=="string"&&a.indexOf("none")>-1)return null;o.setAttribute("transform",a)}}}),this.on(be,function(){n.hide()})}},{key:"handleReplay",value:function(n){n.preventDefault(),n.stopPropagation(),this.player.replay(),h.removeClass(this.player.root,"replay")}},{key:"show",value:function(){this.config.disable||(this.root.style.display="flex")}},{key:"enable",value:function(){this.config.disable=!1}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){this.unbind(".xgplayer-replay",["click","touchend"],this.__handleReplay)}},{key:"render",value:function(){return`<xg-replay class="xgplayer-replay">
      <xg-replay-txt class="xgplayer-replay-txt" lang-key="`.concat(this.i18nKeys.REPLAY,'">').concat(this.i18n.REPLAY,`</xg-replay-txt>
    </xg-replay>`)}}],[{key:"pluginName",get:function(){return"replay"}},{key:"defaultConfig",get:function(){return{disable:!1}}}]),i}(F);function jt(t){"@babel/helpers - typeof";return jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},jt(t)}function Wy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $a(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xy(r.key),r)}}function Yy(t,e,i){return e&&$a(t.prototype,e),i&&$a(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xy(t){var e=qy(t,"string");return jt(e)==="symbol"?e:String(e)}function qy(t,e){if(jt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(jt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Jy(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ui(t,e)}function Ui(t,e){return Ui=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ui(t,e)}function Qy(t){var e=tg();return function(){var r=Pr(t),n;if(e){var o=Pr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Zy(this,n)}}function Zy(t,e){if(e&&(jt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eg(t)}function eg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Pr(t){return Pr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Pr(t)}var ng=function(t){Jy(i,t);var e=Qy(i);function i(){return Wy(this,i),e.apply(this,arguments)}return Yy(i,[{key:"isEndedShow",get:function(){return this.config.isEndedShow},set:function(n){this.config.isEndedShow=n}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"beforeCreate",value:function(n){typeof n.player.config.poster=="string"&&(n.config.poster=n.player.config.poster)}},{key:"afterCreate",value:function(){var n=this;this.on(ze,function(){n.isEndedShow&&h.removeClass(n.root,"hide")}),this.config.hideCanplay?(this.once(ye,function(){n.onTimeUpdate()}),this.on(ri,function(){h.removeClass(n.root,"hide"),h.addClass(n.root,"xg-showplay"),n.once(ye,function(){n.onTimeUpdate()})})):this.on(be,function(){h.addClass(n.root,"hide")})}},{key:"onTimeUpdate",value:function(){var n=this;this.player.currentTime?h.removeClass(this.root,"xg-showplay"):this.once(ye,function(){n.onTimeUpdate()})}},{key:"update",value:function(n){n&&(this.config.poster=n,this.root.style.backgroundImage="url(".concat(n,")"))}},{key:"render",value:function(){var n=this.config,o=n.poster,a=n.hideCanplay,s=o?"background-image:url(".concat(o,");"):"";return'<xg-poster class="xgplayer-poster '.concat(a?"xg-showplay":"",'" style="').concat(s,`">
    </xg-poster>`)}}],[{key:"pluginName",get:function(){return"poster"}},{key:"defaultConfig",get:function(){return{isEndedShow:!0,hideCanplay:!1,poster:""}}}]),i}(F);function Bt(t){"@babel/helpers - typeof";return Bt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Bt(t)}function rg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Su(r.key),r)}}function ig(t,e,i){return e&&xa(t.prototype,e),i&&xa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function og(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&zi(t,e)}function zi(t,e){return zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},zi(t,e)}function ag(t){var e=ug();return function(){var r=wr(t),n;if(e){var o=wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return sg(this,n)}}function sg(t,e){if(e&&(Bt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ki(t)}function Ki(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ug(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function wr(t){return wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},wr(t)}function La(t,e,i){return e=Su(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Su(t){var e=lg(t,"string");return Bt(e)==="symbol"?e:String(e)}function lg(t,e){if(Bt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Bt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var cg='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',fg='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',Ie={};function hg(t,e){var i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{start:null,end:null};Ie[t]&&window.clearTimeout(Ie[t].id),Ie[t]={},i.start&&i.start(),Ie[t].id=window.setTimeout(function(){i.end&&i.end(),window.clearTimeout(Ie[t].id),delete Ie[t]},e)}function dg(){Object.keys(Ie).map(function(t){window.clearTimeout(Ie[t].id),delete Ie[t]})}var pg=function(t){og(i,t);var e=ag(i);function i(r){var n;return rg(this,i),n=e.call(this,r),La(Ki(n),"onPlayerReset",function(){n.autoPlayStart=!1;var o=n.config.mode==="auto"?"auto-hide":"hide";n.setAttr("data-state","play"),h.removeClass(n.root,o),n.show()}),La(Ki(n),"onAutoplayStart",function(){if(!n.autoPlayStart){var o=n.config.mode==="auto"?"auto-hide":"hide";h.addClass(n.root,o),n.autoPlayStart=!0,n.onPlayPause("play")}}),n.autoPlayStart=!1,n._lastState="",n}return ig(i,[{key:"afterCreate",value:function(){var n=this,o=this.player,a=this.playerConfig;this.initIcons(),this.once(Zo,function(){a&&(a.lang&&a.lang==="en"?h.addClass(o.root,"lang-is-en"):a.lang==="jp"&&h.addClass(o.root,"lang-is-jp"))}),this.on(et,this.onAutoplayStart),a.autoplay||this.show(),this.on(ea,function(){var s=n.config.mode==="auto"?"auto-hide":"hide";n.setAttr("data-state","play"),h.removeClass(n.root,s),n.show()}),this.on(be,function(){n.onPlayPause("play")}),this.on(pt,function(){n.onPlayPause("pause")}),this.on(Tt,function(){n.onPlayPause(o.paused?"pause":"play")}),this.on(ii,function(){n.onPlayerReset()}),this.clickHandler=this.hook("click",this.switchPausePlay,{pre:function(u){u.cancelable&&u.preventDefault(),u.stopPropagation(),n.emitUserAction(u,"switch_play_pause")}}),this.bind(["click","touchend"],this.clickHandler)}},{key:"registerIcons",value:function(){return{startPlay:{icon:cg,class:"xg-icon-play"},startPause:{icon:fg,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild("xg-start-inner",n.startPlay),this.appendChild("xg-start-inner",n.startPause)}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"focusHide",value:function(){h.addClass(this.root,"focus-hide")}},{key:"recover",value:function(){h.removeClass(this.root,"focus-hide")}},{key:"switchStatus",value:function(n){n?this.setAttr("data-state",this.player.paused?"pause":"play"):this.setAttr("data-state",this.player.paused?"play":"pause")}},{key:"animate",value:function(n){var o=this;hg("pauseplay",400,{start:function(){h.addClass(o.root,"interact"),o.show(),o.switchStatus(!0)},end:function(){h.removeClass(o.root,"interact"),!n&&o.hide()}})}},{key:"switchPausePlay",value:function(n){var o=this.player;if(n.cancelable&&n.preventDefault(),n.stopPropagation(),!!o.isReady){var a=this.player.paused;!a&&o.isPlaying?o.pause():o.play()}}},{key:"onPlayPause",value:function(n){var o=this.config,a=this.player;if(!(!a.isPlaying||!this.autoPlayStart||n==="pause"&&(this._lastState===n||a.isBufferControlPaused))){if(this._lastState=n,o.mode==="show"){this.switchStatus(),this.show();return}if(o.mode==="auto"){this.switchStatus();return}if(o.isShowPause&&a.paused&&!a.ended||o.isShowEnd&&a.ended){this.switchStatus(),this.show();return}if(o.disableAnimate){this.switchStatus(),this.hide();return}if(n==="play")this.autoPlayStart?this.animate():this.hide();else{if(!this.autoPlayStart||a.ended)return;this.animate()}}}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.clickHandler),dg()}},{key:"render",value:function(){var n=this.playerConfig.autoplay?this.config.mode==="auto"?"auto-hide":"hide":"";return`
    <xg-start class="xgplayer-start `.concat(n,`">
    <xg-start-inner></xg-start-inner>
    </xg-start>`)}}],[{key:"pluginName",get:function(){return"start"}},{key:"defaultConfig",get:function(){return{isShowPause:!1,isShowEnd:!1,disableAnimate:!1,mode:"hide"}}}]),i}(F);function Ft(t){"@babel/helpers - typeof";return Ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ft(t)}function vg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Aa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,gg(r.key),r)}}function yg(t,e,i){return e&&Aa(t.prototype,e),i&&Aa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function gg(t){var e=mg(t,"string");return Ft(e)==="symbol"?e:String(e)}function mg(t,e){if(Ft(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Ft(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function bg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Gi(t,e)}function Gi(t,e){return Gi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Gi(t,e)}function _g(t){var e=Sg();return function(){var r=Sr(t),n;if(e){var o=Sr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pg(this,n)}}function Pg(t,e){if(e&&(Ft(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wg(t)}function wg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Sg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Sr(t){return Sr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Sr(t)}var kg=function(t){bg(i,t);var e=_g(i);function i(){return vg(this,i),e.apply(this,arguments)}return yg(i,[{key:"render",value:function(){var n=this.config.innerHtml,o=h.createDom("xg-enter","",{},"xgplayer-enter");if(n&&n instanceof window.HTMLElement)o.appendChild(n);else if(n&&typeof n=="string")o.innerHTML=n;else{for(var a="",s=1;s<=12;s++)a+='<div class="xgplayer-enter-bar'.concat(s,'"></div>');o.innerHTML='<div class="xgplayer-enter-spinner">'.concat(a,"</div>")}return o}}],[{key:"pluginName",get:function(){return"enter"}},{key:"defaultConfig",get:function(){return{innerHtml:"",logo:""}}}]),i}(F);function Ht(t){"@babel/helpers - typeof";return Ht=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(t)}function Og(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Da(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Eg(r.key),r)}}function Tg(t,e,i){return e&&Da(t.prototype,e),i&&Da(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Eg(t){var e=Cg(t,"string");return Ht(e)==="symbol"?e:String(e)}function Cg(t,e){if(Ht(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Ht(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ig(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Wi(t,e)}function Wi(t,e){return Wi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Wi(t,e)}function Rg(t){var e=Lg();return function(){var r=kr(t),n;if(e){var o=kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $g(this,n)}}function $g(t,e){if(e&&(Ht(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xg(t)}function xg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Lg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function kr(t){return kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},kr(t)}var Na=function(t){Ig(i,t);var e=Rg(i);function i(){return Og(this,i),e.apply(this,arguments)}return Tg(i,[{key:"afterCreate",value:function(){this.getMini=this.getMini.bind(this),this.exitMini=this.exitMini.bind(this),this.bind("click",this.getMini)}},{key:"getMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"exitMini",value:function(){this.config.onClick&&this.config.onClick()}},{key:"destroy",value:function(){this.unbind(["click","touchend"],this.getMini)}},{key:"render",value:function(){var n="MINISCREEN";return`
      <xg-icon class="xgplayer-miniicon">
      <div class="xgplayer-icon btn-text"><span class="icon-text" lang-key="`.concat(this.i18nKeys[n],'">').concat(this.i18n[n],`</span></div>
      </xg-icon>`)}}],[{key:"pluginName",get:function(){return"miniscreenIcon"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:10}}}]),i}(F);function Ag(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Dg(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mg(r.key),r)}}function Ng(t,e,i){return e&&Dg(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mg(t){var e=jg(t,"string");return it(e)==="symbol"?e:String(e)}function jg(t,e){if(it(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(it(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Yi(t,e)}function Yi(t,e){return Yi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Yi(t,e)}function Fg(t){var e=Vg();return function(){var r=Or(t),n;if(e){var o=Or(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return ku(this,n)}}function ku(t,e){if(e&&(it(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Hg(t)}function Hg(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Vg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Or(t){return Or=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Or(t)}function it(t){"@babel/helpers - typeof";return it=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},it(t)}function Ma(t){var e=parseFloat(t),i=t.indexOf("%")===-1&&!Number.isNaN(e);return i&&e}var ia=["paddingLeft","paddingRight","paddingTop","paddingBottom","marginLeft","marginRight","marginTop","marginBottom","borderLeftWidth","borderRightWidth","borderTopWidth","borderBottomWidth"],Ou=ia.length;function Ug(){for(var t={width:0,height:0,innerWidth:0,innerHeight:0,outerWidth:0,outerHeight:0},e=0;e<Ou;e++){var i=ia[e];t[i]=0}return t}function zg(t){var e=window.getComputedStyle(t);return e}function ja(t){if(typeof t=="string"&&(t=document.querySelector(t)),!(!t||it(t)!=="object"||!t.nodeType)){var e=zg(t);if(e.display==="none")return Ug();var i={};i.width=t.offsetWidth,i.height=t.offsetHeight;for(var r=i.isBorderBox=e.boxSizing==="border-box",n=0;n<Ou;n++){var o=ia[n],a=e[o],s=parseFloat(a);i[o]=Number.isNaN(s)?0:s}var u=i.paddingLeft+i.paddingRight,l=i.paddingTop+i.paddingBottom,c=i.marginLeft+i.marginRight,f=i.marginTop+i.marginBottom,d=i.borderLeftWidth+i.borderRightWidth,p=i.borderTopWidth+i.borderBottomWidth,y=r,b=Ma(e.width);b!==!1&&(i.width=b+(y?0:u+d));var g=Ma(e.height);return g!==!1&&(i.height=g+(y?0:l+p)),i.innerWidth=i.width-(u+d),i.innerHeight=i.height-(l+p),i.outerWidth=i.width+c,i.outerHeight=i.height+f,i}}function yi(t,e){for(var i=0;i<t.length;i++){var r=t[i];if(r.identifier===e)return r}}var gi={START:"dragStart",MOVE:"dragMove",ENDED:"dragEnded"},Ba={mousedown:["mousemove","mouseup"],touchstart:["touchmove","touchend","touchcancel"],pointerdown:["pointermove","pointerup","pointercancel"]},Kg=function(t){Bg(i,t);var e=Fg(i);function i(r){var n,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return Ag(this,i),n=e.call(this),n.isEnabled=!0,n.isDragging=!1,n.isDown=!1,n.position={},n.downPoint={},n.dragPoint={x:0,y:0},n.startPos={x:0,y:0},n._root=r instanceof Element?r:document.querySelector(r),n._handlerDom=o.handle instanceof Element?o.handle:document.querySelector(o.handle),!n._root||!n._handlerDom?ku(n):(n._bindStartEvent(),n)}return Ng(i,[{key:"_bindStartEvent",value:function(){var n=this;"ontouchstart"in window?this._startKey="touchstart":this._startKey="mousedown",this["on".concat(this._startKey)]=this["on".concat(this._startKey)].bind(this),this._handlerDom.addEventListener(this._startKey,this["on".concat(this._startKey)]),Ba[this._startKey].map(function(o){n["on".concat(o)]=n["on".concat(o)].bind(n)})}},{key:"_unbindStartEvent",value:function(){this._handlerDom.removeEventListener(this._startKey,this["on".concat(this._startKey)])}},{key:"_bindPostStartEvents",value:function(n){var o=this;if(n){var a=Ba[this._startKey];a.map(function(s){window.addEventListener(s,o["on".concat(s)])}),this._boundPointerEvents=a}}},{key:"_unbindPostStartEvents",value:function(){var n=this;this._boundPointerEvents&&(this._boundPointerEvents.map(function(o){window.removeEventListener(o,n["on".concat(o)])}),delete this._boundPointerEvents)}},{key:"enable",value:function(){this.isEnabled=!0}},{key:"disable",value:function(){this.isEnabled=!1,this.isDragging&&this.onUp()}},{key:"onDocUp",value:function(n){this.onUp()}},{key:"animate",value:function(){var n=this;this.isDragging&&(this.positionDrag(),window.requestAnimationFrame(function(){n.animate()}))}},{key:"positionDrag",value:function(){var n="translate3d(".concat(this.dragPoint.x,"px, ").concat(this.dragPoint.y,"px, 0)");this._root.style.transform=n,this._root.style.webKitTransform=n}},{key:"setLeftTop",value:function(){this._root.style.left=this.position.x+"px",this._root.style.top=this.position.y+"px"}},{key:"onmousedown",value:function(n){this.dragStart(n,n)}},{key:"onmousemove",value:function(n){this.dragMove(n,n)}},{key:"onmouseup",value:function(n){this.dragEnd(n,n)}},{key:"ontouchstart",value:function(n){var o=n.changedTouches[0];this.dragStart(n,o),this.touchIdentifier=o.pointerId!==void 0?o.pointerId:o.identifier,n.preventDefault()}},{key:"ontouchmove",value:function(n){var o=yi(n.changedTouches,this.touchIdentifier);o&&this.dragMove(n,o)}},{key:"ontouchend",value:function(n){var o=yi(n.changedTouches,this.touchIdentifier);o&&this.dragEnd(n,o),n.preventDefault()}},{key:"ontouchcancel",value:function(n){var o=yi(n.changedTouches,this.touchIdentifier);o&&this.dragCancel(n,o)}},{key:"dragStart",value:function(n,o){if(!(!this._root||this.isDown||!this.isEnabled)){this.downPoint=o,this.dragPoint.x=0,this.dragPoint.y=0,this._getPosition();var a=ja(this._root);this.startPos.x=this.position.x,this.startPos.y=this.position.y,this.startPos.maxY=window.innerHeight-a.height,this.startPos.maxX=window.innerWidth-a.width,this.setLeftTop(),this.isDown=!0,this._bindPostStartEvents(n)}}},{key:"dragRealStart",value:function(n,o){this.isDragging=!0,this.animate(),this.emit(gi.START,this.startPos)}},{key:"dragEnd",value:function(n,o){this._root&&(this._unbindPostStartEvents(),this.isDragging&&(this._root.style.transform="",this.setLeftTop(),this.emit(gi.ENDED)),this.presetInfo())}},{key:"_dragPointerMove",value:function(n,o){var a={x:o.pageX-this.downPoint.pageX,y:o.pageY-this.downPoint.pageY};return!this.isDragging&&this.hasDragStarted(a)&&this.dragRealStart(n,o),a}},{key:"dragMove",value:function(n,o){if(n=n||window.event,!!this.isDown){var a=this.startPos,s=a.x,u=a.y,l=this._dragPointerMove(n,o),c=l.x,f=l.y;c=this.checkContain("x",c,s),f=this.checkContain("y",f,u),this.position.x=s+c,this.position.y=u+f,this.dragPoint.x=c,this.dragPoint.y=f,this.emit(gi.MOVE,this.position)}}},{key:"dragCancel",value:function(n,o){this.dragEnd(n,o)}},{key:"presetInfo",value:function(){this.isDragging=!1,this.startPos={x:0,y:0},this.dragPoint={x:0,y:0},this.isDown=!1}},{key:"destroy",value:function(){this._unbindStartEvent(),this._unbindPostStartEvents(),this.isDragging&&this.dragEnd(),this.removeAllListeners(),this._handlerDom=null}},{key:"hasDragStarted",value:function(n){return Math.abs(n.x)>3||Math.abs(n.y)>3}},{key:"checkContain",value:function(n,o,a){return o+a<0?0-a:n==="x"&&o+a>this.startPos.maxX?this.startPos.maxX-a:n==="y"&&o+a>this.startPos.maxY?this.startPos.maxY-a:o}},{key:"_getPosition",value:function(){var n=window.getComputedStyle(this._root),o=this._getPositionCoord(n.left,"width"),a=this._getPositionCoord(n.top,"height");this.position.x=Number.isNaN(o)?0:o,this.position.y=Number.isNaN(a)?0:a,this._addTransformPosition(n)}},{key:"_addTransformPosition",value:function(n){var o=n.transform;if(o.indexOf("matrix")===0){var a=o.split(","),s=o.indexOf("matrix3d")===0?12:4,u=parseInt(a[s],10),l=parseInt(a[s+1],10);this.position.x+=u,this.position.y+=l}}},{key:"_getPositionCoord",value:function(n,o){if(n.indexOf("%")!==-1){var a=ja(this._root.parentNode);return a?parseFloat(n)/100*a[o]:0}return parseInt(n,10)}}]),i}(Ys);function Vt(t){"@babel/helpers - typeof";return Vt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vt(t)}function Gg(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Fa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Tu(r.key),r)}}function Wg(t,e,i){return e&&Fa(t.prototype,e),i&&Fa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Yg(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Xi(t,e)}function Xi(t,e){return Xi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Xi(t,e)}function Xg(t){var e=Jg();return function(){var r=Tr(t),n;if(e){var o=Tr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return qg(this,n)}}function qg(t,e){if(e&&(Vt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return kt(t)}function kt(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Jg(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Tr(t){return Tr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Tr(t)}function mi(t,e,i){return e=Tu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Tu(t){var e=Qg(t,"string");return Vt(e)==="symbol"?e:String(e)}function Qg(t,e){if(Vt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Vt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Zg='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',em='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',tm=function(t){Yg(i,t);var e=Xg(i);function i(r){var n;Gg(this,i),n=e.call(this,r),mi(kt(n),"onCancelClick",function(s){n.exitMini(),n.isClose=!0}),mi(kt(n),"onCenterClick",function(s){var u=kt(n),l=u.player;l.paused?l.play():l.pause()}),mi(kt(n),"onScroll",function(s){if(!(!window.scrollY&&window.scrollY!==0||Math.abs(window.scrollY-n.pos.scrollY)<50)){var u=parseInt(h.getCss(n.player.root,"height"));u+=n.config.scrollTop,n.pos.scrollY=window.scrollY,window.scrollY>u+5?!n.isMini&&!n.isClose&&n.getMini():window.scrollY<=u&&(n.isMini&&n.exitMini(),n.isClose=!1)}}),n.isMini=!1,n.isClose=!1;var o=kt(n),a=o.config;return n.pos={left:a.left<0?window.innerWidth-a.width-20:a.left,top:a.top<0?window.innerHeight-a.height-20:a.top,height:n.config.height,width:n.config.width,scrollY:window.scrollY||0},n.lastStyle=null,n}return Wg(i,[{key:"beforeCreate",value:function(n){typeof n.player.config.mini=="boolean"&&(n.config.isShowIcon=n.player.config.mini)}},{key:"afterCreate",value:function(){var n=this;this.initIcons(),this.on(pt,function(){n.setAttr("data-state","pause")}),this.on(be,function(){n.setAttr("data-state","play")})}},{key:"onPluginsReady",value:function(){var n=this,o=this.player,a=this.config;if(!a.disable){if(this.config.isShowIcon){var s={config:{onClick:function(){n.getMini()}}};o.controls.registerPlugin(Na,s,Na.pluginName)}var u=h.checkTouchSupport()?"touchend":"click";this.bind(".mini-cancel-btn",u,this.onCancelClick),this.bind(".play-icon",u,this.onCenterClick),this.config.disableDrag||(this._draggabilly=new Kg(this.player.root,{handle:this.root})),this.config.isScrollSwitch&&window.addEventListener("scroll",this.onScroll)}}},{key:"registerIcons",value:function(){return{play:{icon:Zg,class:"xg-icon-play"},pause:{icon:em,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(".play-icon",n.play),this.appendChild(".play-icon",n.pause)}},{key:"getMini",value:function(){var n=this;if(!this.isMini){var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;this.lastStyle={},h.addClass(o.root,"xgplayer-mini"),["width","height","top","left"].map(function(u){n.lastStyle[u]=s.style[u],s.style[u]="".concat(n.pos[u],"px")}),a.fluid&&(s.style["padding-top"]=""),this.emit(hr,!0),o.isMini=this.isMini=!0}}},{key:"exitMini",value:function(){var n=this;if(!this.isMini)return!1;var o=this.player,a=this.playerConfig,s=this.config.target||this.player.root;h.removeClass(o.root,"xgplayer-mini"),this.lastStyle&&Object.keys(this.lastStyle).map(function(u){s.style[u]=n.lastStyle[u]}),this.lastStyle=null,a.fluid&&(o.root.style.width="100%",o.root.style.height="0",o.root.style["padding-top"]="".concat(a.height*100/a.width,"%")),this.emit(hr,!1),this.isMini=o.isMini=!1}},{key:"destroy",value:function(){window.removeEventListener("scroll",this.onScroll);var n=h.checkTouchSupport()?"touchend":"click";this.unbind(".mini-cancel-btn",n,this.onCancelClick),this.unbind(".play-icon",n,this.onCenterClick),this._draggabilly&&this._draggabilly.destroy(),this._draggabilly=null,this.exitMini()}},{key:"render",value:function(){if(!this.config.disable)return`
      <xg-mini-layer class="xg-mini-layer">
      <xg-mini-header class="xgplayer-mini-header">
      <div lang-key="`.concat(this.i18nKeys.MINI_DRAG,'">').concat(this.i18n.MINI_DRAG,`</div>
      </xg-mini-header>
      <div class="mini-cancel-btn">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 20 20">
          <path fill="#fff" fill-rule="evenodd" d="M3.99 3.49a1 1 0 0 1 1.414 0L10 8.085l4.596-4.595a1 1 0 1 1 1.414 1.414L11.414 9.5l4.596 4.596a1 1 0 0 1 .084 1.32l-.084.094a1 1 0 0 1-1.414 0L10 10.914 5.404 15.51a1 1 0 0 1-1.414-1.414L8.585 9.5 3.99 4.904a1 1 0 0 1-.084-1.32z"></path>
        </svg>
      </div>
      <div class="play-icon">
      </div>
      </xg-mini-layer>`)}}],[{key:"pluginName",get:function(){return"miniscreen"}},{key:"defaultConfig",get:function(){return{index:10,disable:!1,width:320,height:180,left:-1,top:-1,isShowIcon:!1,isScrollSwitch:!1,scrollTop:0,disableDrag:!1}}}]),i}(F);function Ut(t){"@babel/helpers - typeof";return Ut=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ut(t)}function nm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ha(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Eu(r.key),r)}}function rm(t,e,i){return e&&Ha(t.prototype,e),i&&Ha(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function im(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&qi(t,e)}function qi(t,e){return qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},qi(t,e)}function om(t){var e=sm();return function(){var r=Er(t),n;if(e){var o=Er(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return am(this,n)}}function am(t,e){if(e&&(Ut(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ce(t)}function ce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function sm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Er(t){return Er=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Er(t)}function On(t,e,i){return e=Eu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Eu(t){var e=um(t,"string");return Ut(e)==="symbol"?e:String(e)}function um(t,e){if(Ut(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Ut(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var er={mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mousemove:"onMouseMove"},bi=["videoClick","videoDbClick"],_i=function(t){im(i,t);var e=om(i);function i(){var r;nm(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),On(ce(r),"onMouseMove",function(s){var u=ce(r),l=u.player,c=u.playerConfig;l.isActive||(l.focus({autoHide:!c.closeDelayBlur}),!c.closeFocusVideoFocus&&l.video.focus())}),On(ce(r),"onMouseEnter",function(s){var u=ce(r),l=u.playerConfig,c=u.player;!l.closeFocusVideoFocus&&c.video.focus(),l.closeDelayBlur?c.focus({autoHide:!1}):c.focus()}),On(ce(r),"onMouseLeave",function(s){var u=r.playerConfig,l=u.closePlayerBlur,c=u.leavePlayerTime,f=u.closeDelayBlur;!l&&!f&&(c?r.player.focus({autoHide:!0,delay:c}):r.player.blur())}),On(ce(r),"onVideoClick",function(s){var u=ce(r),l=u.player,c=u.playerConfig;s.target&&c.closeVideoClick||(s.target===l.video||s.target===l.innerContainer||s.target===l.video.__canvas)&&(s.preventDefault(),c.closeVideoStopPropagation||s.stopPropagation(),r._clickCount++,r.clickTimer&&(clearTimeout(r.clickTimer),r.clickTimer=null),r.clickTimer=setTimeout(function(){r._clickCount&&(r._clickCount--,Re(ce(r),bi[0],function(f,d){r.switchPlayPause(d.e)},{e:s,paused:l.paused}),clearTimeout(r.clickTimer),r.clickTimer=null)},300))}),On(ce(r),"onVideoDblClick",function(s){var u=ce(r),l=u.player,c=u.playerConfig;if(!(c.closeVideoDblclick||!s.target||s.target!==l.video&&s.target!==l.video.__canvas)){if(r._clickCount<2){r._clickCount=0;return}r._clickCount=0,r.clickTimer&&(clearTimeout(r.clickTimer),r.clickTimer=null),s.preventDefault(),s.stopPropagation(),Re(ce(r),bi[1],function(f,d){r.emitUserAction(d.e,"switch_fullscreen",{fullscreen:l.fullscreen}),l.fullscreen?l.exitFullscreen():l.getFullscreen()},{e:s,fullscreen:l.fullscreen})}}),r}return rm(i,[{key:"afterCreate",value:function(){var n=this;this._clickCount=0,bi.map(function(a){n.__hooks[a]=null});var o=this.playerConfig.isMobileSimulateMode;o==="mobile"||D.device==="mobile"&&!D.os.isIpad||this.initEvents()}},{key:"initEvents",value:function(){var n=this,o=this.player,a=o.video,s=o.root,u=this.playerConfig.enableContextmenu;a&&a.addEventListener("click",this.onVideoClick,!1),a&&a.addEventListener("dblclick",this.onVideoDblClick,!1),Object.keys(er).map(function(l){s.addEventListener(l,n[er[l]],!1)}),u&&a&&a.addEventListener("contextmenu",this.onContextmenu,!1)}},{key:"switchPlayPause",value:function(n){var o=this.player;this.emitUserAction(n,"switch_play_pause"),o.ended?o.duration!==1/0&&o.duration>0&&o.replay():o.paused?o.play():o.pause()}},{key:"onContextmenu",value:function(n){n=n||window.event,n.preventDefault&&n.preventDefault(),n.stopPropagation?n.stopPropagation():(n.returnValue=!1,n.cancelBubble=!0)}},{key:"destroy",value:function(){var n=this,o=this.player,a=o.video,s=o.root;this.clickTimer&&clearTimeout(this.clickTimer),a.removeEventListener("click",this.onVideoClick,!1),a.removeEventListener("dblclick",this.onVideoDblClick,!1),a.removeEventListener("contextmenu",this.onContextmenu,!1),Object.keys(er).map(function(u){s.removeEventListener(u,n[er[u]],!1)})}}],[{key:"pluginName",get:function(){return"pc"}},{key:"defaultConfig",get:function(){return{}}}]),i}(rt);function Gn(t){"@babel/helpers - typeof";return Gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gn(t)}function lm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cm(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Cu(r.key),r)}}function fm(t,e,i){return e&&cm(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function tr(t,e,i){return e=Cu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Cu(t){var e=hm(t,"string");return Gn(e)==="symbol"?e:String(e)}function hm(t,e){if(Gn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Gn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Ne={PRESS:"press",PRESS_END:"pressend",DOUBlE_CLICK:"doubleclick",CLICK:"click",TOUCH_MOVE:"touchmove",TOUCH_START:"touchstart",TOUCH_END:"touchend"},dm={start:"touchstart",end:"touchend",move:"touchmove",cancel:"touchcancel"},pm={start:"mousedown",end:"mouseup",move:"mousemove",cancel:"mouseleave"};function Va(t){return t&&t.length>0?t[t.length-1]:null}function Ua(t){var e=navigator.userAgent;/(?:iPhone|iPad)/.test(e)&&t.cancelable&&t.preventDefault()}function vm(){return{pressDelay:600,dbClickDelay:200,disablePress:!1,disableDbClick:!1,miniStep:2,needPreventDefault:!0}}var ym=function(){function t(e){var i=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{eventType:"touch"};lm(this,t),tr(this,"onTouchStart",function(n){var o=i._pos,a=i.root,s=i.config;s.needPreventDefault&&Ua(n);var u=Va(n.touches);o.x=u?parseInt(u.pageX,10):n.pageX,o.y=u?parseInt(u.pageX,10):n.pageX,o.start=!0,i.__setPress(n),a.addEventListener(i.events.end,i.onTouchEnd),a.addEventListener(i.events.cancel,i.onTouchCancel),a.addEventListener(i.events.move,i.onTouchMove),i.trigger(Ne.TOUCH_START,n)}),tr(this,"onTouchCancel",function(n){i.onTouchEnd(n)}),tr(this,"onTouchEnd",function(n){var o=i._pos,a=i.root,s=i.config;s.needPreventDefault&&Ua(n),i.__clearPress(),a.removeEventListener(i.events.cancel,i.onTouchCancel),a.removeEventListener(i.events.end,i.onTouchEnd),a.removeEventListener(i.events.move,i.onTouchMove),n.moving=o.moving,n.press=o.press,o.press&&i.trigger(Ne.PRESS_END,n),i.trigger(Ne.TOUCH_END,n),!o.press&&!o.moving&&i.__setDb(n),o.press=!1,o.start=!1,o.moving=!1}),tr(this,"onTouchMove",function(n){var o=i._pos,a=i.config,s=Va(n.touches),u=s?parseInt(s.pageX,10):n.pageX,l=s?parseInt(s.pageY,10):n.pageX,c=u-o.x,f=l-o.y;Math.abs(f)<a.miniStep&&Math.abs(c)<a.miniStep||(i.__clearPress(),o.press&&i.trigger(Ne.PRESS_END,n),o.press=!1,o.moving=!0,i.trigger(Ne.TOUCH_MOVE,n))}),this._pos={moving:!1,start:!1,x:0,y:0},this.config=vm(),Object.keys(r).map(function(n){i.config[n]=r[n]}),this.root=e,this.events=r.eventType==="mouse"?pm:dm,this.pressIntrvalId=null,this.dbIntrvalId=null,this.__handlers={},this._initEvent()}return fm(t,[{key:"_initEvent",value:function(){this.root.addEventListener(this.events.start,this.onTouchStart)}},{key:"__setPress",value:function(i){var r=this,n=this.config;this.pressIntrvalId&&this.__clearPress(),this.pressIntrvalId=setTimeout(function(){r.trigger(Ne.PRESS,i),r._pos.press=!0,r.__clearPress()},n.pressDelay)}},{key:"__clearPress",value:function(){window.clearTimeout(this.pressIntrvalId),this.pressIntrvalId=null}},{key:"__setDb",value:function(i){var r=this,n=this.config;if(this.dbIntrvalId){this.__clearDb(),this.trigger(Ne.DOUBlE_CLICK,i);return}this.dbIntrvalId=setTimeout(function(){r.__clearDb(),!r._pos.start&&!r._pos.press&&!r._pos.moving&&r.trigger(Ne.CLICK,i)},n.dbClickDelay)}},{key:"__clearDb",value:function(){clearTimeout(this.dbIntrvalId),this.dbIntrvalId=null}},{key:"on",value:function(i,r){this.__handlers[i]||(this.__handlers[i]=[]),this.__handlers[i].push(r)}},{key:"off",value:function(i,r){if(this.__handlers[i]){for(var n=this.__handlers[i],o=-1,a=0;a<n.length;a++)if(n[a]===r){o=a;break}o>=0&&this.__handlers[i].splice(o,1)}}},{key:"trigger",value:function(i,r){this.__handlers[i]&&this.__handlers[i].map(function(n){try{n(r)}catch(o){console.error("trigger>>:".concat(i),o)}})}},{key:"destroy",value:function(){var i=this,r={touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart"};Object.keys(r).forEach(function(n){i.root.removeEventListener(n,i[r[n]])})}}]),t}();function zt(t){"@babel/helpers - typeof";return zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},zt(t)}function gm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function za(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Iu(r.key),r)}}function mm(t,e,i){return e&&za(t.prototype,e),i&&za(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function bm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ji(t,e)}function Ji(t,e){return Ji=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ji(t,e)}function _m(t){var e=wm();return function(){var r=Cr(t),n;if(e){var o=Cr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Pm(this,n)}}function Pm(t,e){if(e&&(zt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ce(t)}function Ce(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function wm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Cr(t){return Cr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Cr(t)}function Tn(t,e,i){return e=Iu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Iu(t){var e=Sm(t,"string");return zt(e)==="symbol"?e:String(e)}function Sm(t,e){if(zt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(zt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var km='<svg width="20" height="9" viewBox="0 0 8 9" fill="none" xmlns="http://www.w3.org/2000/svg"><path opacity=".54" d="M7.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 010 7.964V1.036A1 1 0 011.5.17l6 3.464z" fill="#fff"/><path d="M12.5 3.634a1 1 0 010 1.732l-6 3.464A1 1 0 015 7.964V1.036A1 1 0 016.5.17l6 3.464z" fill="#fff"/></svg>',Ge={AUTO:"auto",SEEKING:"seeking",PLAYBACK:"playbackrate",LIGHT:""},Pi=["videoClick","videoDbClick"],Om=function(t){bm(i,t);var e=_m(i);function i(r){var n;return gm(this,i),n=e.call(this,r),Tn(Ce(n),"onTouchStart",function(o){var a=Ce(n),s=a.player,u=a.config,l=a.pos,c=a.playerConfig,f=n.getTouche(o);if(f&&!u.disableGesture&&n.duration>0&&!s.ended){l.isStart=!0,h.checkIsFunction(c.disableSwipeHandler)&&c.disableSwipeHandler(),n.find(".xg-dur").innerHTML=h.format(n.duration);var d=n.root.getBoundingClientRect();s.rotateDeg===90?(l.top=d.left,l.left=d.top,l.width=d.height,l.height=d.width):(l.top=d.top,l.left=d.left,l.width=d.width,l.height=d.height);var p=parseInt(f.pageX-l.left,10),y=parseInt(f.pageY-l.top,10);l.x=s.rotateDeg===90?y:p,l.y=s.rotateDeg===90?p:y,l.scopeL=u.scopeL*l.width,l.scopeR=(1-u.scopeR)*l.width,l.scopeM1=l.width*(1-u.scopeM)/2,l.scopeM2=l.width-l.scopeM1}}),Tn(Ce(n),"onTouchMove",function(o){var a=n.getTouche(o),s=Ce(n),u=s.pos,l=s.config,c=s.player;if(!(!a||l.disableGesture||!n.duration||!u.isStart)){var f=l.miniMoveStep,d=l.hideControlsActive,p=parseInt(a.pageX-u.left,10),y=parseInt(a.pageY-u.top,10),b=c.rotateDeg===90?y:p,g=c.rotateDeg===90?p:y;if(Math.abs(b-u.x)>f||Math.abs(g-u.y)>f){var T=b-u.x,E=g-u.y,O=u.scope;if(O===-1&&(O=n.checkScope(b,g,T,E,u),O===0&&(d?c.blur():c.focus({autoHide:!1}),!u.time&&(u.time=parseInt(c.currentTime*1e3,10)+n.timeOffset*1e3)),u.scope=O),O===-1||O>0&&!l.gestureY||O===0&&!l.gestureX)return;o.cancelable&&o.preventDefault(),n.executeMove(T,E,O,u.width,u.height),u.x=b,u.y=g}}}),Tn(Ce(n),"onTouchEnd",function(o){var a=Ce(n),s=a.player,u=a.pos,l=a.playerConfig;u.isStart&&(u.scope>-1&&o.cancelable&&o.preventDefault(),n.endLastMove(u.scope),setTimeout(function(){s.getPlugin("progress")&&s.getPlugin("progress").resetSeekState()},10),u.scope=-1,n.resetPos(),h.checkIsFunction(l.enableSwipeHandler)&&l.enableSwipeHandler(),n.changeAction(Ge.AUTO))}),Tn(Ce(n),"onRootTouchMove",function(o){n.config.disableGesture||!n.config.gestureX||n.checkIsRootTarget(o)&&(o.stopPropagation(),n.pos.isStart?n.onTouchMove(o):n.onTouchStart(o))}),Tn(Ce(n),"onRootTouchEnd",function(o){if(n.pos.isStart&&n.checkIsRootTarget(o)){o.stopPropagation(),n.onTouchEnd(o);var a=n.player.controls;a&&a.recoverAutoHide()}}),n.pos={isStart:!1,x:0,y:0,time:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1},n.timer=null,n}return mm(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"registerIcons",value:function(){return{seekTipIcon:{icon:km,class:"xg-seek-pre"}}}},{key:"afterCreate",value:function(){var n=this;Pi.map(function(f){n.__hooks[f]=null});var o=this.playerConfig,a=this.config,s=this.player;o.closeVideoDblclick===!0&&(a.closedbClick=!0),this.resetPos(),h.isUndefined(o.disableGesture)||(a.disableGesture=!!o.disableGesture),this.appendChild(".xg-seek-icon",this.icons.seekTipIcon),this.xgMask=h.createDom("xg-mask","",{},"xgmask"),s.root.appendChild(this.xgMask),this.initCustomStyle(),this.registerThumbnail();var u=this.domEventType==="mouse"?"mouse":"touch";this.touch=new ym(this.root,{eventType:u,needPreventDefault:!this.config.disableGesture}),this.root.addEventListener("contextmenu",function(f){f.preventDefault()}),s.root.addEventListener("touchmove",this.onRootTouchMove,!0),s.root.addEventListener("touchend",this.onRootTouchEnd,!0),this.on(Sn,function(){var f=n.player,d=n.config;f.duration*1e3<d.moveDuration&&(d.moveDuration=f.duration*1e3)}),this.on([Le,ze],function(){var f=n.pos,d=f.time,p=f.isStart;!p&&d>0&&(n.pos.time=0)});var l={touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",press:"onPress",pressend:"onPressEnd",click:"onClick",doubleclick:"onDbClick"};if(Object.keys(l).forEach(function(f){n.touch.on(f,function(d){n[l[f]](d)})}),!a.disableActive){var c=s.plugins.progress;c&&(c.addCallBack("dragmove",function(f){n.activeSeekNote(f.currentTime,f.forward)}),c.addCallBack("dragend",function(){n.changeAction(Ge.AUTO)}),c.addCallBack("click",function(){n.changeAction(Ge.AUTO)}))}}},{key:"registerThumbnail",value:function(){var n=this.player,o=n.plugins.thumbnail;if(o&&o.usable){this.thumbnail=o.createThumbnail(null,"mobile-thumbnail");var a=this.find(".time-preview");a.insertBefore(this.thumbnail,a.children[0])}}},{key:"initCustomStyle",value:function(){var n=this.playerConfig||{},o=n.commonStyle,a=o.playedColor,s=o.progressColor;a&&(this.find(".xg-curbar").style.backgroundColor=a,this.find(".xg-cur").style.color=a),s&&(this.find(".xg-bar").style.backgroundColor=s,this.find(".time-preview").style.color=s),this.config.disableTimeProgress&&h.addClass(this.find(".xg-timebar"),"hide")}},{key:"resetPos",value:function(){var n=this;this.pos?(this.pos.isStart=!1,this.pos.scope=-1,["x","y","width","height","scopeL","scopeR","scopeM1","scopeM2"].map(function(o){n.pos[o]=0})):this.pos={isStart:!1,x:0,y:0,volume:0,rate:1,light:0,width:0,height:0,scopeL:0,scopeR:0,scopeM1:0,scopeM2:0,scope:-1,time:0}}},{key:"changeAction",value:function(n){var o=this.player,a=this.root;a.setAttribute("data-xg-action",n);var s=o.plugins.start;s&&s.recover()}},{key:"getTouche",value:function(n){var o=this.player.rotateDeg,a=n.touches&&n.touches.length>0?n.touches[n.touches.length-1]:n;return o===0?{pageX:a.pageX,pageY:a.pageY}:{pageX:a.pageX,pageY:a.pageY}}},{key:"checkScope",value:function(n,o,a,s,u){var l=u.width,c=-1;if(n<0||n>l)return c;var f=Math.abs(s===0?a:a/s);return Math.abs(a)>0&&f>=1.73&&n>u.scopeM1&&n<u.scopeM2?c=0:(Math.abs(a)===0||f<=.57)&&(c=n<u.scopeL?1:n>u.scopeR?2:3),c}},{key:"executeMove",value:function(n,o,a,s,u){switch(a){case 0:this.updateTime(n/s*this.config.scopeM);break;case 1:this.updateBrightness(o/u);break;case 2:D.os.isIos||this.updateVolume(o/u);break}}},{key:"endLastMove",value:function(n){var o=this,a=this.pos,s=this.player,u=this.config,l=(a.time-this.timeOffset)/1e3;switch(n){case 0:s.seek(Number(l).toFixed(1)),u.hideControlsEnd?s.blur():s.focus(),this.timer=setTimeout(function(){o.pos.time=0},500);break}this.changeAction(Ge.AUTO)}},{key:"checkIsRootTarget",value:function(n){var o=this.player.plugins||{};return o.progress&&o.progress.root.contains(n.target)?!1:o.start&&o.start.root.contains(n.target)||o.controls&&o.controls.root.contains(n.target)}},{key:"clickHandler",value:function(n){var o=this.player,a=this.config,s=this.playerConfig;if(!o.isPlaying){s.closeVideoClick||(this.emitUserAction("click","switch_play_pause"),o.play());return}!a.closedbClick||s.closeVideoClick?o.isActive?o.blur():o.focus():s.closeVideoClick||((o.isActive||a.focusVideoClick)&&(this.emitUserAction("click","switch_play_pause"),this.switchPlayPause()),o.focus())}},{key:"dbClickHandler",value:function(n){var o=this.config,a=this.player;!o.closedbClick&&a.isPlaying&&(this.emitUserAction("dblclick","switch_play_pause"),this.switchPlayPause())}},{key:"onClick",value:function(n){var o=this,a=this.player;Re(this,Pi[0],function(s,u){o.clickHandler(u.e)},{e:n,paused:a.paused})}},{key:"onDbClick",value:function(n){var o=this,a=this.player;Re(this,Pi[1],function(s,u){o.dbClickHandler(u.e)},{e:n,paused:a.paused})}},{key:"onPress",value:function(n){var o=this.pos,a=this.config,s=this.player;a.disablePress||(o.rate=this.player.playbackRate,this.emitUserAction("press","change_rate",{from:s.playbackRate,to:a.pressRate}),s.playbackRate=a.pressRate,this.changeAction(Ge.PLAYBACK))}},{key:"onPressEnd",value:function(n){var o=this.pos,a=this.config,s=this.player;a.disablePress||(this.emitUserAction("pressend","change_rate",{from:s.playbackRate,to:o.rate}),s.playbackRate=o.rate,o.rate=1,this.changeAction(Ge.AUTO))}},{key:"updateTime",value:function(n){var o=this.player,a=this.config,s=this.player.duration;n=Number(n.toFixed(4));var u=parseInt(n*a.moveDuration,10)+this.timeOffset;u+=this.pos.time,u=u<0?0:u>s*1e3?s*1e3-200:u,o.getPlugin("time")&&o.getPlugin("time").updateTime(u/1e3),o.getPlugin("progress")&&o.getPlugin("progress").updatePercent(u/1e3/this.duration,!0),this.activeSeekNote(u/1e3,n>0),a.isTouchingSeek&&o.seek(Number((u-this.timeOffset)/1e3).toFixed(1)),this.pos.time=u}},{key:"updateVolume",value:function(n){this.player.rotateDeg&&(n=-n);var o=this.player,a=this.pos;if(n=parseInt(n*100,10),a.volume+=n,!(Math.abs(a.volume)<10)){var s=parseInt(o.volume*10,10)-parseInt(a.volume/10,10);s=s>10?10:s<1?0:s,o.volume=s/10,a.volume=0}}},{key:"updateBrightness",value:function(n){this.player.rotateDeg&&(n=-n);var o=this.pos,a=this.config,s=this.xgMask,u=o.light+.8*n;u=u>a.maxDarkness?a.maxDarkness:u<0?0:u,s&&(s.style.backgroundColor="rgba(0,0,0,".concat(u,")")),o.light=u}},{key:"activeSeekNote",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=this.player,s=this.config,u=!(this.duration!==1/0&&this.duration>0);if(!(!n||typeof n!="number"||u||s.disableActive)){n<0?n=0:n>a.duration&&(n=a.duration-.2),this.changeAction(Ge.SEEKING);var l=a.plugins.start;l&&l.focusHide(),this.find(".xg-dur").innerHTML=h.format(this.duration),this.find(".xg-cur").innerHTML=h.format(n),this.find(".xg-curbar").style.width="".concat(n/this.duration*100,"%"),o?h.removeClass(this.find(".xg-seek-show"),"xg-back"):h.addClass(this.find(".xg-seek-show"),"xg-back"),this.updateThumbnails(n)}}},{key:"updateThumbnails",value:function(n){var o=this.player,a=o.plugins.thumbnail;a&&a.usable&&this.thumbnail&&a.update(this.thumbnail,n,160,90)}},{key:"switchPlayPause",value:function(){var n=this.player;if(n.hasStart)n.ended||(n.paused?n.play():n.pause());else return!1}},{key:"disableGesture",value:function(){this.config.disableGesture=!1}},{key:"enableGesture",value:function(){this.config.disableGesture=!0}},{key:"destroy",value:function(){var n=this.player;this.timer&&clearTimeout(this.timer),this.thumbnail=null,n.root.removeChild(this.xgMask),this.xgMask=null,this.touch&&this.touch.destroy(),this.touch=null,n.root.removeEventListener("touchmove",this.onRootTouchMove,!0),n.root.removeEventListener("touchend",this.onRootTouchEnd,!0)}},{key:"render",value:function(){var n=this.config.gradient!=="normal"?"gradient ".concat(this.config.gradient):"gradient";return`
     <xg-trigger class="trigger">
     <div class="`.concat(n,`"></div>
        <div class="time-preview">
            <div class="xg-seek-show `).concat(this.config.disableSeekIcon?" hide-seek-icon":"",`">
              <i class="xg-seek-icon"></i>
              <span class="xg-cur">00:00</span>
              <span>/</span>
              <span class="xg-dur">00:00</span>
            </div>
              <div class="xg-bar xg-timebar">
                <div class="xg-curbar"></div>
              </div>
        </div>
        <div class="xg-playbackrate xg-top-note">
            <span><i>`).concat(this.config.pressRate,"X</i>").concat(this.i18n.FORWARD,`</span>
        </div>
     </xg-trigger>
    `)}}],[{key:"pluginName",get:function(){return"mobile"}},{key:"defaultConfig",get:function(){return{stopPropagation:!0,index:0,disableGesture:!1,gestureX:!0,gestureY:!0,updateGesture:function(){},onTouchStart:function(){},onTouchEnd:function(){},gradient:"normal",isTouchingSeek:!1,miniMoveStep:5,miniYPer:5,scopeL:.25,scopeR:.25,scopeM:.9,pressRate:2,darkness:!0,maxDarkness:.8,disableActive:!1,disableTimeProgress:!1,hideControlsActive:!1,hideControlsEnd:!1,moveDuration:60*6*1e3,closedbClick:!1,disablePress:!0,disableSeekIcon:!1,focusVideoClick:!1}}}]),i}(F);function Kt(t){"@babel/helpers - typeof";return Kt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Kt(t)}function Ka(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Tm(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ka(Object(i),!0).forEach(function(r){xn(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ka(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Em(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ga(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ru(r.key),r)}}function Cm(t,e,i){return e&&Ga(t.prototype,e),i&&Ga(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Im(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Qi(t,e)}function Qi(t,e){return Qi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Qi(t,e)}function Rm(t){var e=xm();return function(){var r=Ir(t),n;if(e){var o=Ir(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return $m(this,n)}}function $m(t,e){if(e&&(Kt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xe(t)}function Xe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function xm(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ir(t){return Ir=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ir(t)}function xn(t,e,i){return e=Ru(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ru(t){var e=Lm(t,"string");return Kt(e)==="symbol"?e:String(e)}function Lm(t,e){if(Kt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Kt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Am(t){t.preventDefault(),t.returnValue=!1}function Wa(t){var e=t.tagName;return!!(e==="INPUT"||e==="TEXTAREA"||t.isContentEditable)}var Ya=function(t){Im(i,t);var e=Rm(i);function i(){var r;Em(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),xn(Xe(r),"onBodyKeyDown",function(s){if(r.player){var u=s||window.event,l=u.keyCode,c=Xe(r),f=c._keyState,d=c.player,p=r.config,y=p.disable,b=p.disableBodyTrigger,g=p.isIgnoreUserActive;if(y||b||!d.isUserActive&&!g||Wa(u.target)||!r.checkIsVisible()||u.metaKey||u.altKey||u.ctrlKey){f.isBodyKeyDown=!1;return}!s.repeat&&!f.isKeyDown&&((u.target===document.body||r.config.isGlobalTrigger&&!Wa(u.target))&&r.checkCode(l,!0)&&(f.isBodyKeyDown=!0),document.addEventListener("keyup",r.onBodyKeyUp)),f.isBodyKeyDown&&r.handleKeyDown(u)}}),xn(Xe(r),"onBodyKeyUp",function(s){r.player&&(document.removeEventListener("keyup",r.onBodyKeyUp),r.handleKeyUp(s))}),xn(Xe(r),"onKeydown",function(s){if(r.player){var u=s||window.event,l=Xe(r),c=l._keyState;if(!u.repeat){if(r.config.disable||r.config.disableRootTrigger||u.metaKey||u.altKey||u.ctrlKey||!r.player.isUserActive&&!r.config.isIgnoreUserActive)return;u&&(u.keyCode===37||r.checkCode(u.keyCode))&&(u.target===r.player.root||u.target===r.player.video||u.target===r.player.controls.el)&&(c.isKeyDown=!0),r.player.root.addEventListener("keyup",r.onKeyup)}c.isKeyDown&&r.handleKeyDown(u)}}),xn(Xe(r),"onKeyup",function(s){r.player&&(r.player.root.removeEventListener("keyup",r.onKeyup),r.handleKeyUp(s))}),r}return Cm(i,[{key:"mergekeyCodeMap",value:function(){var n=this,o=this.config.keyCodeMap;o&&Object.keys(o).map(function(a){n.keyCodeMap[a]?["keyCode","action","disable","pressAction","disablePress","isBodyTarget"].map(function(s){o[a][s]&&(n.keyCodeMap[a][s]=o[a][s])}):n.keyCodeMap[a]=o[a]})}},{key:"afterCreate",value:function(){this.config.disable=!this.playerConfig.keyShortcut;var n=typeof this.config.seekStep=="function"?this.config.seekStep(this.player):this.config.seekStep;!n||typeof n!="number"||(this.seekStep=n),this.keyCodeMap={space:{keyCode:32,action:"playPause",disable:!1,disablePress:!1,noBodyTarget:!1},up:{keyCode:38,action:"upVolume",disable:!1,disablePress:!1,noBodyTarget:!0},down:{keyCode:40,action:"downVolume",disable:!1,disablePress:!1,noBodyTarget:!0},left:{keyCode:37,action:"seekBack",disablePress:!1,disable:!1},right:{keyCode:39,action:"seek",pressAction:"changePlaybackRate",disablePress:!1,disable:!1},esc:{keyCode:27,action:"exitFullscreen",disablePress:!0,disable:!1}},this.mergekeyCodeMap(),this._keyState={isKeyDown:!1,isBodyKeyDown:!1,isPress:!1,tt:0,playbackRate:0},this.player.root.addEventListener("keydown",this.onKeydown),document.addEventListener("keydown",this.onBodyKeyDown)}},{key:"checkIsVisible",value:function(){if(!this.config.checkVisible)return!0;var n=this.player.root.getBoundingClientRect(),o=n.height,a=n.top,s=n.bottom,u=window.innerHeight;return!(a<0&&a<0-o*.9||s>0&&s-u>o*.9)}},{key:"checkCode",value:function(n,o){var a=this,s=!1;return Object.keys(this.keyCodeMap).map(function(u){a.keyCodeMap[u]&&n===a.keyCodeMap[u].keyCode&&!a.keyCodeMap[u].disable&&(s=!o||o&&!a.keyCodeMap[u].noBodyTarget)}),s}},{key:"downVolume",value:function(n){var o=this.player;if(!(o.volume<=0)){var a=parseFloat((o.volume-.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(n,"change_volume",{props:s}),a>=0?o.volume=a:o.volume=0}}},{key:"upVolume",value:function(n){var o=this.player;if(!(o.volume>=1)){var a=parseFloat((o.volume+.1).toFixed(1)),s={volume:{from:o.volume,to:a}};this.emitUserAction(n,"change_volume",{props:s}),a<=1?o.volume=a:o.volume=1}}},{key:"seek",value:function(n){var o=this.player,a=o.currentTime,s=o.duration,u=a,l=n.repeat&&this.seekStep>=4?parseInt(this.seekStep/2,10):this.seekStep;a+l<=s?u=a+l:u=s;var c={currentTime:{from:a,to:u}};this.emitUserAction(n,"seek",{props:c}),this.player.currentTime=u}},{key:"seekBack",value:function(n){var o=this.player.currentTime,a=n.repeat?parseInt(this.seekStep/2,10):this.seekStep,s=0;o-a>=0&&(s=o-a);var u={currentTime:{from:o,to:s}};this.emitUserAction(n,"seek",{props:u}),this.player.currentTime=s}},{key:"changePlaybackRate",value:function(n){var o=this._keyState,a=this.config,s=this.player;o.playbackRate===0&&(o.playbackRate=s.playbackRate,s.playbackRate=a.playbackRate)}},{key:"playPause",value:function(n){var o=this.player;o&&(this.emitUserAction(n,"switch_play_pause"),o.paused?o.play():o.pause())}},{key:"exitFullscreen",value:function(n){var o=this.player,a=o.fullscreen,s=o.cssfullscreen;a&&(this.emitUserAction("keyup","switch_fullscreen",{prop:"fullscreen",from:a,to:!a}),o.exitFullscreen()),s&&(this.emitUserAction("keyup","switch_css_fullscreen",{prop:"cssfullscreen",from:s,to:!s}),o.exitCssFullscreen())}},{key:"handleKeyDown",value:function(n){var o=this._keyState;if(n.repeat){o.isPress=!0;var a=Date.now();if(a-o.tt<200)return;o.tt=a}Am(n),this.handleKeyCode(n.keyCode,n,o.isPress)}},{key:"handleKeyUp",value:function(n){var o=this._keyState;o.playbackRate>0&&(this.player.playbackRate=o.playbackRate,o.playbackRate=0),o.isKeyDown=!1,o.isPress=!1,o.tt=0}},{key:"handleKeyCode",value:function(n,o,a){for(var s=Object.keys(this.keyCodeMap),u=0;u<s.length;u++){var l=this.keyCodeMap[s[u]];if(l){var c=l.action,f=l.keyCode,d=l.disable,p=l.pressAction,y=l.disablePress;if(f===n){if(!d&&!(a&&y)){var b=a&&p||c;typeof b=="function"?c(o,this.player,a):typeof b=="string"&&typeof this[b]=="function"&&this[b](o,this.player,a),this.emit(ru,Tm({key:s[u],target:o.target,isPress:a},this.keyCodeMap[s[u]]))}break}}}}},{key:"destroy",value:function(){this.player.root.removeEventListener("keydown",this.onKeydown),document.removeEventListener("keydown",this.onBodyKeyDown),this.player.root.removeEventListener("keyup",this.onKeyup),document.removeEventListener("keyup",this.onBodyKeyUp)}},{key:"disable",value:function(){this.config.disable=!0}},{key:"enable",value:function(){this.config.disable=!1}}],[{key:"pluginName",get:function(){return"keyboard"}},{key:"defaultConfig",get:function(){return{seekStep:10,checkVisible:!1,disableBodyTrigger:!1,disableRootTrigger:!1,isGlobalTrigger:!1,keyCodeMap:{},disable:!1,playbackRate:2,isIgnoreUserActive:!1}}}]),i}(rt);function Gt(t){"@babel/helpers - typeof";return Gt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Gt(t)}function Dm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Xa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Mm(r.key),r)}}function Nm(t,e,i){return e&&Xa(t.prototype,e),i&&Xa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mm(t){var e=jm(t,"string");return Gt(e)==="symbol"?e:String(e)}function jm(t,e){if(Gt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Gt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Zi(t,e)}function Zi(t,e){return Zi=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Zi(t,e)}function Fm(t){var e=Um();return function(){var r=Rr(t),n;if(e){var o=Rr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Hm(this,n)}}function Hm(t,e){if(e&&(Gt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Vm(t)}function Vm(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Um(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Rr(t){return Rr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Rr(t)}var zm='<svg xmlns="http://www.w3.org/2000/svg" width="100" height="100" viewBox="-5 -5 110 110"><path d="M100 50A50 50 0 1150 0" stroke-width="5" stroke="#ddd" stroke-dasharray="236" fill="none"/></svg>',Km=function(t){Bm(i,t);var e=Fm(i);function i(){return Dm(this,i),e.apply(this,arguments)}return Nm(i,[{key:"registerIcons",value:function(){return{loadingIcon:zm}}},{key:"afterCreate",value:function(){this.appendChild("xg-loading-inner",this.icons.loadingIcon)}},{key:"render",value:function(){return`
    <xg-loading class="xgplayer-loading">
      <xg-loading-inner></xg-loading-inner>
    </xg-loading>`}}],[{key:"pluginName",get:function(){return"loading"}},{key:"defaultConfig",get:function(){return{position:W.ROOT}}}]),i}(F);function Wn(t){"@babel/helpers - typeof";return Wn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wn(t)}function Gm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Wm(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xm(r.key),r)}}function Ym(t,e,i){return e&&Wm(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function Xm(t){var e=qm(t,"string");return Wn(e)==="symbol"?e:String(e)}function qm(t,e){if(Wn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Wn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var Jm=[{tag:"xg-cache",className:"xgplayer-progress-cache",styleKey:"cachedColor"},{tag:"xg-played",className:"xgplayer-progress-played",styleKey:"playedColor"}],Qm=function(){function t(e){Gm(this,t),this.fragments=e.fragments||[],this.fragments.length===0&&this.fragments.push({percent:1}),this._callBack=e.actionCallback,this.fragConfig={fragFocusClass:e.fragFocusClass||"inner-focus-point",fragAutoFocus:!!e.fragAutoFocus,fragClass:e.fragClass||""},this.style=e.style||{playedColor:"",cachedColor:"",progressColor:""},this.duration=0,this.cachedIndex=0,this.playedIndex=0,this.focusIndex=-1}return Ym(t,[{key:"updateDuration",value:function(i){var r=this;this.duration=i;var n=0,o=this.fragments;this.fragments=o.map(function(a){return a.start=parseInt(n,10),a.end=parseInt(n+a.percent*r.duration,10),a.duration=parseInt(a.percent*r.duration,10),n+=a.percent*r.duration,a})}},{key:"updateProgress",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"played",r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{newIndex:0,curIndex:0,millisecond:0},n=this.progressList,o=this.fragments;if(!(n.length<1)){var a=r.newIndex,s=r.curIndex,u=r.millisecond;a!==s&&n.map(function(f,d){d<a?f[i].style.width="100%":d>a&&(f[i].style.width=0)});var l=o[a],c=u===0?0:(u-l.start)/l.duration;n[a][i].style.width=c<0?0:"".concat(c*100,"%")}}},{key:"updateFocus",value:function(i){if(!(!this.fragConfig.fragAutoFocus||this.fragments.length<2)){if(!i){if(this.focusIndex>-1){this.unHightLight(this.focusIndex);var r={index:-1,preIndex:this.focusIndex,fragment:null};this._callBack&&this._callBack(r),this.focusIndex=-1}return}var n=this.findIndex(i.currentTime*1e3,this.focusIndex);if(n>=0&&n!==this.focusIndex){this.focusIndex>-1&&this.unHightLight(this.focusIndex),this.setHightLight(n);var o={index:n,preIndex:this.focusIndex,fragment:this.fragments[this.focusIndex]};this.focusIndex=n,this._callBack&&this._callBack(o)}}}},{key:"update",value:function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},r=arguments.length>1?arguments[1]:void 0;if(!this.duration||parseInt(r*1e3,10)!==this.duration){if(!r&&r!==0)return;this.updateDuration(parseInt(r*1e3,10))}var n=this.playedIndex,o=this.cachedIndex;if(h.typeOf(i.played)!=="Undefined"){var a=this.findIndex(i.played*1e3,n);if(a<0)return;this.updateProgress("played",{newIndex:a,curIndex:n,millisecond:parseInt(i.played*1e3,10)}),this.playedIndex=a}if(h.typeOf(i.cached)!=="Undefined"){var s=this.findIndex(i.cached*1e3,o);if(s<0)return;this.updateProgress("cached",{newIndex:s,curIndex:o,millisecond:parseInt(i.cached*1e3,10)}),this.cachedIndex=s}}},{key:"findIndex",value:function(i,r){var n=this.fragments;if(!n||n.length===0)return-1;if(n.length===1)return 0;if(r>-1&&r<n.length&&i>n[r].start&&i<n[r].end)return r;if(i>n[n.length-1].start)return n.length-1;for(var o=0;o<n.length;o++)if(i>n[o].start&&i<=n[o].end){r=o;break}return r}},{key:"findHightLight",value:function(){for(var i=this.root.children,r=0;r<i.length;r++)if(h.hasClass(i[r],this.fragConfig.fragFocusClass))return{dom:i[r],pos:i[r].getBoundingClientRect()}}},{key:"findFragment",value:function(i){var r=this.root.children;return i<0||i>=r.length?null:{dom:r[i],pos:r[i].getBoundingClientRect()}}},{key:"unHightLight",value:function(){for(var i=this.root.children,r=0;r<i.length;r++)h.removeClass(i[r],this.fragConfig.fragFocusClass)}},{key:"setHightLight",value:function(i){var r=this.root.children;if(i<r.length)return h.addClass(r[i],this.fragConfig.fragFocusClass),{dom:r[i],pos:r[i].getBoundingClientRect()}}},{key:"destroy",value:function(){this.progressList=null,this.fragments=null,this.root.innerHTML=""}},{key:"reset",value:function(i){var r=this;if(Object.keys(this.fragConfig).forEach(function(o){i[o]!==void 0&&(r.fragConfig[o]=i[o])}),i.fragments){if(this.fragments=i.fragments.length===0?[{percent:1}]:i.fragments,this.updateDuration(this.duration),this.playedIndex=0,this.cachedIndex=0,this.root)for(var n=this.root.children;n.length>0;)this.root.removeChild(n[0]);this.render()}}},{key:"render",value:function(){var i=this,r=this.style.progressColor;if(this.root||(this.root=h.createDom("xg-inners","",{},"progress-list")),this.fragments){var n=this.fragConfig,o=n.fragClass,a=n.fragFocusClass;this.progressList=this.fragments.map(function(s){var u=h.createDom("xg-inner","",{style:r?"background:".concat(r,"; flex: ").concat(s.percent):"flex: ".concat(s.percent)},"".concat(s.isFocus?a:""," xgplayer-progress-inner ").concat(o));return i.root.appendChild(u),Jm.forEach(function(l){u.appendChild(h.createDom(l.tag,"",{style:l.styleKey?"background: ".concat(i.style[l.styleKey],"; width:0;"):"width:0;"},l.className))}),{cached:u.children[0],played:u.children[1]}})}return this.root}}]),t}();function ot(t){"@babel/helpers - typeof";return ot=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ot(t)}function qa(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Ja(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?qa(Object(i),!0).forEach(function(r){te(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):qa(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function Zm(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Qa(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,$u(r.key),r)}}function eb(t,e,i){return e&&Qa(t.prototype,e),i&&Qa(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function tb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&eo(t,e)}function eo(t,e){return eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},eo(t,e)}function nb(t){var e=ib();return function(){var r=$r(t),n;if(e){var o=$r(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rb(this,n)}}function rb(t,e){if(e&&(ot(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Y(t)}function Y(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function ib(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $r(t){return $r=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},$r(t)}function te(t,e,i){return e=$u(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function $u(t){var e=ob(t,"string");return ot(e)==="symbol"?e:String(e)}function ob(t,e){if(ot(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(ot(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Za={POINT:"inner-focus-point",HIGHLIGHT:"inner-focus-highlight"},ab=function(t){tb(i,t);var e=nb(i);function i(r){var n;return Zm(this,i),n=e.call(this,r),te(Y(n),"onMoveOnly",function(o,a){var s=Y(n),u=s.pos,l=s.config,c=s.player,f=a;if(o){h.event(o);var d=h.getEventPos(o,c.zoom),p=c.rotateDeg===90?d.clientY:d.clientX;if(u.moving&&Math.abs(u.x-p)<l.miniMoveStep)return;u.moving=!0,u.x=p,f=n.computeTime(o,p)}n.triggerCallbacks("dragmove",f,o),n._updateInnerFocus(f)}),te(Y(n),"onBodyClick",function(o){o.preventDefault(),o.stopPropagation()}),te(Y(n),"_mouseDownHandler",function(o,a){n._state.time=a.currentTime,n.updateWidth(a.currentTime,a.percent,0),n._updateInnerFocus(a)}),te(Y(n),"_mouseUpHandler",function(o,a){var s=Y(n),u=s.pos;u.moving&&n.updateWidth(a.currentTime,a.percent,2)}),te(Y(n),"_mouseMoveHandler",function(o,a){var s=Y(n),u=s._state,l=s.pos,c=s.config,f=s.player;u.time<a.currentTime?a.forward=!0:a.forward=!1,u.time=a.currentTime,l.isDown&&!l.moving&&(l.moving=!0,c.isPauseMoving&&f.pause(),n.triggerCallbacks("dragstart",a,o),n.emitUserAction("drag","dragstart",a)),n.updateWidth(a.currentTime,a.percent,1),n.triggerCallbacks("dragmove",a,o),n._updateInnerFocus(a)}),te(Y(n),"onMouseDown",function(o){var a=Y(n),s=a._state,u=a.player,l=a.pos,c=a.config,f=a.playerConfig,d=h.getEventPos(o,u.zoom),p=u.rotateDeg===90?d.clientY:d.clientX;if(!(u.isMini||c.closeMoveSeek||!f.allowSeekAfterEnded&&u.ended)){o.stopPropagation(),n.focus(),h.checkIsFunction(f.disableSwipeHandler)&&f.disableSwipeHandler(),h.checkIsFunction(c.onMoveStart)&&c.onMoveStart(),h.event(o),l.x=p,l.isDown=!0,l.moving=!1,s.prePlayTime=u.currentTime,u.focus({autoHide:!1}),n.isProgressMoving=!0,h.addClass(n.progressBtn,"active");var y=n.computeTime(o,p);y.prePlayTime=s.prePlayTime,n._mouseDownHandlerHook(o,y);var b=o.type;return b==="touchstart"?(n.root.addEventListener("touchmove",n.onMouseMove),n.root.addEventListener("touchend",n.onMouseUp),n.root.addEventListener("touchcancel",n.onMouseUp)):(n.unbind("mousemove",n.onMoveOnly),document.addEventListener("mousemove",n.onMouseMove,!1),document.addEventListener("mouseup",n.onMouseUp,!1),u.root.addEventListener("click",n.onBodyClick,!1)),!0}}),te(Y(n),"onMouseUp",function(o){var a=Y(n),s=a.player,u=a.config,l=a.pos,c=a.playerConfig,f=a._state;o.stopPropagation(),o.preventDefault(),h.checkIsFunction(c.enableSwipeHandler)&&c.enableSwipeHandler(),h.checkIsFunction(u.onMoveEnd)&&u.onMoveEnd(),h.event(o),h.removeClass(n.progressBtn,"active");var d=n.computeTime(o,l.x);d.prePlayTime=f.prePlayTime,l.moving?(n.triggerCallbacks("dragend",d,o),n.emitUserAction("drag","dragend",d)):(n.triggerCallbacks("click",d,o),n.emitUserAction("click","click",d)),n._mouseUpHandlerHook(o,d),l.moving=!1,l.isDown=!1,l.x=0,l.y=0,f.prePlayTime=0,f.time=0;var p=o.type;p==="touchend"||p==="touchcancel"?(n.root.removeEventListener("touchmove",n.onMouseMove),n.root.removeEventListener("touchend",n.onMouseUp),n.root.removeEventListener("touchcancel",n.onMouseUp),n.blur()):(document.removeEventListener("mousemove",n.onMouseMove,!1),document.removeEventListener("mouseup",n.onMouseUp,!1),s.root.removeEventListener("click",n.onBodyClick,!1),l.isEnter?c.isMobileSimulateMode!=="mobile"&&n.bind("mousemove",n.onMoveOnly):n.onMouseLeave(o)),h.setTimeout(Y(n),function(){n.resetSeekState()},10),s.focus()}),te(Y(n),"onMouseMove",function(o){var a=Y(n),s=a._state,u=a.pos,l=a.player,c=a.config;h.checkTouchSupport()&&o.preventDefault(),h.event(o);var f=h.getEventPos(o,l.zoom),d=l.rotateDeg===90?f.clientY:f.clientX,p=Math.abs(u.x-d);if(!(u.moving&&p<c.miniMoveStep||!u.moving&&p<c.miniStartStep)){u.x=d;var y=n.computeTime(o,d);y.prePlayTime=s.prePlayTime,n._mouseMoveHandlerHook(o,y)}}),te(Y(n),"onMouseOut",function(o){n.triggerCallbacks("mouseout",null,o)}),te(Y(n),"onMouseOver",function(o){n.triggerCallbacks("mouseover",null,o)}),te(Y(n),"onMouseEnter",function(o){var a=Y(n),s=a.player,u=a.pos;if(!(u.isDown||u.isEnter||s.isMini||!s.config.allowSeekAfterEnded&&s.ended)){u.isEnter=!0,n.bind("mousemove",n.onMoveOnly),n.bind("mouseleave",n.onMouseLeave),h.event(o);var l=h.getEventPos(o,s.zoom),c=s.rotateDeg===90?l.clientY:l.clientX,f=n.computeTime(o,c);n.triggerCallbacks("mouseenter",f,o),n.focus()}}),te(Y(n),"onMouseLeave",function(o){n.triggerCallbacks("mouseleave",null,o),n.unlock(),n._updateInnerFocus(null)}),te(Y(n),"onVideoResize",function(){var o=n.pos,a=o.x,s=o.isDown,u=o.isEnter;if(u&&!s){var l=n.computeTime(null,a);n.onMoveOnly(null,l)}}),n.useable=!1,n.isProgressMoving=!1,n.__dragCallBacks=[],n._state={now:-1,direc:0,time:0,prePlayTime:-1},n._disableBlur=!1,n}return eb(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"changeState",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.useable=n}},{key:"beforeCreate",value:function(n){typeof n.player.config.progress=="boolean"&&(n.config.disable=!n.player.config.progress)}},{key:"_initInner",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};(!o||o.length===0)&&(o=[{percent:1}]);var s=Ja(Ja({fragments:o},a),{},{actionCallback:function(l){n.emitUserAction("fragment_focus","fragment_focus",l)}});this.innerList?this.innerList.reset(s):(this.innerList=new Qm(s),this.outer.insertBefore(this.innerList.render(),this.outer.children[0]),["findHightLight","unHightLight","setHightLight","findFragment"].map(function(u){n[u]=n.innerList[u].bind(n.innerList)}))}},{key:"_updateInnerFocus",value:function(n){this.innerList&&this.innerList.updateFocus(n)}},{key:"afterCreate",value:function(){var n=this;if(!(this.config.disable||this.playerConfig.isLive)){this.pos={x:0,y:0,moving:!1,isDown:!1,isEnter:!1},this.outer=this.find("xg-outer");var o=this.config,a=o.fragFocusClass,s=o.fragAutoFocus,u=o.fragClass;this._initInner(this.config.fragments,{fragFocusClass:a,fragAutoFocus:s,fragClass:u,style:this.playerConfig.commonStyle||{}}),D.device==="mobile"&&(this.config.isDragingSeek=!1,this.isMobile=!0),this.progressBtn=this.find(".xgplayer-progress-btn"),this.on(Sn,function(){n.onMouseLeave()}),this.on(ye,function(){n.onTimeupdate()}),this.on(xe,function(){n.onTimeupdate(),n.onCacheUpdate()}),this.on(Qs,function(){n.onCacheUpdate()}),this.on(ze,function(){n.onCacheUpdate(!0),n.onTimeupdate(!0),n._state.now=0}),this.on(kn,function(){n.onReset()}),this.on(Rt,function(){n.onVideoResize()}),this.bindDomEvents(),this.initCustomStyle()}}},{key:"setConfig",value:function(n){var o=this,a=null;Object.keys(n).forEach(function(s){o.config[s]=n[s],s==="fragments"&&(a=n[s])}),a&&this._initInner(a,n)}},{key:"initCustomStyle",value:function(){var n=this.playerConfig||{},o=n.commonStyle,a=o.sliderBtnStyle,s=this.progressBtn;a&&(typeof a=="string"?s.style.boxShadow=a:ot(a)==="object"&&Object.keys(a).map(function(u){s.style[u]=a[u]}))}},{key:"triggerCallbacks",value:function(n,o,a){this.__dragCallBacks.length>0&&this.__dragCallBacks.map(function(s){if(s&&s.handler&&s.type===n)try{s.handler(o,a)}catch(u){console.error("[XGPLAYER][triggerCallbacks] ".concat(s," error"),u)}})}},{key:"addCallBack",value:function(n,o){o&&typeof o=="function"&&this.__dragCallBacks.push({type:n,handler:o})}},{key:"removeCallBack",value:function(n,o){var a=this.__dragCallBacks,s=-1;a.map(function(u,l){u&&u.type===n&&u.handler===o&&(s=l)}),s>-1&&a.splice(s,1)}},{key:"unlock",value:function(){var n=this.player,o=this.pos;if(o.isEnter=!1,!n.isMini){if(this.unbind("mousemove",this.onMoveOnly),o.isDown){this.unbind("mouseleave",this.onMouseLeave);return}this.blur()}}},{key:"bindDomEvents",value:function(){var n=this.player,o=n.controls,a=n.config;this._mouseDownHandlerHook=this.hook("dragstart",this._mouseDownHandler),this._mouseUpHandlerHook=this.hook("dragend",this._mouseUpHandler),this._mouseMoveHandlerHook=this.hook("drag",this._mouseMoveHandler),(this.domEventType==="touch"||this.domEventType==="compatible")&&(this.root.addEventListener("touchstart",this.onMouseDown),o&&(o.root&&o.root.addEventListener("touchmove",h.stopPropagation),o.center&&o.center.addEventListener("touchend",h.stopPropagation))),(this.domEventType==="mouse"||this.domEventType==="compatible")&&(this.bind("mousedown",this.onMouseDown),a.isMobileSimulateMode!=="mobile"&&this.bind("mouseenter",this.onMouseEnter),this.bind("mouseover",this.onMouseOver),this.bind("mouseout",this.onMouseOut))}},{key:"focus",value:function(){this.player.controls.pauseAutoHide(),h.addClass(this.root,"active")}},{key:"blur",value:function(){this._disableBlur||(this.player.controls.recoverAutoHide(),h.removeClass(this.root,"active"))}},{key:"disableBlur",value:function(){this._disableBlur=!0}},{key:"enableBlur",value:function(){this._disableBlur=!1}},{key:"updateWidth",value:function(n,o,a){var s=this.config,u=this.player;if(!(s.isCloseClickSeek&&a===0)){var l=n>=u.duration?u.duration-s.endedDiff:Number(n).toFixed(1);this.updatePercent(o),this.updateTime(n),!(a===1&&(!s.isDragingSeek||u.videoConfig.mediaType==="audio"))&&(this._state.now=l,this._state.direc=l>u.currentTime?0:1,u.seek(l))}}},{key:"computeTime",value:function(n,o){var a=this.player,s=this.root.getBoundingClientRect(),u=s.width,l=s.height,c=s.top,f=s.left,d,p,y=o;a.rotateDeg===90?(d=l,p=c):(d=u,p=f);var b=y-p;b=b>d?d:b<0?0:b;var g=b/d;g=g<0?0:g>1?1:g;var T=parseInt(g*this.duration*1e3,10)/1e3;return{percent:g,currentTime:T,offset:b,width:d,left:p,e:n}}},{key:"updateTime",value:function(n){var o=this.player,a=this.duration;n>a?n=a:n<0&&(n=0);var s=o.plugins.time;s&&s.updateTime(n)}},{key:"resetSeekState",value:function(){this.isProgressMoving=!1;var n=this.player.plugins.time;n&&n.resetActive()}},{key:"updatePercent",value:function(n,o){if(this.isProgressMoving=!0,!this.config.disable){n=n>1?1:n<0?0:n,this.progressBtn.style.left="".concat(n*100,"%"),this.innerList.update({played:n*this.duration},this.duration);var a=this.player.plugins.miniprogress;a&&a.update({played:n*this.duration},this.duration)}}},{key:"onTimeupdate",value:function(n){var o=this.player,a=this._state,s=this.duration;if(!(o.isSeeking&&o.video.seeking||this.isProgressMoving||!o.hasStart)){if(a.now>-1){var u=parseInt(a.now*1e3,10)-parseInt(o.currentTime*1e3,10);if(a.direc===0&&u>300||a.direc===1&&u>-300){a.now=-1;return}else a.now=-1}var l=this.timeOffset+o.currentTime;l=h.adjustTimeByDuration(l,s,n),this.innerList.update({played:l},s),this.progressBtn.style.left="".concat(l/s*100,"%");var c=this.player.plugins.miniprogress;c&&c.update({played:l},s)}}},{key:"onCacheUpdate",value:function(n){var o=this.player,a=this.duration;if(o){var s=o.bufferedPoint.end;s=h.adjustTimeByDuration(s,a,n),this.innerList.update({cached:s},a);var u=this.player.plugins.miniprogress;u&&u.update({cached:s},a)}}},{key:"onReset",value:function(){this.innerList.update({played:0,cached:0},0);var n=this.player.plugins.miniprogress;n&&n.update({cached:0,played:0},0)}},{key:"destroy",value:function(){var n=this.player,o=n.controls;this.thumbnailPlugin=null,this.innerList.destroy(),this.innerList=null;var a=this.domEventType;(a==="touch"||a==="compatible")&&(this.root.removeEventListener("touchstart",this.onMouseDown),this.root.removeEventListener("touchmove",this.onMouseMove),this.root.removeEventListener("touchend",this.onMouseUp),o&&(o.root&&o.root.removeEventListener("touchmove",h.stopPropagation),o.center&&o.center.removeEventListener("touchend",h.stopPropagation))),(a==="mouse"||a==="compatible")&&(this.unbind("mousedown",this.onMouseDown),this.unbind("mouseenter",this.onMouseEnter),this.unbind("mousemove",this.onMoveOnly),this.unbind("mouseleave",this.onMouseLeave),document.removeEventListener("mousemove",this.onMouseMove,!1),document.removeEventListener("mouseup",this.onMouseUp,!1),n.root.removeEventListener("click",this.onBodyClick,!1))}},{key:"render",value:function(){if(!(this.config.disable||this.playerConfig.isLive)){var n=this.player.controls?this.player.controls.config.mode:"",o=n==="bottom"?"xgplayer-progress-bottom":"";return`
    <xg-progress class="xgplayer-progress `.concat(o,`">
      <xg-outer class="xgplayer-progress-outer">
        <xg-progress-btn class="xgplayer-progress-btn"></xg-progress-btn>
      </xg-outer>
    </xg-progress>
    `)}}}],[{key:"pluginName",get:function(){return"progress"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_CENTER,index:0,disable:!1,isDragingSeek:!0,closeMoveSeek:!1,isPauseMoving:!1,isCloseClickSeek:!1,fragments:[{percent:1}],fragFocusClass:Za.POINT,fragClass:"",fragAutoFocus:!1,miniMoveStep:5,miniStartStep:2,onMoveStart:function(){},onMoveEnd:function(){},endedDiff:.2}}},{key:"FRAGMENT_FOCUS_CLASS",get:function(){return Za}}]),i}(F);function Wt(t){"@babel/helpers - typeof";return Wt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Wt(t)}function sb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ub(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,xu(r.key),r)}}function lb(t,e,i){return e&&ub(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function cb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&to(t,e)}function to(t,e){return to=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},to(t,e)}function fb(t){var e=db();return function(){var r=xr(t),n;if(e){var o=xr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return hb(this,n)}}function hb(t,e){if(e&&(Wt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return no(t)}function no(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function db(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function xr(t){return xr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},xr(t)}function es(t,e,i){return e=xu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xu(t){var e=pb(t,"string");return Wt(e)==="symbol"?e:String(e)}function pb(t,e){if(Wt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Wt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vt=function(t){cb(i,t);var e=fb(i);function i(){var r;sb(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),es(no(r),"_onMouseenter",function(s){r.emit("icon_mouseenter",{pluginName:r.pluginName})}),es(no(r),"_onMouseLeave",function(s){r.emit("icon_mouseleave",{pluginName:r.pluginName})}),r}return lb(i,[{key:"afterCreate",value:function(){this.bind("mouseenter",this._onMouseenter),this.bind("mouseleave",this._onMouseLeave),this.config.disable&&this.disable()}},{key:"destroy",value:function(){this.unbind("mouseenter",this._onMouseenter),this.unbind("mouseleave",this._onMouseLeave)}}]),i}(F);function Yt(t){"@babel/helpers - typeof";return Yt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yt(t)}function vb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ts(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Lu(r.key),r)}}function yb(t,e,i){return e&&ts(t.prototype,e),i&&ts(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Dn(){return typeof Reflect<"u"&&Reflect.get?Dn=Reflect.get.bind():Dn=function(e,i,r){var n=gb(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Dn.apply(this,arguments)}function gb(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=at(t),t!==null););return t}function mb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ro(t,e)}function ro(t,e){return ro=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ro(t,e)}function bb(t){var e=Pb();return function(){var r=at(t),n;if(e){var o=at(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return _b(this,n)}}function _b(t,e){if(e&&(Yt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return io(t)}function io(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Pb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function at(t){return at=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},at(t)}function wb(t,e,i){return e=Lu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Lu(t){var e=Sb(t,"string");return Yt(e)==="symbol"?e:String(e)}function Sb(t,e){if(Yt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Yt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var kb='<svg class="play" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M18.468 11.639l7.503 4.777-7.503 4.777zM10.965 6.86l7.503 4.778v9.554l-7.503 4.778z"/></svg>',Ob='<svg class="pause" xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="3 -4 28 40"><path fill="#fff" d="M19.173 6.861h5.451v19.11h-5.45V6.86zM8.208 25.971V6.86h5.45v19.11h-5.45z"/></svg>',Tb=function(t){mb(i,t);var e=bb(i);function i(){var r;vb(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),wb(io(r),"btnClick",function(s){var u=io(r),l=u.player,c=u.config;if(!c.disable)return s.preventDefault(),s.stopPropagation(),r.emitUserAction(s,"switch_play_pause"),l.ended?l.replay():l.paused&&!l.isBufferControlPaused?(l.play(),r.animate(!1)):(l.pause(),r.animate(!0)),!1}),r}return yb(i,[{key:"afterCreate",value:function(){var n=this;Dn(at(i.prototype),"afterCreate",this).call(this);var o=this.player;this._isPaused=!1,this.initIcons(),this.bind(["touchend","click"],this.btnClick),this.on([pt,kn,be],function(){n.animate(o.paused)}),this.on(Tt,function(){n.animate(o.paused)}),this.animate(!0)}},{key:"registerIcons",value:function(){return{play:{icon:kb,class:"xg-icon-play"},pause:{icon:Ob,class:"xg-icon-pause"}}}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(".xgplayer-icon",n.play),this.appendChild(".xgplayer-icon",n.pause)}},{key:"animate",value:function(n){var o=this.i18nKeys,a=this.player;n&&a.isBufferControlPaused||(n?(this.setAttr("data-state","pause"),this.changeLangTextKey(this.find(".xg-tips"),o.PLAY_TIPS)):(this.setAttr("data-state","play"),this.changeLangTextKey(this.find(".xg-tips"),o.PAUSE_TIPS)))}},{key:"destroy",value:function(){Dn(at(i.prototype),"destroy",this).call(this),this.unbind(["touchend","click"],this.btnClick)}},{key:"render",value:function(){return`<xg-icon class="xgplayer-play">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PLAY_TIPS,'">').concat(this.i18n.PLAY_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"play"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_LEFT,index:0,disable:!1}}}]),i}(vt);function Xt(t){"@babel/helpers - typeof";return Xt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Xt(t)}function Eb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ns(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ib(r.key),r)}}function Cb(t,e,i){return e&&ns(t.prototype,e),i&&ns(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ib(t){var e=Rb(t,"string");return Xt(e)==="symbol"?e:String(e)}function Rb(t,e){if(Xt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Xt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function $b(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&oo(t,e)}function oo(t,e){return oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},oo(t,e)}function xb(t){var e=Db();return function(){var r=Lr(t),n;if(e){var o=Lr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Lb(this,n)}}function Lb(t,e){if(e&&(Xt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ab(t)}function Ab(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Db(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Lr(t){return Lr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Lr(t)}var Nb='<svg width="32" height="40" viewBox="0 0 32 32" xmlns="http://www.w3.org/2000/svg"><path d="M11.237 14l6.382-6.381A.875.875 0 1016.38 6.38l-7 7a.875.875 0 000 1.238l7 7a.875.875 0 101.238-1.238L11.237 14z" fill="#FFF" fill-rule="evenodd"/></svg>',Mb=function(t){$b(i,t);var e=xb(i);function i(){return Eb(this,i),e.apply(this,arguments)}return Cb(i,[{key:"afterCreate",value:function(){var n=this;this.initIcons(),this.onClick=function(o){o.preventDefault(),o.stopPropagation(),n.config.onClick(o)},this.bind(["click","touchend"],this.onClick)}},{key:"registerIcons",value:function(){return{screenBack:{icon:Nb,class:"xg-fullscreen-back"}}}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(this.root,n.screenBack)}},{key:"show",value:function(){h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"render",value:function(){return`<xg-icon class="xgplayer-back">
    </xg-icon>`}}],[{key:"pluginName",get:function(){return"topbackicon"}},{key:"defaultConfig",get:function(){return{position:W.ROOT_TOP,index:0}}}]),i}(F);function qt(t){"@babel/helpers - typeof";return qt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},qt(t)}function jb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function rs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Du(r.key),r)}}function Bb(t,e,i){return e&&rs(t.prototype,e),i&&rs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Ze(){return typeof Reflect<"u"&&Reflect.get?Ze=Reflect.get.bind():Ze=function(e,i,r){var n=Fb(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ze.apply(this,arguments)}function Fb(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=$e(t),t!==null););return t}function Hb(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ao(t,e)}function ao(t,e){return ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ao(t,e)}function Vb(t){var e=zb();return function(){var r=$e(t),n;if(e){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Ub(this,n)}}function Ub(t,e){if(e&&(qt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Au(t)}function Au(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function zb(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function $e(t){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},$e(t)}function Kb(t,e,i){return e=Du(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Du(t){var e=Gb(t,"string");return qt(e)==="symbol"?e:String(e)}function Gb(t,e){if(qt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(qt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Wb='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M19.173 6.861h6.798v6.798h-2.694V9.555h-4.104V6.86zm4.104 16.416v-4.104h2.694v6.798h-6.798v-2.694h4.104zM6.861 13.66V6.86h6.798v2.694H9.555v4.104H6.86zm2.694 5.514v4.104h4.104v2.694H6.86v-6.798h2.694z"/></svg>',Yb='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="2 -4 28 40"><path fill="#fff" d="M21.867 10.965h4.104v2.694h-6.798V6.86h2.694v4.104zm-2.694 15.006v-6.798h6.798v2.694h-4.104v4.104h-2.694zm-8.208-15.006V6.861h2.694v6.798H6.86v-2.694h4.104zM6.861 21.867v-2.694h6.798v6.798h-2.694v-4.104H6.861z"/></svg>',Xb=function(t){Hb(i,t);var e=Vb(i);function i(){var r;jb(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Kb(Au(r),"_onOrientationChange",function(s){r.player.fullscreen&&r.config.rotateFullscreen&&(window.orientation===90||window.orientation===-90?r.setRotateDeg(0):r.setRotateDeg(90))}),r}return Bb(i,[{key:"afterCreate",value:function(){var n=this;Ze($e(i.prototype),"afterCreate",this).call(this);var o=this.config,a=this.playerConfig;o.target&&(this.playerConfig.fullscreenTarget=this.config.target);var s=h.getFullScreenEl();a.fullscreenTarget===s&&this.player.getFullscreen().catch(function(){}),this.initIcons(),this.handleFullscreen=this.hook("fullscreen_change",this.changeFullScreen,{pre:function(l){n.config.disable||n.emitUserAction(l,"switch_fullscreen",{fullscreen:n.player.fullscreen})}}),this.bind(".xgplayer-fullscreen",["touchend","click"],this.handleFullscreen),this.on(je,function(u){n.changeLangTextKey(n.find(".xg-tips"),u?n.i18nKeys.EXITFULLSCREEN_TIPS:n.i18nKeys.FULLSCREEN_TIPS),n.animate(u),n.config.needBackIcon&&n.show()}),this.config.needBackIcon&&(this.topBackIcon=this.player.registerPlugin({plugin:Mb,options:{config:{onClick:function(l){n.handleFullscreen(l)}}}})),D.device==="mobile"&&window.addEventListener("orientationchange",this._onOrientationChange)}},{key:"registerIcons",value:function(){return{fullscreen:{icon:Wb,class:"xg-get-fullscreen"},exitFullscreen:{icon:Yb,class:"xg-exit-fullscreen"}}}},{key:"destroy",value:function(){Ze($e(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",D.device==="mobile"?"touchend":"click",this.handleFullscreen),D.device==="mobile"&&window.removeEventListener("orientationchange",this._onOrientationChange)}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(".xgplayer-icon",n.fullscreen),this.appendChild(".xgplayer-icon",n.exitFullscreen)}},{key:"setRotateDeg",value:function(n){var o=this.player;window.orientation===90||window.orientation===-90?o.rotateDeg=0:o.rotateDeg=n}},{key:"getRotateFullscreen",value:function(n){var o=this.player;o.isCssfullScreen&&o.exitCssFullscreen(n);var a=n?k.INNER_FULLSCREEN:k.ROTATE_FULLSCREEN;o._fullscreenEl=n||o.root,o.changeFullStyle(o.root,n,a,k.PARENT_ROTATE_FULLSCREEN),o.fullscreen=!0,this.setRotateDeg(90),this.emit(je,!0)}},{key:"exitRotateFullscreen",value:function(n){var o=this.player;o.fullscreen=!1;var a=o._fullscreenEl!==o.root?k.INNER_FULLSCREEN:k.ROTATE_FULLSCREEN;o.recoverFullStyle(o.root,o._fullscreenEl,a,k.PARENT_ROTATE_FULLSCREEN),this.setRotateDeg(0),this.emit(je,!1)}},{key:"changeFullScreen",value:function(n){var o=this.player,a=this.config;if(!a.disable){n&&(n.preventDefault(),n.stopPropagation());var s=!1;if((a.useCssFullscreen===!0||typeof a.useCssFullscreen=="function"&&a.useCssFullscreen())&&(s=!0),s)o.fullscreen?(o.fullscreen=!1,o.exitCssFullscreen(),this.emit(je,!1)):(o.fullscreen=!0,o.getCssFullscreen(),this.emit(je,!0)),this.animate(o.fullscreen);else if(a.rotateFullscreen)o.fullscreen?this.exitRotateFullscreen():this.getRotateFullscreen(),this.animate(o.fullscreen);else{if(a.switchCallback&&typeof a.switchCallback=="function"){a.switchCallback(o.fullscreen);return}o.fullscreen?o.exitFullscreen():o.getFullscreen().catch(function(){})}}}},{key:"animate",value:function(n){n?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.topBackIcon&&(n?(this.topBackIcon.show(),this.hide()):(this.topBackIcon.hide(),this.show()))}},{key:"show",value:function(){Ze($e(i.prototype),"show",this).call(this)}},{key:"hide",value:function(){Ze($e(i.prototype),"hide",this).call(this)}},{key:"render",value:function(){var n="FULLSCREEN_TIPS";return`<xg-icon class="xgplayer-fullscreen">
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys[n],'">').concat(this.i18n[n],`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"fullscreen"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:0,useCssFullscreen:!1,rotateFullscreen:!1,switchCallback:null,target:null,disable:!1,needBackIcon:!1}}}]),i}(vt);function Jt(t){"@babel/helpers - typeof";return Jt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Jt(t)}function qb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function is(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Qb(r.key),r)}}function Jb(t,e,i){return e&&is(t.prototype,e),i&&is(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Qb(t){var e=Zb(t,"string");return Jt(e)==="symbol"?e:String(e)}function Zb(t,e){if(Jt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Jt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function ar(){return typeof Reflect<"u"&&Reflect.get?ar=Reflect.get.bind():ar=function(e,i,r){var n=e_(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},ar.apply(this,arguments)}function e_(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=Qt(t),t!==null););return t}function t_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&so(t,e)}function so(t,e){return so=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},so(t,e)}function n_(t){var e=o_();return function(){var r=Qt(t),n;if(e){var o=Qt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return r_(this,n)}}function r_(t,e){if(e&&(Jt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return i_(t)}function i_(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function o_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Qt(t){return Qt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Qt(t)}var a_=function(t){t_(i,t);var e=n_(i);function i(r){var n;return qb(this,i),n=e.call(this,r),n.isActiving=!1,n}return Jb(i,[{key:"duration",get:function(){return this.playerConfig.customDuration||this.player.duration}},{key:"timeOffset",get:function(){return this.playerConfig.timeOffset||0}},{key:"afterCreate",value:function(){var n=this,o=this.player.controls.config.mode;this.mode=o==="flex"?"flex":"normal",!this.config.disable&&(this.mode==="flex"&&(this.createCenterTime(),this.hide()),this.durationDom=this.find(".time-duration"),this.timeDom=this.find(".time-current"),this.on([Sn,xe,ye],function(a){a.eventName==="durationchange"&&(n.isActiving=!1),n.onTimeUpdate()}),this.on(ze,function(){n.onTimeUpdate(!0)}),this.on(kn,function(){n.onReset()}))}},{key:"show",value:function(){this.mode!=="flex"&&ar(Qt(i.prototype),"show",this).call(this)}},{key:"onTimeUpdate",value:function(n){var o=this.player,a=this.config,s=this.duration;if(!(a.disable||this.isActiving||!o.hasStart)){var u=o.currentTime+this.timeOffset;u=h.adjustTimeByDuration(u,s,n),this.mode==="flex"?(this.centerCurDom.innerHTML=h.format(u),s!==1/0&&s>0&&(this.centerDurDom.innerHTML=h.format(s))):(this.timeDom.innerHTML=h.format(u),s!==1/0&&s>0&&(this.durationDom.innerHTML=h.format(s)))}}},{key:"onReset",value:function(){this.mode==="flex"?(this.centerCurDom.innerHTML=h.format(0),this.centerDurDom.innerHTML=h.format(0)):(this.timeDom.innerHTML=h.format(0),this.durationDom.innerHTML=h.format(0))}},{key:"createCenterTime",value:function(){var n=this.player;if(!(!n.controls||!n.controls.center)){var o=n.controls.center;this.centerCurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time left"),this.centerDurDom=h.createDom("xg-icon","00:00",{},"xgplayer-time right"),o.children.length>0?o.insertBefore(this.centerCurDom,o.children[0]):o.appendChild(this.centerCurDom),o.appendChild(this.centerDurDom)}}},{key:"afterPlayerInit",value:function(){var n=this.config;if(this.duration===1/0||this.playerConfig.isLive?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):h.hide(this.find(".time-live-tag")),n.hide){this.hide();return}this.show()}},{key:"changeLiveState",value:function(n){n?(h.hide(this.durationDom),h.hide(this.timeDom),h.hide(this.find(".time-separator")),h.show(this.find(".time-live-tag"))):(h.hide(this.find(".time-live-tag")),h.show(this.find(".time-separator")),h.show(this.durationDom),h.show(this.timeDom))}},{key:"updateTime",value:function(n){if(this.isActiving=!0,!(!n&&n!==0||n>this.duration)){if(this.mode==="flex"){this.centerCurDom.innerHTML=h.format(n);return}this.timeDom.innerHTML=h.format(n)}}},{key:"resetActive",value:function(){var n=this,o=this.player,a=function(){n.isActiving=!1};this.off(xe,a),o.isSeeking&&o.video.seeking?this.once(xe,a):this.isActiving=!1}},{key:"destroy",value:function(){var n=this.player.controls.center;this.centerCurDom&&n.removeChild(this.centerCurDom),this.centerCurDom=null,this.centerDurDom&&n.removeChild(this.centerDurDom),this.centerDurDom=null}},{key:"render",value:function(){if(!this.config.disable)return`<xg-icon class="xgplayer-time">
    <span class="time-current">00:00</span>
    <span class="time-separator">/</span>
    <span class="time-duration">00:00</span>
    <span class="time-live-tag">`.concat(this.i18n.LIVE_TIP,`</span>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"time"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_LEFT,index:2,disable:!1}}}]),i}(F);function Zt(t){"@babel/helpers - typeof";return Zt=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Zt(t)}function s_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function os(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Nu(r.key),r)}}function u_(t,e,i){return e&&os(t.prototype,e),i&&os(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function l_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&uo(t,e)}function uo(t,e){return uo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},uo(t,e)}function c_(t){var e=h_();return function(){var r=Ar(t),n;if(e){var o=Ar(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return f_(this,n)}}function f_(t,e){if(e&&(Zt(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ve(t)}function ve(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ar(t){return Ar=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ar(t)}function gt(t,e,i){return e=Nu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Nu(t){var e=d_(t,"string");return Zt(e)==="symbol"?e:String(e)}function d_(t,e){if(Zt(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(Zt(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var p_='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.753 18.48l-1.593-1.592c1.437-1.429 2.326-3.407 2.326-5.592s-.89-4.163-2.326-5.591l1.593-1.593c1.845 1.835 2.987 4.376 2.987 7.184s-1.142 5.349-2.987 7.184zm-3.199-3.185L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',v_='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM17.554 15.295L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998zm0 0L15.95 13.69c.612-.613.991-1.46.991-2.395s-.379-1.782-.991-2.395l1.604-1.604c1.03 1.02 1.669 2.435 1.669 3.999s-.638 2.979-1.669 3.998z"/></svg>',y_='<svg xmlns="http://www.w3.org/2000/svg" width="28" height="40" viewBox="0 -10 28 40"><path fill="#fff" d="M7.907 7.907H3.39v6.778h4.518l5.648 5.648V2.259L7.907 7.907zM20.306 9.703l-2.394-2.406-1.604 1.604 2.417 2.395-2.406 2.395 1.604 1.604 2.383-2.418 2.395 2.406 1.604-1.604-2.417-2.383 2.406-2.395-1.604-1.604-2.384 2.418z"/></svg>',g_=function(t){l_(i,t);var e=c_(i);function i(){var r;s_(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),gt(ve(r),"onBarMousedown",function(s){var u=ve(r),l=u.player,c=r.find(".xgplayer-bar");h.event(s);var f=c.getBoundingClientRect(),d=h.getEventPos(s,l.zoom),p=f.height-(d.clientY-f.top);if(d.h=p,d.barH=f.height,r.pos=d,!(p<-2))return r.updateVolumePos(p,s),document.addEventListener("mouseup",r.onBarMouseUp),r._d.isStart=!0,!1}),gt(ve(r),"onBarMouseMove",function(s){var u=ve(r),l=u._d;if(l.isStart){var c=ve(r),f=c.pos,d=c.player;s.preventDefault(),s.stopPropagation(),h.event(s);var p=h.getEventPos(s,d.zoom);l.isMoving=!0;var y=f.h-p.clientY+f.clientY;y>f.barH||r.updateVolumePos(y,s)}}),gt(ve(r),"onBarMouseUp",function(s){h.event(s),document.removeEventListener("mouseup",r.onBarMouseUp);var u=ve(r),l=u._d;l.isStart=!1,l.isMoving=!1}),gt(ve(r),"onMouseenter",function(s){r._d.isActive=!0,r.focus(),r.emit("icon_mouseenter",{pluginName:r.pluginName})}),gt(ve(r),"onMouseleave",function(s){r._d.isActive=!1,r.unFocus(100,!1,s),r.emit("icon_mouseleave",{pluginName:r.pluginName})}),gt(ve(r),"onVolumeChange",function(s){if(r.player){var u=r.player,l=u.muted,c=u.volume;r._d.isMoving||(r.find(".xgplayer-drag").style.height=l||c===0?"4px":"".concat(c*100,"%"),r.config.showValueLabel&&r.updateVolumeValue()),r.animate(l,c)}}),r}return u_(i,[{key:"registerIcons",value:function(){return{volumeSmall:{icon:v_,class:"xg-volume-small"},volumeLarge:{icon:p_,class:"xg-volume"},volumeMuted:{icon:y_,class:"xg-volume-mute"}}}},{key:"afterCreate",value:function(){var n=this;this._timerId=null,this._d={isStart:!1,isMoving:!1,isActive:!1},this.initIcons();var o=this.playerConfig,a=o.commonStyle,s=o.volume;a.volumeColor&&(this.find(".xgplayer-drag").style.backgroundColor=a.volumeColor),this.changeMutedHandler=this.hook("mutedChange",function(u){n.changeMuted(u)},{pre:function(l){l.preventDefault(),l.stopPropagation()}}),this._onMouseenterHandler=this.hook("mouseenter",this.onMouseenter),this._onMouseleaveHandler=this.hook("mouseleave",this.onMouseleave),D.device!=="mobile"&&this.playerConfig.isMobileSimulateMode!=="mobile"&&(this.bind("mouseenter",this._onMouseenterHandler),this.bind(["blur","mouseleave"],this._onMouseleaveHandler),this.bind(".xgplayer-slider","mousedown",this.onBarMousedown),this.bind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.bind(".xgplayer-slider","mouseup",this.onBarMouseUp)),this.bind(".xgplayer-icon",["touchend","click"],this.changeMutedHandler),this.on(qs,this.onVolumeChange),this.once(It,this.onVolumeChange),h.typeOf(s)!=="Number"&&(this.player.volume=this.config.default),this.onVolumeChange(),this.config.disable&&this.disable()}},{key:"updateVolumePos",value:function(n,o){var a=this.player,s=this.find(".xgplayer-drag"),u=this.find(".xgplayer-bar");if(!(!u||!s)){var l=Math.max(Math.min(n/u.getBoundingClientRect().height,1),0),c=parseInt(l*1e3,10),f=c/1e3,d={volume:{from:a.volume,to:f}};s.style.height="".concat(l*100,"%"),a.muted&&(d.muted={from:!0,to:!1}),this.emitUserAction(o,"change_volume",{muted:a.muted,volume:a.volume,props:d}),a.volume=Math.max(Math.min(c/1e3,1),0),a.muted&&(a.muted=!1),this.config.showValueLabel&&this.updateVolumeValue()}}},{key:"updateVolumeValue",value:function(){var n=this.player,o=n.volume,a=n.muted,s=this.find(".xgplayer-value-label"),u=Math.max(Math.min(o,1),0);s.innerText=a?0:Math.round(u*100)}},{key:"focus",value:function(){var n=this.player,o=this.config;o.disable||(n.focus({autoHide:!1}),this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),h.addClass(this.root,"slide-show"))}},{key:"unFocus",value:function(){var n=this,o=arguments.length>0&&arguments[0]!==void 0?arguments[0]:100,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,s=arguments.length>2?arguments[2]:void 0,u=this._d,l=this.player;u.isActive||(this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this._timerId=h.setTimeout(this,function(){u.isActive||(a?l.blur():l.focus(),h.removeClass(n.root,"slide-show"),u.isStart&&n.onBarMouseUp(s)),n._timerId=null},o))}},{key:"changeMuted",value:function(n){if(!this.config.disable){n&&n.stopPropagation();var o=this.player,a=this._d;a.isStart&&this.onBarMouseUp(n),this.emitUserAction(n,"change_muted",{muted:o.muted,volume:o.volume,props:{muted:{from:o.muted,to:!o.muted}}}),o.volume>0&&(o.muted=!o.muted),o.volume<.01&&(o.volume=this.config.miniVolume)}}},{key:"animate",value:function(n,o){n||o===0?this.setAttr("data-state","mute"):o<.5&&this.icons.volumeSmall?this.setAttr("data-state","small"):this.setAttr("data-state","normal")}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(".xgplayer-icon",n.volumeSmall),this.appendChild(".xgplayer-icon",n.volumeLarge),this.appendChild(".xgplayer-icon",n.volumeMuted)}},{key:"destroy",value:function(){this._timerId&&(h.clearTimeout(this,this._timerId),this._timerId=null),this.unbind("mouseenter",this.onMouseenter),this.unbind(["blur","mouseleave"],this.onMouseleave),this.unbind(".xgplayer-slider","mousedown",this.onBarMousedown),this.unbind(".xgplayer-slider","mousemove",this.onBarMouseMove),this.unbind(".xgplayer-slider","mouseup",this.onBarMouseUp),document.removeEventListener("mouseup",this.onBarMouseUp),this.unbind(".xgplayer-icon",D.device==="mobile"?"touchend":"click",this.changeMutedHandler)}},{key:"render",value:function(){var n=this.config.default||this.player.volume,o=this.config.showValueLabel;return`
    <xg-icon class="xgplayer-volume" data-state="normal">
      <div class="xgplayer-icon">
      </div>
      <xg-slider class="xgplayer-slider">
        `.concat(o?'<div class="xgplayer-value-label">'.concat(n*100,"</div>"):"",`
        <div class="xgplayer-bar">
          <xg-drag class="xgplayer-drag" style="height: `).concat(n*100,`%"></xg-drag>
        </div>
      </xg-slider>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"volume"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:1,disable:!1,showValueLabel:!1,default:.6,miniVolume:.2}}}]),i}(F);function en(t){"@babel/helpers - typeof";return en=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},en(t)}function m_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function as(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,ju(r.key),r)}}function b_(t,e,i){return e&&as(t.prototype,e),i&&as(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Nn(){return typeof Reflect<"u"&&Reflect.get?Nn=Reflect.get.bind():Nn=function(e,i,r){var n=__(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Nn.apply(this,arguments)}function __(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=st(t),t!==null););return t}function P_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&lo(t,e)}function lo(t,e){return lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},lo(t,e)}function w_(t){var e=k_();return function(){var r=st(t),n;if(e){var o=st(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return S_(this,n)}}function S_(t,e){if(e&&(en(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Mu(t)}function Mu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function st(t){return st=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},st(t)}function O_(t,e,i){return e=ju(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function ju(t){var e=T_(t,"string");return en(e)==="symbol"?e:String(e)}function T_(t,e){if(en(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(en(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var E_='<svg xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="-4 -6 40 40" fill="none"><g clip-path="url(#clip0)" fill="#fff"><path d="M17.5 13.75H6.25A3.75 3.75 0 002.5 17.5v6.25a3.75 3.75 0 003.75 3.75H17.5a3.75 3.75 0 003.75-3.75V17.5a3.75 3.75 0 00-3.75-3.75z"/><path fill-rule="evenodd" clip-rule="evenodd" d="M5.822 6.094a1.247 1.247 0 00.156 1.79l4.509 4.204a1.25 1.25 0 101.705-1.828L9.93 8.152l4.799-.018.039-.001a10 10 0 019.521 13.983 1.25 1.25 0 002.292.998 12.5 12.5 0 00-11.88-17.48l-5.05.019 2.293-2.46a1.25 1.25 0 10-1.829-1.705L5.854 6.06l-.032.036z"/></g><defs><clipPath id="RotateSvg-clip0"><path fill="#fff" d="M0 0h40v40H0z"/></clipPath></defs></svg>',C_=function(t){P_(i,t);var e=w_(i);function i(r){var n;return m_(this,i),n=e.call(this,r),O_(Mu(n),"onBtnClick",function(o){n.config.disable||(o.preventDefault(),o.stopPropagation(),n.emitUserAction(o,"rotate"),n.rotate(n.config.clockwise,n.config.innerRotate,1))}),n.rotateDeg=n.config.rotateDeg||0,n}return b_(i,[{key:"afterCreate",value:function(){var n=this;if(!this.config.disable){Nn(st(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.rotate),this.bind(".xgplayer-icon",["click","touchend"],this.onBtnClick),this.on(Rt,function(){n.rotateDeg&&n.config.innerRotate&&h.setTimeout(n,function(){n.updateRotateDeg(n.rotateDeg,n.config.innerRotate)},100)});var o=this.player.root;this.rootWidth=o.style.width||o.offsetWidth||o.clientWidth,this.rootHeight=o.style.height||o.offsetHeight||o.clientHeight,this.rotateDeg&&this.updateRotateDeg(this.rotateDeg,this.config.innerRotate)}}},{key:"destroy",value:function(){Nn(st(i.prototype),"destroy",this).call(this),this.unbind(".xgplayer-icon",["click","touchend"],this.onBtnClick)}},{key:"updateRotateDeg",value:function(n,o){n||(n=0);var a=this.player,s=this.rootWidth,u=this.rootHeight;if(o){a.videoRotateDeg=n;return}var l=this.player,c=l.root,f=l.innerContainer,d=l.video,p=c.offsetWidth,y=f&&o?f.offsetHeight:c.offsetHeight,b=s,g=u,T=0,E=0;(n===.75||n===.25)&&(b="".concat(y,"px"),g="".concat(p,"px"),T=-(y-p)/2,E=-(p-y)/2);var O="translate(".concat(T,"px,").concat(E,"px) rotate(").concat(n,"turn)"),z={transformOrigin:"center center",transform:O,webKitTransform:O,height:g,width:b},H=o?d:c,q=o?a.getPlugin("poster"):null;Object.keys(z).map(function(V){H.style[V]=z[V],q&&q.root&&(q.root.style[V]=z[V])})}},{key:"rotate",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,s=this.player;this.rotateDeg||(this.rotateDeg=0);var u=n?1:-1;this.rotateDeg=(this.rotateDeg+1+u*.25*a)%1,this.updateRotateDeg(this.rotateDeg,o),s.emit(tu,this.rotateDeg*360)}},{key:"registerIcons",value:function(){return{rotate:E_}}},{key:"render",value:function(){return`
    <xg-icon class="xgplayer-rotate">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.ROTATE_TIPS,`">
      `).concat(this.i18n.ROTATE_TIPS,`
      </div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"rotate"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:6,innerRotate:!0,clockwise:!1,rotateDeg:0,disable:!1}}}]),i}(vt);function tn(t){"@babel/helpers - typeof";return tn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tn(t)}function ss(t){return x_(t)||$_(t)||R_(t)||I_()}function I_(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function R_(t,e){if(t){if(typeof t=="string")return co(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return co(t,e)}}function $_(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function x_(t){if(Array.isArray(t))return co(t)}function co(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function L_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function us(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Fu(r.key),r)}}function A_(t,e,i){return e&&us(t.prototype,e),i&&us(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function Mn(){return typeof Reflect<"u"&&Reflect.get?Mn=Reflect.get.bind():Mn=function(e,i,r){var n=D_(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Mn.apply(this,arguments)}function D_(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=ut(t),t!==null););return t}function N_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&fo(t,e)}function fo(t,e){return fo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},fo(t,e)}function M_(t){var e=B_();return function(){var r=ut(t),n;if(e){var o=ut(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return j_(this,n)}}function j_(t,e){if(e&&(tn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bu(t)}function Bu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function B_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ut(t){return ut=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ut(t)}function F_(t,e,i){return e=Fu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Fu(t){var e=H_(t,"string");return tn(e)==="symbol"?e:String(e)}function H_(t,e){if(tn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(tn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var V_='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/></svg>',U_='<svg width="20" height="20" viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.5 4.3h-13a.2.2 0 00-.2.2v11c0 .11.09.2.2.2h5v1.8h-5a2 2 0 01-2-2v-11a2 2 0 012-2h13a2 2 0 012 2v4h-1.8v-4a.2.2 0 00-.2-.2zM12 11.5a1 1 0 00-1 1v4a1 1 0 001 1h5.5a1 1 0 001-1v-4a1 1 0 00-1-1H12z" fill="#fff"/><path fill-rule="evenodd" clip-rule="evenodd" d="M9.5 7.7a.5.5 0 00.5-.5v-.7a.5.5 0 00-.5-.5h-4a.5.5 0 00-.5.5v3.96a.5.5 0 00.5.5h.7a.5.5 0 00.5-.5V8.83l2.07 2.109a.5.5 0 00.707.006l.5-.49a.5.5 0 00.006-.707L7.973 7.7H9.5z" fill="#fff"/></svg>',mt={PIP:"picture-in-picture",INLINE:"inline",FULLSCREEN:"fullscreen"},z_=function(t){N_(i,t);var e=M_(i);function i(){var r;L_(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),F_(Bu(r),"switchPIP",function(s){if(!r.isPIPAvailable()||r.config.disable)return!1;s.stopPropagation&&s.stopPropagation(),r.isPip?(r.exitPIP(),r.emitUserAction(s,"change_pip",{from:"pip",to:"normal"}),r.setAttr("data-state","normal")):r.player.video.readyState===4&&(r.requestPIP(),r.emitUserAction(s,"change_pip",{from:"normal",to:"pip"}),r.setAttr("data-state","pip"))}),r}return A_(i,[{key:"beforeCreate",value:function(n){typeof n.player.config.pip=="boolean"&&(n.config.showIcon=n.player.config.pip)}},{key:"afterCreate",value:function(){var n=this;this.isPIPAvailable()&&(Mn(ut(i.prototype),"afterCreate",this).call(this),this.pMode=mt.INLINE,this.initPipEvents(),this.config.showIcon&&this.initIcons(),this.once(ni,function(){n.config.showIcon&&(h.removeClass(n.find(".xgplayer-icon"),"xg-icon-disable"),n.bind("click",n.switchPIP))}))}},{key:"registerIcons",value:function(){return{pipIcon:{icon:V_,class:"xg-get-pip"},pipIconExit:{icon:U_,class:"xg-exit-pip"}}}},{key:"initIcons",value:function(){var n=this.icons;this.appendChild(".xgplayer-icon",n.pipIcon),this.appendChild(".xgplayer-icon",n.pipIconExit)}},{key:"initPipEvents",value:function(){var n=this,o=this.player;this.leavePIPCallback=function(){var a=o.paused;h.setTimeout(n,function(){!a&&o.videoPlay()},0),!a&&o.videoPlay(),n.setAttr("data-state","normal"),n.pipWindow=null,o.emit($i,!1)},this.enterPIPCallback=function(a){o.emit($i,!0),a!=null&&a.pictureInPictureWindow&&(n.pipWindow=a.pictureInPictureWindow),n.setAttr("data-state","pip")},this.onWebkitpresentationmodechanged=function(a){var s=o.video.webkitPresentationMode;n.pMode===mt.FULLSCREEN&&s!==mt.FULLSCREEN&&o.onFullscreenChange(null,!1),n.pMode=s,s===mt.PIP?n.enterPIPCallback(a):s===mt.INLINE&&n.leavePIPCallback(a)},o.video&&(o.video.addEventListener("enterpictureinpicture",this.enterPIPCallback),o.video.addEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(o.video)&&o.video.addEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged))}},{key:"copyStyleIntoPiPWindow",value:function(n){var o=ss(document.styleSheets).map(function(s){try{return ss(s.cssRules).map(function(l){return l.cssText}).join("")}catch{var u=document.createElement("link");u.rel="stylesheet",u.type=s.type,u.media=s.media,u.href=s.href,n.document.head.appendChild(u)}return""}).filter(Boolean).join(`
`),a=document.createElement("style");a.textContent=o,n.document.head.appendChild(a)}},{key:"requestPIP",value:function(){var n=this,o=this.player,a=this.playerConfig,s=this.config;if(!(!this.isPIPAvailable()||this.isPip))try{var u=a.poster;if(u&&(o.video.poster=h.typeOf(u)==="String"?u:u.poster),s.preferDocument&&this.isDocPIPAvailable()){var l={};if(s.width&&s.height)l.width=s.width,l.height=s.height;else{var c=o.root.getBoundingClientRect();l.width=c.width,l.height=c.height}documentPictureInPicture.requestWindow(l).then(function(f){var d=s.docPiPNode,p=s.docPiPStyle;n.enterPIPCallback();var y=d||o.root,b=y.parentElement,g=y.previousSibling,T=y.nextSibling;n.copyStyleIntoPiPWindow(f);var E=document.createElement("style");if(E.append("body{padding:0; margin:0;}"),p){var O="";typeof p=="string"?O=p:typeof p=="function"&&(O=p.call(s)),O&&E.append(O)}else y===o.root&&E.append(`
              .xgplayer{width: 100%!important; height: 100%!important;}
            `);f.document.head.append(E),f.document.body.append(y),f.addEventListener("pagehide",function(z){b&&(T?b.insertBefore(y,T):g?b.insertBefore(y,g.nextSibling):b.appendChild(y)),n.leavePIPCallback()},{once:!0})})}else i.checkWebkitSetPresentationMode(o.video)?o.video.webkitSetPresentationMode("picture-in-picture"):o.video.requestPictureInPicture();return!0}catch(f){return console.error("requestPiP",f),!1}}},{key:"exitPIP",value:function(){var n=this.player;try{if(this.isPIPAvailable()&&this.isPip){var o;this.isDocPIPAvailable()&&(o=documentPictureInPicture)!==null&&o!==void 0&&o.window?documentPictureInPicture.window.close():i.checkWebkitSetPresentationMode(n.video)?n.video.webkitSetPresentationMode("inline"):document.exitPictureInPicture()}return!0}catch(a){return console.error("exitPIP",a),!1}}},{key:"isPip",get:function(){var n,o=this.player;return!!(this.isDocPIPAvailable()&&(n=documentPictureInPicture)!==null&&n!==void 0&&n.window)||document.pictureInPictureElement&&document.pictureInPictureElement===o.video||o.video.webkitPresentationMode===mt.PIP}},{key:"isPIPAvailable",value:function(){var n=this.player.video,o=h.typeOf(document.pictureInPictureEnabled)==="Boolean"?document.pictureInPictureEnabled:!0;return o&&(h.typeOf(n.disablePictureInPicture)==="Boolean"&&!n.disablePictureInPicture||n.webkitSupportsPresentationMode&&h.typeOf(n.webkitSetPresentationMode)==="Function")||this.isDocPIPAvailable()}},{key:"isDocPIPAvailable",value:function(){return"documentPictureInPicture"in window&&/^(https|file)/.test(location.protocol)}},{key:"destroy",value:function(){Mn(ut(i.prototype),"destroy",this).call(this);var n=this.player;n.video.removeEventListener("enterpictureinpicture",this.enterPIPCallback),n.video.removeEventListener("leavepictureinpicture",this.leavePIPCallback),i.checkWebkitSetPresentationMode(n.video)&&n.video.removeEventListener("webkitpresentationmodechanged",this.onWebkitpresentationmodechanged),this.exitPIP(),this.unbind("click",this.btnClick)}},{key:"render",value:function(){if(!(!this.config.showIcon||!this.isPIPAvailable()))return`<xg-icon class="xgplayer-pip">
      <div class="xgplayer-icon xg-icon-disable">
      </div>
      <div class="xg-tips" lang-key="`.concat(this.i18nKeys.PIP,'">').concat(this.i18n.PIP,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"pip"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:6,showIcon:!1,preferDocument:!1,width:void 0,height:void 0,docPiPNode:void 0,docPiPStyle:void 0}}},{key:"checkWebkitSetPresentationMode",value:function(n){return typeof n.webkitSetPresentationMode=="function"}}]),i}(vt);function nn(t){"@babel/helpers - typeof";return nn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},nn(t)}function K_(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ls(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Hu(r.key),r)}}function G_(t,e,i){return e&&ls(t.prototype,e),i&&ls(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function W_(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ho(t,e)}function ho(t,e){return ho=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ho(t,e)}function Y_(t){var e=q_();return function(){var r=Dr(t),n;if(e){var o=Dr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return X_(this,n)}}function X_(t,e){if(e&&(nn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return po(t)}function po(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function q_(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Dr(t){return Dr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Dr(t)}function J_(t,e,i){return e=Hu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Hu(t){var e=Q_(t,"string");return nn(e)==="symbol"?e:String(e)}function Q_(t,e){if(nn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(nn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Z_='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="40" viewBox="10 0 24 40"><path d="M30.4 10.64v21.504h-4.864v-9.856l-12.16 8.96V11.536l12.16 8.96V10.64z"/></svg>',e0=function(t){W_(i,t);var e=Y_(i);function i(r){var n;return K_(this,i),n=e.call(this,r),J_(po(n),"playNext",function(o){var a=po(n),s=a.player;o.preventDefault(),o.stopPropagation(),n.idx+1<n.config.urlList.length?(n.idx++,s.emit(dr,n.idx+1),n.nextHandler(n.config.urlList[n.idx],n.idx)):(n.nextHandler(),s.emit(dr))}),n.idx=-1,n}return G_(i,[{key:"afterCreate",value:function(){!this.config.urlList||this.config.urlList.length===0||(this.appendChild(".xgplayer-icon",this.icons.playNext),this.initEvents())}},{key:"registerIcons",value:function(){return{playNext:Z_}}},{key:"initEvents",value:function(){this.nextHandler=this.hook("playNext",this.changeSrc);var n=D.device==="mobile"?"touchend":"click";this.bind(n,this.playNext),this.show()}},{key:"changeSrc",value:function(n){var o=this.player;n&&(o.pause(),o.currentTime=0,o.autoplay=!0,o.src=n)}},{key:"destroy",value:function(){this.unbind(["touchend","click"],this.playNext)}},{key:"render",value:function(){if(!(!this.config.urlList||this.config.urlList.length===0))return`
     <xg-icon class="xgplayer-playnext">
      <div class="xgplayer-icon">
      </div>
      <div class="xg-tips" lang-key="PLAYNEXT_TIPS">`.concat(this.i18n.PLAYNEXT_TIPS,`</div>
     </xg-icon>
    `)}}],[{key:"pluginName",get:function(){return"playNext"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_LEFT,index:1,url:null,urlList:[]}}}]),i}(F),Vu={exports:{}};(function(t,e){(function(i,r){t.exports=r()})(op,function(){return function i(r,n,o){var a=window,s="application/octet-stream",u=o||s,l=r,c=!n&&!o&&l,f=document.createElement("a"),d=function(V){return String(V)},p=a.Blob||a.MozBlob||a.WebKitBlob||d,y=n||"download",b,g;if(p=p.call?p.bind(a):Blob,String(this)==="true"&&(l=[l,u],u=l[0],l=l[1]),c&&c.length<2048&&(y=c.split("/").pop().split("?")[0],f.href=c,f.href.indexOf(c)!==-1)){var T=new XMLHttpRequest;return T.open("GET",c,!0),T.responseType="blob",T.onload=function(V){i(V.target.response,y,s)},setTimeout(function(){T.send()},0),T}if(/^data:([\w+-]+\/[\w+.-]+)?[,;]/.test(l))if(l.length>1024*1024*1.999&&p!==d)l=H(l),u=l.type||s;else return navigator.msSaveBlob?navigator.msSaveBlob(H(l),y):q(l);else if(/([\x80-\xff])/.test(l)){var E=0,O=new Uint8Array(l.length),z=O.length;for(E;E<z;++E)O[E]=l.charCodeAt(E);l=new p([O],{type:u})}b=l instanceof p?l:new p([l],{type:u});function H(V){var ue=V.split(/[:;,]/),re=ue[1],B=ue[2]=="base64"?atob:decodeURIComponent,ie=B(ue.pop()),de=ie.length,pe=0,Ke=new Uint8Array(de);for(pe;pe<de;++pe)Ke[pe]=ie.charCodeAt(pe);return new p([Ke],{type:re})}function q(V,ue){if("download"in f)return f.href=V,f.setAttribute("download",y),f.className="download-js-link",f.innerHTML="downloading...",f.style.display="none",document.body.appendChild(f),setTimeout(function(){f.click(),document.body.removeChild(f),ue===!0&&setTimeout(function(){a.URL.revokeObjectURL(f.href)},250)},66),!0;if(/(Version)\/(\d+)\.(\d+)(?:\.(\d+))?.*Safari\//.test(navigator.userAgent))return/^data:/.test(V)&&(V="data:"+V.replace(/^data:([\w\/\-\+]+)/,s)),window.open(V)||confirm(`Displaying New Document

Use Save As... to download, then click back to return to this page.`)&&(location.href=V),!0;var re=document.createElement("iframe");document.body.appendChild(re),!ue&&/^data:/.test(V)&&(V="data:"+V.replace(/^data:([\w\/\-\+]+)/,s)),re.src=V,setTimeout(function(){document.body.removeChild(re)},333)}if(navigator.msSaveBlob)return navigator.msSaveBlob(b,y);if(a.URL)q(a.URL.createObjectURL(b),!0);else{if(typeof b=="string"||b.constructor===d)try{return q("data:"+u+";base64,"+a.btoa(b))}catch{return q("data:"+u+","+encodeURIComponent(b))}g=new FileReader,g.onload=function(V){q(this.result)},g.readAsDataURL(b)}return!0}})})(Vu);var t0=Vu.exports;const n0=Xo(t0);function rn(t){"@babel/helpers - typeof";return rn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},rn(t)}function r0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function cs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,zu(r.key),r)}}function i0(t,e,i){return e&&cs(t.prototype,e),i&&cs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function jn(){return typeof Reflect<"u"&&Reflect.get?jn=Reflect.get.bind():jn=function(e,i,r){var n=o0(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},jn.apply(this,arguments)}function o0(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=lt(t),t!==null););return t}function a0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&vo(t,e)}function vo(t,e){return vo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},vo(t,e)}function s0(t){var e=l0();return function(){var r=lt(t),n;if(e){var o=lt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return u0(this,n)}}function u0(t,e){if(e&&(rn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uu(t)}function Uu(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function l0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function lt(t){return lt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},lt(t)}function c0(t,e,i){return e=zu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function zu(t){var e=f0(t,"string");return rn(e)==="symbol"?e:String(e)}function f0(t,e){if(rn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(rn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var h0='<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><g fill="#FFF" fill-rule="evenodd"><rect x="11" y="4" width="2" height="12" rx="1"/><rect x="3" y="18" width="18" height="2" rx="1"/><rect transform="rotate(90 4 17.5)" x="1.5" y="16.5" width="5" height="2" rx="1"/><rect transform="rotate(90 20 17.5)" x="17.5" y="16.5" width="5" height="2" rx="1"/><path d="M11.988 14.3l-4.243-4.242a1 1 0 00-1.414 1.414l4.95 4.95a1 1 0 001.414 0l4.95-4.95a1 1 0 10-1.414-1.414L11.988 14.3z"/></g></svg>',d0=function(t){a0(i,t);var e=s0(i);function i(r){var n;return r0(this,i),n=e.call(this,r),c0(Uu(n),"download",function(o){if(!(n.isLock||n.config.disable)){n.emitUserAction(o,"download");var a=n.getAbsoluteURL(n.player.src);n0(a),n.isLock=!0,n.timer=window.setTimeout(function(){n.isLock=!1,window.clearTimeout(n.timer),n.timer=null},300)}}),n.timer=null,n.isLock=!1,n}return i0(i,[{key:"afterCreate",value:function(){jn(lt(i.prototype),"afterCreate",this).call(this),!this.config.disable&&(this.appendChild(".xgplayer-icon",this.icons.download),this.bind(["click","touchend"],this.download))}},{key:"registerIcons",value:function(){return{download:h0}}},{key:"getAbsoluteURL",value:function(n){if(!n.match(/^https?:\/\//)){var o=document.createElement("div");o.innerHTML='<a href="'.concat(n,'">x</a>'),n=o.firstChild.href}return n}},{key:"destroy",value:function(){jn(lt(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.download),window.clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return`<xg-icon class="xgplayer-download">
   <div class="xgplayer-icon">
   </div>
   <div class="xg-tips" lang-key="`.concat(this.i18nKeys.DOWNLOAD_TIPS,'">').concat(this.i18n.DOWNLOAD_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"download"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:3,disable:!0}}}]),i}(vt);function on(t){"@babel/helpers - typeof";return on=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},on(t)}function p0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function fs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,y0(r.key),r)}}function v0(t,e,i){return e&&fs(t.prototype,e),i&&fs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function y0(t){var e=g0(t,"string");return on(e)==="symbol"?e:String(e)}function g0(t,e){if(on(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(on(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Bn(){return typeof Reflect<"u"&&Reflect.get?Bn=Reflect.get.bind():Bn=function(e,i,r){var n=m0(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Bn.apply(this,arguments)}function m0(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=ct(t),t!==null););return t}function b0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&yo(t,e)}function yo(t,e){return yo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},yo(t,e)}function _0(t){var e=S0();return function(){var r=ct(t),n;if(e){var o=ct(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return P0(this,n)}}function P0(t,e){if(e&&(on(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w0(t)}function w0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function S0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ct(t){return ct=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ct(t)}var k0=function(t){b0(i,t);var e=_0(i);function i(){return p0(this,i),e.apply(this,arguments)}return v0(i,[{key:"beforeCreate",value:function(n){typeof n.player.config.screenShot=="boolean"&&(n.config.disable=!n.player.config.screenShot)}},{key:"afterCreate",value:function(){Bn(ct(i.prototype),"afterCreate",this).call(this),this.appendChild(".xgplayer-icon",this.icons.screenshotIcon);var n=this.config;this.initSize=function(o){n.fitVideo&&(n.width=o.vWidth,n.height=o.vHeight)},this.once(Rt,this.initSize)}},{key:"onPluginsReady",value:function(){this.show(),this.onClickBtn=this.onClickBtn.bind(this),this.bind(["click","touchend"],this.onClickBtn)}},{key:"saveScreenShot",value:function(n,o){var a=document.createElement("a");a.href=n,a.download=o;var s=document.createEvent("MouseEvents");s.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),a.dispatchEvent(s)}},{key:"createCanvans",value:function(n,o){var a=document.createElement("canvas");this.canvasCtx=a.getContext("2d"),this.canvas=a,a.width=n||this.config.width,a.height=o||this.config.height}},{key:"onClickBtn",value:function(n){var o=this;n.preventDefault(),n.stopPropagation(),this.emitUserAction(n,"shot"),this.shot().then(function(a){o.emit(nu,a),o.saveScreenShot(a,o.config.name+o.config.format)})}},{key:"shot",value:function(n,o){var a=this,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{quality:.92,type:"image/png"},u=this.config,l=this.player,c=s.quality||u.quality,f=s.type||u.type;return new Promise(function(d,p){a.canvas?(a.canvas.width=n||u.width,a.canvas.height=o||u.height):a.createCanvans(n,o),a.canvasCtx.drawImage(l.video,0,0,n||u.width,o||u.height);var y=a.canvas.toDataURL(f,c).replace(f,"image/octet-stream");y=y.replace(/^data:image\/[^;]+/,"data:application/octet-stream"),d(y)})}},{key:"registerIcons",value:function(){return{screenshotIcon:null}}},{key:"destroy",value:function(){Bn(ct(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.onClickBtn),this.off(Rt,this.initSize)}},{key:"render",value:function(){if(!this.config.disable){var n=this.icons.screenshotIcon?"xgplayer-icon":"xgplayer-icon btn-text",o="SCREENSHOT";return`
      <xg-icon class="xgplayer-shot">
      <div class="`.concat(n,`">
      `).concat(this.icons.screenshotIcon?"":'<span lang-key="'.concat(this.i18nKeys[o],'">').concat(this.i18n[o],"</span>"),` 
      </div>
    </xg-icon>`)}}}],[{key:"pluginName",get:function(){return"screenShot"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:5,quality:.92,type:"image/png",format:".png",width:600,height:337,fitVideo:!0,disable:!1,name:"screenshot"}}}]),i}(vt);function Yn(t){"@babel/helpers - typeof";return Yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Yn(t)}function O0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function T0(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,C0(r.key),r)}}function E0(t,e,i){return e&&T0(t.prototype,e),Object.defineProperty(t,"prototype",{writable:!1}),t}function C0(t){var e=I0(t,"string");return Yn(e)==="symbol"?e:String(e)}function I0(t,e){if(Yn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(Yn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}var R0=function(){function t(e){O0(this,t),this.config=e.config,this.parent=e.root,this.root=h.createDom("ul","",{},"xg-options-list ".concat(this.config.className)),e.root.appendChild(this.root),this.onItemClick=this.onItemClick.bind(this),this.renderItemList();var i=this.config.domEventType==="touche"?"touchend":"click";this._delegates=F.delegate.call(this,this.root,"li",i,this.onItemClick)}return E0(t,[{key:"renderItemList",value:function(i){var r=this,n=this.config,o=this.root;i?n.data=i:i=n.data,n.style&&Object.keys(n.style).map(function(a){o.style[a]=n[a]}),i.length>0&&(this.attrKeys=Object.keys(i[0])),this.root.innerHTML="",i.map(function(a,s){var u=a.selected?"option-item selected":"option-item";a["data-index"]=s,r.root.appendChild(h.createDom("li","<span>".concat(a.showText,"</span>"),a,u))})}},{key:"onItemClick",value:function(i){i.delegateTarget||(i.delegateTarget=i.target);var r=i.delegateTarget;if(r&&h.hasClass(r,"selected"))return!1;var n=typeof this.config.onItemClick=="function"?this.config.onItemClick:null,o=this.root.querySelector(".selected");h.addClass(r,"selected"),o&&h.removeClass(o,"selected"),n(i,{from:o?this.getAttrObj(o,this.attrKeys):null,to:this.getAttrObj(r,this.attrKeys)})}},{key:"getAttrObj",value:function(i,r){if(!i||!r)return{};var n={};r.map(function(a){n[a]=i.getAttribute(a)});var o=i.getAttribute("data-index");return o&&(n.index=Number(o)),n}},{key:"show",value:function(){h.removeClass(this.root,"hide"),h.addClass(this.root,"active")}},{key:"hide",value:function(){h.removeClass(this.root,"active"),h.addClass(this.root,"hide")}},{key:"setStyle",value:function(i){var r=this;Object.keys(i).forEach(function(n){r.root.style[n]=i[n]})}},{key:"destroy",value:function(){this._delegates&&(this._delegates.map(function(i){i.destroy&&i.destroy()}),this._delegates=null),this.root.innerHTML=null,this.parent.removeChild(this.root),this.root=null}}]),t}();function ft(t){"@babel/helpers - typeof";return ft=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft(t)}function $0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function hs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ku(r.key),r)}}function x0(t,e,i){return e&&hs(t.prototype,e),i&&hs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function L0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&go(t,e)}function go(t,e){return go=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},go(t,e)}function A0(t){var e=N0();return function(){var r=Nr(t),n;if(e){var o=Nr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return D0(this,n)}}function D0(t,e){if(e&&(ft(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return mo(t)}function mo(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nr(t){return Nr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Nr(t)}function ds(t,e,i){return e=Ku(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ku(t){var e=M0(t,"string");return ft(e)==="symbol"?e:String(e)}function M0(t,e){if(ft(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(ft(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var bt=D.device==="mobile",Gu=function(t){L0(i,t);var e=A0(i);function i(r){var n;return $0(this,i),n=e.call(this,r),ds(mo(n),"onEnter",function(o){o.preventDefault(),o.stopPropagation(),n.emit("icon_mouseenter",{pluginName:n.pluginName}),n.onToggle(!0)}),ds(mo(n),"onLeave",function(o){o.preventDefault(),o.stopPropagation(),n.emit("icon_mouseleave",{pluginName:n.pluginName}),n.isActive&&n.onToggle(!1)}),n.isIcons=!1,n.isActive=!1,n.curValue=null,n.curIndex=0,n}return x0(i,[{key:"updateLang",value:function(n){this.renderItemList(this.config.list,this.curIndex)}},{key:"afterCreate",value:function(){var n=this,o=this.config;this.initIcons(),bt=bt||this.domEventType==="touch",D.device==="mobile"&&o.listType!=="middle"&&(o.listType="rightSide"),o.hidePortrait&&h.addClass(this.root,"portrait"),this.once(Le,function(){o.list&&o.list.length>0&&(n.renderItemList(o.list),n.show())}),bt&&this.on(Qo,function(){n.isActive&&(n.optionsList&&n.optionsList.hide(),n.isActive=!1)}),this.activeEvent=bt?"touchend":"mouseenter",this.bind(this.activeEvent,this.onEnter),this.bind("mouseleave",this.onLeave),this.isIcons&&this.bind("click",this.onIconClick),this.config.disable&&this.disable()}},{key:"initIcons",value:function(){var n=this,o=this.icons,a=Object.keys(o),s=!1;a.length>0&&(a.forEach(function(u){n.appendChild(".xgplayer-icon",o[u]),!s&&(s=o[u])}),this.isIcons=s),!s&&(this.appendChild(".xgplayer-icon",h.createDom("span","",{},"icon-text")),h.addClass(this.find(".xgplayer-icon"),"btn-text"))}},{key:"show",value:function(){!this.config.list||this.config.list.length<1||h.addClass(this.root,"show")}},{key:"hide",value:function(){h.removeClass(this.root,"show")}},{key:"getTextByLang",value:function(n,o,a){if(n===void 0)return"";var s=this.config.list;!a&&(a=this.player.lang),o=!o||h.isUndefined(n[o])?"text":o,typeof n=="number"&&(n=s[n]);try{return ft(n[o])==="object"?n[o][a]||n[o].zh:n[o]}catch(u){return console.warn(u),""}}},{key:"onToggle",value:function(n){if(!(n===this.isActive||this.config.disable)){var o=this.player.controls,a=this.config.listType;n?(a==="rightSide"?o.blur():o.focus(),this.optionsList&&this.optionsList.show()):(a==="rightSide"?o.focus():o.unFocus(),this.optionsList&&this.optionsList.hide()),this.isActive=n}}},{key:"onItemClick",value:function(n,o){n.preventDefault(),n.stopPropagation();var a=this.config,s=a.listType,u=a.list;(bt||s==="rightSide")&&this.onToggle(!1),this.curIndex=o.to.index,this.curItem=u[this.curIndex],this.changeCurrentText(),this.onToggle(!1)}},{key:"onIconClick",value:function(n){}},{key:"changeCurrentText",value:function(){if(!this.isIcons){var n=this.config.list,o=this.curIndex<n.length?this.curIndex:0,a=n[o];a&&(this.find(".icon-text").innerHTML=this.getTextByLang(a,"iconText"))}}},{key:"renderItemList",value:function(n,o){var a=this,s=this.config,u=this.optionsList,l=this.player;if(typeof o=="number"&&(this.curIndex=o,this.curItem=s.list[o]),u){u.renderItemList(n),this.changeCurrentText();return}var c={config:{data:n||[],className:s.listType==="rightSide"?"right-side":"",onItemClick:function(d,p){a.onItemClick(d,p)},domEventType:bt?"touche":"mouse"},root:s.listType==="rightSide"?l.root:this.root};this.config.isShowIcon&&(this.optionsList=new R0(c),this.changeCurrentText(),this.show())}},{key:"destroy",value:function(){this.unbind(this.activeEvent,this.onToggle),this.unbind("mouseleave",this.onToggle),this.optionsList&&(this.optionsList.destroy(),this.optionsList=null)}},{key:"render",value:function(){if(this.config.isShowIcon)return'<xg-icon class="xg-options-icon '.concat(this.config.className||"",`">
    <div class="xgplayer-icon">
    </div>
   </xg-icon>`)}}],[{key:"pluginName",get:function(){return"optionsIcon"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:100,list:[],listType:"middle",listStyle:{},hidePortrait:!0,isShowIcon:!1}}}]),i}(F);function an(t){"@babel/helpers - typeof";return an=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},an(t)}function j0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ps(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,F0(r.key),r)}}function B0(t,e,i){return e&&ps(t.prototype,e),i&&ps(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function F0(t){var e=H0(t,"string");return an(e)==="symbol"?e:String(e)}function H0(t,e){if(an(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(an(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Ct(){return typeof Reflect<"u"&&Reflect.get?Ct=Reflect.get.bind():Ct=function(e,i,r){var n=V0(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Ct.apply(this,arguments)}function V0(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=Ue(t),t!==null););return t}function U0(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&bo(t,e)}function bo(t,e){return bo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},bo(t,e)}function z0(t){var e=W0();return function(){var r=Ue(t),n;if(e){var o=Ue(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return K0(this,n)}}function K0(t,e){if(e&&(an(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return G0(t)}function G0(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function W0(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ue(t){return Ue=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ue(t)}var Y0=function(t){U0(i,t);var e=z0(i);function i(r){var n;return j0(this,i),n=e.call(this,r),n.curTime=0,n.isPaused=!0,n}return B0(i,[{key:"beforeCreate",value:function(n){var o=n.config.list;Array.isArray(o)&&o.length>0&&(n.config.list=o.map(function(a){return!a.text&&a.name&&(a.text=a.name),a.text||(a.text=a.definition),a}))}},{key:"afterCreate",value:function(){var n=this;Ct(Ue(i.prototype),"afterCreate",this).call(this);var o=this.config,a=o.list,s=o.defaultDefinition,u=this.playerConfig.defaultConfig;a.forEach(function(l){(l.definition===s||l.definition===u)&&(l.selected=!0)}),this.on("resourceReady",function(l){n.changeDefinitionList(l)}),this.on(na,function(l){n.renderItemList(n.config.list,l.to)}),this.player.definitionList.length<2&&this.hide()}},{key:"initDefinition",value:function(){var n=this.config,o=n.list,a=n.defaultDefinition,s=this.playerConfig.defaultConfig;if(o.length>0){var u=null;o.map(function(l){(l.definition===a||l.definition===s)&&(u=l,l.selected=!0)}),u||(u=o[0]),this.changeDefinition(u)}}},{key:"renderItemList",value:function(n,o){var a=this,s=o&&o.definition?o.definition:"";o&&!Array.isArray(o)&&n.forEach(function(c){c.selected=!1});var u=0,l=n.map(function(c,f){var d={url:c.url,definition:c.definition||"",showText:a.getTextByLang(c)||c.definition,selected:!1};return(c.selected||!h.isUndefined(c.definition)&&c.definition===s)&&(d.selected=!0,u=f),d});Ct(Ue(i.prototype),"renderItemList",this).call(this,l,u)}},{key:"changeDefinitionList",value:function(n){if(Array.isArray(n)){var o=this.playerConfig,a=o.definition,s=o.defaultDefinition,u=a||this.config.defaultDefinition||"";this.config.list=n.map(function(l){return!l.text&&l.name&&(l.text=l.name),l.text||(l.text=l.definition),(l.definition===u||l.definition===s)&&(l.selected=!0),l}),a.list=n,this.renderItemList(n),this.config.list.length<2?this.hide():this.show()}}},{key:"changeDefinition",value:function(n,o){var a=this.player;a.switchURL?a.switchUrl(n.url):a.changeDefinition(n,o)}},{key:"onItemClick",value:function(n,o){var a=this.player.definitionList;Ct(Ue(i.prototype),"onItemClick",this).apply(this,arguments),this.emitUserAction(n,"change_definition",{from:o.from,to:o.to});for(var s=0;s<a.length;s++)o.to&&a[s].definition===o.to.definition&&(o.to.url=a[s].url),o.from&&a[s].definition===o.from.definition&&(o.from.url=a[s].url);this.player.changeDefinition(o.to,o.from)}}],[{key:"pluginName",get:function(){return"definition"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:3,list:[],defaultDefinition:"",disable:!1,hidePortrait:!1,className:"xgplayer-definition",isShowIcon:!0}}}]),i}(Gu);function sn(t){"@babel/helpers - typeof";return sn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},sn(t)}function X0(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function vs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,J0(r.key),r)}}function q0(t,e,i){return e&&vs(t.prototype,e),i&&vs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function J0(t){var e=Q0(t,"string");return sn(e)==="symbol"?e:String(e)}function Q0(t,e){if(sn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(sn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fe(){return typeof Reflect<"u"&&Reflect.get?Fe=Reflect.get.bind():Fe=function(e,i,r){var n=Z0(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Fe.apply(this,arguments)}function Z0(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=ke(t),t!==null););return t}function e1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&_o(t,e)}function _o(t,e){return _o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},_o(t,e)}function t1(t){var e=i1();return function(){var r=ke(t),n;if(e){var o=ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return n1(this,n)}}function n1(t,e){if(e&&(sn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return r1(t)}function r1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function i1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ke(t){return ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ke(t)}var o1=function(t){e1(i,t);var e=t1(i);function i(r){var n;return X0(this,i),n=e.call(this,r),n.curRate=1,n}return q0(i,[{key:"beforeCreate",value:function(n){var o=n.player.config.playbackRate,a=o?Array.isArray(o)?o:n.config.list:[];Array.isArray(a)&&(n.config.list=a.map(function(s){return typeof s=="number"?s={rate:s,text:"".concat(s,"x")}:!s.text&&s.rate&&(s.text="".concat(s.rate,"x")),s}))}},{key:"afterCreate",value:function(){var n=this;Fe(ke(i.prototype),"afterCreate",this).call(this),this.on(Js,function(){n.curValue!==n.player.playbackRate&&n.renderItemList()}),this.renderItemList()}},{key:"show",value:function(){!this.config.list||this.config.list.length===0||Fe(ke(i.prototype),"show",this).call(this)}},{key:"onItemClick",value:function(n,o){Fe(ke(i.prototype),"onItemClick",this).apply(this,arguments);var a=n.delegateTarget,s=Number(a.getAttribute("rate"));if(!s||s===this.curValue)return!1;var u={playbackRate:{from:this.player.playbackRate,to:s}};this.emitUserAction(n,"change_rate",{props:u}),this.curValue=s,this.player.playbackRate=s}},{key:"renderItemList",value:function(){var n=this,o=this.player.playbackRate||1;this.curValue=o;var a=0,s=this.config.list.map(function(u,l){var c={rate:u.rate};return c.rate===o&&(c.selected=!0,a=l),c.showText=n.getTextByLang(u),c});Fe(ke(i.prototype),"renderItemList",this).call(this,s,a)}},{key:"destroy",value:function(){Fe(ke(i.prototype),"destroy",this).call(this)}}],[{key:"pluginName",get:function(){return"playbackRate"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:4,list:[2,1.5,1,.75,.5],className:"xgplayer-playbackrate",isShowIcon:!0,hidePortrait:!1}}}]),i}(Gu);function un(t){"@babel/helpers - typeof";return un=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},un(t)}function a1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ys(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,u1(r.key),r)}}function s1(t,e,i){return e&&ys(t.prototype,e),i&&ys(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function u1(t){var e=l1(t,"string");return un(e)==="symbol"?e:String(e)}function l1(t,e){if(un(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(un(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function Fn(){return typeof Reflect<"u"&&Reflect.get?Fn=Reflect.get.bind():Fn=function(e,i,r){var n=c1(e,i);if(n){var o=Object.getOwnPropertyDescriptor(n,i);return o.get?o.get.call(arguments.length<3?e:r):o.value}},Fn.apply(this,arguments)}function c1(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&(t=ht(t),t!==null););return t}function f1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Po(t,e)}function Po(t,e){return Po=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Po(t,e)}function h1(t){var e=v1();return function(){var r=ht(t),n;if(e){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return d1(this,n)}}function d1(t,e){if(e&&(un(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return p1(t)}function p1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function v1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function ht(t){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},ht(t)}var y1='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" class="path_full" d="M11.7 13v1.3a1.17 1.17 0 01-1.3 1.3 1.17 1.17 0 01-1.3-1.3v-2.6a1.17 1.17 0 011.3-1.3H13a1.17 1.17 0 011.3 1.3A1.17 1.17 0 0113 13zm7.8 5.2v-1.3a1.3 1.3 0 012.6 0v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.3 1.3 0 010-2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',g1='<svg xmlns="http://www.w3.org/2000/svg" width="31" height="40" viewBox="0 -5 31 40"><path fill="#fff" d="M11.7 13v-1.3a1.17 1.17 0 011.3-1.3 1.17 1.17 0 011.3 1.3v2.6a1.17 1.17 0 01-1.3 1.3h-2.6a1.17 1.17 0 01-1.3-1.3 1.17 1.17 0 011.3-1.3zm7.8 5.2v1.3a1.3 1.3 0 01-2.6 0v-2.6a1.17 1.17 0 011.3-1.3h2.6a1.3 1.3 0 010 2.6zm3.9-9.1H7.8v13h15.6zm2.6 0v13a2.6 2.6 0 01-2.6 2.6H7.8a2.6 2.6 0 01-2.6-2.6v-13a2.6 2.6 0 012.6-2.6h15.6A2.6 2.6 0 0126 9.1z"/></svg>',gs=function(t){f1(i,t);var e=h1(i);function i(){return a1(this,i),e.apply(this,arguments)}return s1(i,[{key:"afterCreate",value:function(){var n=this;Fn(ht(i.prototype),"afterCreate",this).call(this),this.config.target&&(this.playerConfig.fullscreenTarget=this.config.target),this.initIcons(),this.on(fr,function(o){n.animate(o)}),this.btnClick=this.btnClick.bind(this),this.handleCssFullscreen=this.hook("cssFullscreen_change",this.btnClick,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.bind(["click","touchend"],this.handleCssFullscreen)}},{key:"initIcons",value:function(){var n=this.icons,o=this.find(".xgplayer-icon");o.appendChild(n.cssFullscreen),o.appendChild(n.exitCssFullscreen)}},{key:"btnClick",value:function(n){if(!this.config.disable){n.preventDefault(),n.stopPropagation();var o=this.player.isCssfullScreen;this.emitUserAction(n,"switch_cssfullscreen",{cssfullscreen:o}),o?this.player.exitCssFullscreen():this.player.getCssFullscreen()}}},{key:"animate",value:function(n){this.root&&(n?this.setAttr("data-state","full"):this.setAttr("data-state","normal"),this.switchTips(n))}},{key:"switchTips",value:function(n){var o=this.i18nKeys;this.changeLangTextKey(this.find(".xg-tips"),n?o.EXITCSSFULLSCREEN_TIPS:o.CSSFULLSCREEN_TIPS)}},{key:"registerIcons",value:function(){return{cssFullscreen:{icon:y1,class:"xg-get-cssfull"},exitCssFullscreen:{icon:g1,class:"xg-exit-cssfull"}}}},{key:"destroy",value:function(){Fn(ht(i.prototype),"destroy",this).call(this),this.unbind(["click","touchend"],this.btnClick)}},{key:"render",value:function(){return`<xg-icon class='xgplayer-cssfullscreen'>
    <div class="xgplayer-icon">
    </div>
    <div class="xg-tips" lang-key="`.concat(this.i18nKeys.CSSFULLSCREEN_TIPS,'">').concat(this.i18n.CSSFULLSCREEN_TIPS,`</div>
    </xg-icon>`)}}],[{key:"pluginName",get:function(){return"cssFullscreen"}},{key:"defaultConfig",get:function(){return{position:W.CONTROLS_RIGHT,index:1,disable:!1,target:null}}}]),i}(vt);function ln(t){"@babel/helpers - typeof";return ln=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ln(t)}function m1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ms(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,_1(r.key),r)}}function b1(t,e,i){return e&&ms(t.prototype,e),i&&ms(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function _1(t){var e=P1(t,"string");return ln(e)==="symbol"?e:String(e)}function P1(t,e){if(ln(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(ln(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function w1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&wo(t,e)}function wo(t,e){return wo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},wo(t,e)}function S1(t){var e=T1();return function(){var r=Mr(t),n;if(e){var o=Mr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return k1(this,n)}}function k1(t,e){if(e&&(ln(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return O1(t)}function O1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function T1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Mr(t){return Mr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Mr(t)}var E1=function(t){w1(i,t);var e=S1(i);function i(){return m1(this,i),e.apply(this,arguments)}return b1(i,[{key:"afterCreate",value:function(){var n=this;this.clickHandler=this.hook("errorRetry",this.errorRetry,{pre:function(a){a.preventDefault(),a.stopPropagation()}}),this.onError=this.hook("errorHandler",this.handleError),this.bind(".xgplayer-error-refresh","click",this.clickHandler),this.on(Le,function(){n.handleCanPlay()}),this.on(ei,function(o){n.onError(o)})}},{key:"errorRetry",value:function(n){this.emitUserAction(n,"error_retry",{}),this.player.retry()}},{key:"handleCanPlay",value:function(){h.removeClass(this.player.root,"xgplayer-is-error")}},{key:"handleError",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},o=this.player,a=n.errorType,s=o.error;if(!s)switch(a){case"decoder":s=this.i18n.MEDIA_ERR_DECODE;break;case"network":s=this.i18n.MEDIA_ERR_NETWORK;break;default:s=this.i18n.MEDIA_ERR_SRC_NOT_SUPPORTED}this.find(".xgplayer-error-text").innerHTML=s,this.find(".xgplayer-error-tips").innerHTML="".concat(this.i18n.REFRESH_TIPS,'<span class="xgplayer-error-refresh">').concat(this.i18n.REFRESH,"</span>")}},{key:"destroy",value:function(){this.unbind(".xgplayer-error-refresh","click",this.clickHandler)}},{key:"render",value:function(){return`<xg-error class="xgplayer-error">
      <div class="xgplayer-errornote">
       <span class="xgplayer-error-text"></span>
       <span class="xgplayer-error-tips"><em class="xgplayer-error-refresh"></em></span>
      </div>
    </xg-error>`}}],[{key:"pluginName",get:function(){return"error"}}]),i}(F);function cn(t){"@babel/helpers - typeof";return cn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(t)}function C1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function bs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,R1(r.key),r)}}function I1(t,e,i){return e&&bs(t.prototype,e),i&&bs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function R1(t){var e=$1(t,"string");return cn(e)==="symbol"?e:String(e)}function $1(t,e){if(cn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(cn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function x1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&So(t,e)}function So(t,e){return So=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},So(t,e)}function L1(t){var e=N1();return function(){var r=jr(t),n;if(e){var o=jr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return A1(this,n)}}function A1(t,e){if(e&&(cn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return D1(t)}function D1(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function N1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function jr(t){return jr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},jr(t)}var M1=function(t){x1(i,t);var e=L1(i);function i(){return C1(this,i),e.apply(this,arguments)}return I1(i,[{key:"afterCreate",value:function(){var n=this;this.intervalId=0,this.customConfig=null,this.bind(".highlight",["click","touchend"],function(o){(n.config.onClick||n.customOnClick)&&(o.preventDefault(),o.stopPropagation(),n.customOnClick?n.customOnClick(o):n.config.onClick(o))}),this.player.showPrompt=function(){n.show.apply(n,arguments)},this.player.hidePrompt=function(){n.hide()}}},{key:"setStyle",value:function(n){var o=this;Object.keys(n).map(function(a){o.root.style[a]=n[a]})}},{key:"show",value:function(n){var o=this,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){};if(n){this.customOnClick=s;var u=this.config.interval;if(this.intervalId&&(clearTimeout(this.intervalId),this.intervalId=null),a.style&&this.setStyle(a.style),typeof n=="string"?this.find(".xgplayer-prompt-detail").innerHTML=n:this.find(".xgplayer-prompt-detail").innerHTML="".concat(n.text||"")+"".concat(n.highlight?'<i class="highlight">'.concat(n.highlight,"</i>"):""),a.mode==="arrow"&&h.addClass(this.root,"arrow"),a.preventScreenOverflow){var l=this.root.getBoundingClientRect(),c=l.left,f=l.right,d=document.documentElement.clientWidth||document.body.clientWidth;if(c<0){var p=Number((Math.abs(c)/d*100).toFixed(2));if(a.style.left){var y=parseInt(a.style.left);this.setStyle({left:"".concat(y+p+.5,"%")})}}if(f>=d){var b=Number(((Math.abs(f)-d)/d*100).toFixed(2));if(a.style.left){var g=parseInt(a.style.left);this.setStyle({left:"".concat(g-b-.5,"%")})}}}h.addClass(this.root,"show");var T=typeof a.autoHide=="boolean"?a.autoHide:this.config.autoHide;if(T){var E=a.interval||u;this.intervalId=setTimeout(function(){o.hide()},E)}}}},{key:"hide",value:function(){h.removeClass(this.root,"show"),h.removeClass(this.root,"arrow"),this.root.removeAttribute("style"),this.customOnClick=null}},{key:"render",value:function(){return'<xg-prompt class="xgplayer-prompt '.concat(k.CONTROLS_FOLLOW,`">
    <span class="xgplayer-prompt-detail"></span>
    </xg-prompt>`)}}],[{key:"pluginName",get:function(){return"prompt"}},{key:"defaultConfig",get:function(){return{interval:3e3,style:{},mode:"arrow",autoHide:!0,preventScreenOverflow:!1,detail:{text:"",highlight:""},onClick:function(){}}}}]),i}(F),_s={time:0,text:"",id:1,duration:1,color:"#fff",style:{},width:6,height:6};function Wu(t){Object.keys(_s).map(function(e){t[e]===void 0&&(t[e]=_s[e])})}var Ps={initDots:function(){var e=this;this._ispots.map(function(i){e.createDot(i,!1)}),this._ispotsInit=!0},createDot:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,r=this.player.plugins.progress;if(r&&(i&&(Wu(e),this._ispots.push(e)),!(!this._ispotsInit&&i))){var n=this.calcuPosition(e.time,e.duration),o=e.style||{},a=e.stylePreferred;o.left=a&&o.left!==void 0?o.left:"".concat(n.left,"%"),o.width=a&&o.width!==void 0?o.width:"".concat(n.width,"%");var s="xgspot_".concat(e.id," xgplayer-spot");n.isMini&&(s+=" mini");var u=h.createDom("xg-spot",e.template||"",{"data-text":e.text,"data-time":e.time,"data-id":e.id},s);Object.keys(o).map(function(l){u.style[l]=o[l]}),r.outer&&r.outer.appendChild(u)}},findDot:function(e){if(this.player.plugins.progress){var i=this._ispots.filter(function(r,n){return r.id===e});return i.length>0?i[0]:null}},updateDot:function(e){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,r=this.player.plugins.progress;if(r){var n=this.findDot(e.id);if(n&&Object.keys(e).map(function(u){n[u]=e[u]}),!!this._ispotsInit){var o=r.find('xg-spot[data-id="'.concat(e.id,'"]'));if(o){var a=this.calcuPosition(e.time,e.duration),s=e.style||{};s.left="".concat(a.left,"%"),s.width="".concat(a.width,"%"),o.setAttribute("data-text",e.text),o.setAttribute("data-time",e.time),a.isMini?h.addClass(o,"mini"):h.removeClass(o,"mini"),Object.keys(s).map(function(u){o.style[u]=s[u]}),i&&this.showDot(e.id)}}}},deleteDot:function(e){var i=this._ispots,r=this.player.plugins.progress;if(r){for(var n=[],o=0;o<i.length;o++)i[o].id===e&&n.push(o);for(var a=n.length,s=a-1;s>=0;s--)if(i.splice(n[s],1),this._ispotsInit){var u=r.find('xg-spot[data-id="'.concat(e,'"]'));u&&u.parentElement.removeChild(u)}}},deleteAllDots:function(){var e=this.player.plugins.progress;if(e){if(!this._ispotsInit){this._ispots=[];return}for(var i=e.root.getElementsByTagName("xg-spot"),r=i.length-1;r>=0;r--)e.outer.removeChild(i[r]);this._ispots=[]}},updateAllDots:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],r=this.player.plugins.progress;if(r){if(!this._ispotsInit){this._ispots=i;return}this._ispots=[];var n=r.root.getElementsByTagName("xg-spot"),o=n.length;if(o>i.length)for(var a=o-1;a>i.length-1;a--)r.outer.removeChild(n[a]);i.map(function(s,u){u<o?(n[u].setAttribute("data-id","".concat(s.id)),e._ispots.push(s),e.updateDot(s)):e.createDot(s)})}},updateAllDotsStyles:function(){var e=this,i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,r=this.player.plugins.progress;if(r!=null&&r.root)for(var n=r.root.getElementsByTagName("xg-spot"),o=function(l){l=n[a];var c=l.getAttribute("data-id"),f=e.findDot(c);if(f&&f.activeStyle&&f.style&&f.stylePreferred){var d=i?f==null?void 0:f.activeStyle:f==null?void 0:f.style;d&&Object.keys(d).map(function(p){l.style[p]=d[p]})}s=l},a=0,s;a<n.length;a++)o(s)},getAllDotsDom:function(){var e=this.player.plugins.progress;if(!e)return[];var i=e.root.getElementsByTagName("xg-spot");return i},getDotDom:function(e){var i=this.player.plugins.progress;if(i)return i.find('xg-spot[data-id="'.concat(e,'"]'))}};function j1(t){var e=t.config,i=t.player;Object.keys(Ps).map(function(n){t[n]=Ps[n].bind(t)});var r=i.config.progressDot||e.ispots||[];t._ispots=r.map(function(n){return Wu(n),n}),t._ispotsInit=!1,i.once(Sn,function(){t.initDots()})}function fn(t){"@babel/helpers - typeof";return fn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},fn(t)}function B1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ws(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Yu(r.key),r)}}function F1(t,e,i){return e&&ws(t.prototype,e),i&&ws(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function H1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ko(t,e)}function ko(t,e){return ko=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},ko(t,e)}function V1(t){var e=z1();return function(){var r=Br(t),n;if(e){var o=Br(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return U1(this,n)}}function U1(t,e){if(e&&(fn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return qe(t)}function qe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function z1(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Br(t){return Br=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Br(t)}function _t(t,e,i){return e=Yu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Yu(t){var e=K1(t,"string");return fn(e)==="symbol"?e:String(e)}function K1(t,e){if(fn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(fn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Pt={dragmove:"onProgressDragMove",dragstart:"onProgressDragStart",dragend:"onProgressDragEnd",click:"onProgressClick",mouseover:"onProgressMouseOver",mouseenter:"onProgressMouseEnter",mouseleave:"onProgressMouseLeave"},G1=function(t){H1(i,t);var e=V1(i);function i(r){var n;return B1(this,i),n=e.call(this,r),_t(qe(n),"onMousemove",function(o){if(!n.config.disable){if(h.hasClass(o.target,"xg-spot-content")&&n.config.isHideThumbnailHover){n.player.plugins.progress.onMouseLeave(o);return}(n._state.f||h.hasClass(o.target,"xg-spot-content"))&&(h.event(o),o.stopPropagation())}}),_t(qe(n),"onMousedown",function(o){n.config.disable||(n._state.f||h.hasClass(o.target,"xg-spot-content"))&&(h.event(o),o.stopPropagation())}),_t(qe(n),"onMouseup",function(o){if(n.isDrag){var a=n.player.plugins.progress;a&&a.pos&&(a.onMouseUp(o),!a.pos.isEnter&&a.onMouseLeave(o))}}),_t(qe(n),"onDotMouseLeave",function(o){if(!n.config.disable){n._curDot.removeEventListener("mouseleave",n.onDotMouseLeave),n.blurDot(o.target),n._curDot=null;var a=n.player.plugins.progress;a&&a.enableBlur(),n.show()}}),_t(qe(n),"onProgressMouseLeave",function(o,a){n.updateAllDotsStyles(!1)}),_t(qe(n),"onProgressMouseOver",function(o,a){if(!n.config.disable&&h.hasClass(a.target,"xgplayer-spot")&&!n._curDot){n._curDot=a.target,n.focusDot(a.target),n._curDot.children.length>0&&n.hide();var s=n.player.plugins.progress;s&&s.disableBlur(),n._curDot.addEventListener("mouseleave",n.onDotMouseLeave)}}),n._ispots=[],n.videoPreview=null,n.videothumbnail=null,n.thumbnail=null,n._state={now:0,f:!1},n}return F1(i,[{key:"beforeCreate",value:function(n){var o=n.player.plugins.progress;o&&(n.root=o.root)}},{key:"afterCreate",value:function(){var n=this;this._curDot=null,this.handlerSpotClick=this.hook("spotClick",function(o,a){a.time&&n.player.seek(a.time)}),j1(this),this.config.disable&&this.disable(),this.extTextRoot=this.find(".xg-spot-ext-text")}},{key:"setConfig",value:function(n){var o=this;n&&Object.keys(n).map(function(a){o.config[a]=n[a]})}},{key:"onPluginsReady",value:function(){var n=this.player;n.plugins.progress&&(this.previewLine=this.find(".xg-spot-line"),this.timePoint=this.find(".xgplayer-progress-point"),this.timeText=this.find(".xg-spot-time"),this.tipText=this.find(".spot-inner-text"),this._hasThumnail=!1,this.registerThumbnail(),this.bindEvents())}},{key:"bindEvents",value:function(){var n=this,o=this.player.plugins.progress;if(o&&(Object.keys(Pt).map(function(s){n[Pt[s]]=n[Pt[s]].bind(n),o.addCallBack(s,n[Pt[s]])}),D.device!=="mobile")){this.bind(".xg-spot-info","mousemove",this.onMousemove),this.bind(".xg-spot-info","mousedown",this.onMousedown),this.bind(".xg-spot-info","mouseup",this.onMouseup);var a=this.hook("previewClick",function(){});this.handlerPreviewClick=function(s){s.stopPropagation(),a(parseInt(n._state.now*1e3,10)/1e3,s)},this.bind(".xg-spot-content","mouseup",this.handlerPreviewClick)}}},{key:"onProgressMouseEnter",value:function(n,o){this.onProgressMove(n,o),this.updateAllDotsStyles(!0)}},{key:"onProgressMove",value:function(n,o){this.config.disable||!this.player.duration||this.updatePosition(n.offset,n.width,n.currentTime,n.e)}},{key:"onProgressDragMove",value:function(n,o){this.config.disable||!this.player.duration||this.onProgressMove(n,o)}},{key:"onProgressDragStart",value:function(n){this.config.disable||!this.player.duration||(this.isDrag=!0,this.videoPreview&&h.addClass(this.videoPreview,"show"))}},{key:"onProgressDragEnd",value:function(n){this.config.disable||!this.player.duration||(this.isDrag=!1,this.videoPreview&&h.removeClass(this.videoPreview,"show"))}},{key:"onProgressClick",value:function(n,o){if(!this.config.disable&&h.hasClass(o.target,"xgplayer-spot")){o.stopPropagation(),o.preventDefault();var a={};["time","id","text"].map(function(s){a[s]=o.target.getAttribute("data-".concat(s))}),a.time&&(a.time=Number(a.time)),this.handlerSpotClick(o,a)}}},{key:"updateLinePos",value:function(n,o){var a=this.root,s=this.previewLine,u=this.timePoint,l=this.player,c=this.config,f=l.controls.mode,d=f==="flex",p=a.getBoundingClientRect().width;if(!(!p&&this._hasThumnail)){var y=u.getBoundingClientRect().width;p=this._hasThumnail&&p<c.width?c.width:p;var b=n-p/2,g,T;b<0&&!d?(b=0,g=n-p/2,!this.thumbnail&&(T=n-p/2-y/2)):b>o-p&&!d?(g=b-(o-p),!this.thumbnail&&(T=b-(o-p)-y/2),b=o-p):(g=0,!this.thumbnail&&(T=-y/2)),g!==void 0&&(s.style.transform="translateX(".concat(g.toFixed(2),"px)")),T!==void 0&&(u.style.transform="translateX(".concat(T.toFixed(2),"px)")),a.style.transform="translateX(".concat(b.toFixed(2),"px) translateZ(0)")}}},{key:"updateTimeText",value:function(n){var o=this.timeText,a=this.timePoint;o.textContent=n,!this.thumbnail&&(a.textContent=n)}},{key:"updatePosition",value:function(n,o,a,s){var u=this.root,l=this.config,c=this._state;if(u){this.updateLinePos(n,o),c.now=a;var f=h.format(a);s&&s.target&&h.hasClass(s.target,"xgplayer-spot")?(this.showTips(s.target.getAttribute("data-text"),!1,f),this.focusDot(s.target),c.f=!0,l.isFocusDots&&c.f&&(c.now=parseInt(s.target.getAttribute("data-time"),10))):l.defaultText?(c.f=!1,this.showTips(l.defaultText,!0,f)):(c.f=!1,this.hideTips("")),this.updateTimeText(f),this.updateThumbnails(c.now)}}},{key:"updateThumbnails",value:function(n){var o=this.player,a=this.videoPreview,s=this.config,u=o.plugins.thumbnail;if(u&&u.usable){this.thumbnail&&u.update(this.thumbnail,n,s.width,s.height);var l=a&&a.getBoundingClientRect();this.videothumbnail&&u.update(this.videothumbnail,n,l.width,l.height)}}},{key:"registerThumbnail",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(D.device!=="mobile"){var o=this.player,a=this.config,s=o.getPlugin("thumbnail");if(s&&s.setConfig(n),!s||!s.usable||!a.isShowThumbnail){h.addClass(this.root,"short-line no-thumbnail");return}else h.removeClass(this.root,"short-line no-thumbnail");a.mode==="short"&&h.addClass(this.root,"short-line"),this._hasThumnail=!0;var u=this.find(".xg-spot-thumbnail");this.thumbnail=s.createThumbnail(u,"progress-thumbnail"),a.isShowCoverPreview&&(this.videoPreview=h.createDom("xg-video-preview","",{},"xgvideo-preview"),o.root.appendChild(this.videoPreview),this.videothumbnail=s.createThumbnail(this.videoPreview,"xgvideo-thumbnail")),this.updateThumbnails(0)}}},{key:"calcuPosition",value:function(n,o){var a=this.player.plugins.progress,s=this.player,u=a.root.getBoundingClientRect().width,l=s.duration/u*6;return n+o>s.duration&&(o=s.duration-n),n/s.duration*100,o/s.duration,{left:n/s.duration*100,width:o/s.duration*100,isMini:o<l}}},{key:"showDot",value:function(n){var o=this.findDot(n);if(o){var a=this.root.getBoundingClientRect(),s=a.width,u=o.time/this.player.duration*s;this.updatePosition(u,s,o.time)}}},{key:"focusDot",value:function(n,o){n&&(o||(o=n.getAttribute("data-id")),h.addClass(n,"active"),this._activeDotId=o)}},{key:"blurDot",value:function(n){if(!n){var o=this._activeDotId;n=this.getDotDom(o)}n&&(h.removeClass(n,"active"),this._activeDotId=null)}},{key:"showTips",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";h.addClass(this.root,"no-timepoint"),n&&(h.addClass(this.find(".xg-spot-content"),"show-text"),o&&this.config.mode==="production"?(h.addClass(this.root,"product"),this.tipText.textContent=n):(h.removeClass(this.root,"product"),this.tipText.textContent=this._hasThumnail?n:"".concat(a," ").concat(n)))}},{key:"hideTips",value:function(){h.removeClass(this.root,"no-timepoint"),this.tipText.textContent="",h.removeClass(this.find(".xg-spot-content"),"show-text"),h.removeClass(this.root,"product")}},{key:"hide",value:function(){h.addClass(this.root,"hide")}},{key:"show",value:function(){h.removeClass(this.root,"hide")}},{key:"enable",value:function(){var n=this.config,o=this.playerConfig;this.config.disable=!1,this.show(),!this.thumbnail&&n.isShowThumbnail&&this.registerThumbnail(o.thumbnail||{})}},{key:"disable",value:function(){this.config.disable=!0,this.hide()}},{key:"destroy",value:function(){var n=this,o=this.player.plugins.progress;o&&Object.keys(Pt).map(function(a){o.removeCallBack(a,n[Pt[a]])}),this.videothumbnail=null,this.thumbnail=null,this.videoPreview&&this.player.root.removeChild(this.videoPreview),this.unbind(".xg-spot-info","mousemove",this.onMousemove),this.unbind(".xg-spot-info","mousedown",this.onMousedown),this.unbind(".xg-spot-info","mouseup",this.onMouseup),this.unbind(".xg-spot-content","mouseup",this.handlerPreviewClick)}},{key:"render",value:function(){return D.device==="mobile"||this.playerConfig.isMobileSimulateMode==="mobile"?"":'<div class="xg-spot-info '.concat(this.config.mode==="short"?"short-line":"",`">
      <div class="xg-spot-content">
        <div class="xg-spot-thumbnail">
          <span class="xg-spot-time"></span>
        </div>
        <div class="xg-spot-text"><span class="spot-inner-text"></span></div>
      </div>
      <div class="xgplayer-progress-point">00:00</div>
      <div class="xg-spot-ext-text"></div>
      <div class="xg-spot-line"></div>
    </div>`)}}],[{key:"pluginName",get:function(){return"progresspreview"}},{key:"defaultConfig",get:function(){return{index:1,miniWidth:6,ispots:[],defaultText:"",isFocusDots:!0,isHideThumbnailHover:!0,isShowThumbnail:!0,isShowCoverPreview:!1,mode:"",disable:!1,width:160,height:90}}}]),i}(F);function hn(t){"@babel/helpers - typeof";return hn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},hn(t)}function W1(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ss(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,X1(r.key),r)}}function Y1(t,e,i){return e&&Ss(t.prototype,e),i&&Ss(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function X1(t){var e=q1(t,"string");return hn(e)==="symbol"?e:String(e)}function q1(t,e){if(hn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(hn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function J1(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Oo(t,e)}function Oo(t,e){return Oo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Oo(t,e)}function Q1(t){var e=tP();return function(){var r=Fr(t),n;if(e){var o=Fr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Z1(this,n)}}function Z1(t,e){if(e&&(hn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return eP(t)}function eP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function tP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Fr(t){return Fr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Fr(t)}var nP=function(t){J1(i,t);var e=Q1(i);function i(r){var n;return W1(this,i),n=e.call(this,r),n.ratio=1,n.interval=null,n._preloadMark={},n}return Y1(i,[{key:"afterCreate",value:function(){var n=this;this.usable&&this.initThumbnail(),this.on([Sn],function(){var o=n.config,a=o.pic_num,s=o.interval;n.usable&&(n.interval=s>0?s:Math.round(n.player.duration*1e3/a)/1e3)})}},{key:"setConfig",value:function(n){var o=this;if(n){var a=Object.keys(n);a.length<1||(a.forEach(function(s){o.config[s]=n[s]}),this.usable&&this.initThumbnail())}}},{key:"usable",get:function(){var n=this.config,o=n.urls,a=n.pic_num;return o&&o.length>0&&a>0}},{key:"initThumbnail",value:function(){var n=this.config,o=n.width,a=n.height,s=n.pic_num,u=n.interval;this.ratio=o/a*100,this.interval=u||Math.round(this.player.duration/s),this._preloadMark={}}},{key:"getUrlByIndex",value:function(n){return n>=0&&n<this.config.urls.length?this.config.urls[n]:""}},{key:"preload",value:function(n){var o=this;if(!this._preloadMark[n]){var a=this.config.urls,s=a.length,u=[];n>0&&u.push(n-1),u.push(n),n>0&&n<s-1&&u.push(n+1),u.map(function(l){!o._preloadMark[l]&&l>=0&&l<s&&(o._preloadMark[l]=1,h.preloadImg(a[l],function(){o._preloadMark[l]=2}))})}}},{key:"getPosition",value:function(n){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=this.config,u=s.pic_num,l=s.row,c=s.col,f=s.width,d=s.height;this.interval=Math.round(this.player.duration/u);var p=Math.ceil(n/this.interval);p=p>u?u:p;var y=p<l*c?0:Math.ceil(p/(l*c))-1,b=p-y*(c*l),g=b>0?Math.ceil(b/c)-1:0,T=b>0?b-g*c-1:0,E=0,O=0;if(o&&a){var z=o/a;z<f/d?(O=a,E=O*(f/d)):(E=o,O=E/(f/d))}else a?o||(O=a||d,E=O*(f/d)):(E=o||f,O=E/(f/d));var H=this.getUrlByIndex(y);return{urlIndex:y,rowIndex:g,colIndex:T,url:H,height:O,width:E,style:{backgroundImage:"url(".concat(H,")"),backgroundSize:"".concat(E*c,"px auto"),backgroundPosition:"-".concat(T*E,"px -").concat(g*O,"px"),width:"".concat(E,"px"),height:"".concat(O,"px")}}}},{key:"update",value:function(n,o){var a=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,u=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"",l=this.config,c=l.pic_num,f=l.urls;if(!(c<=0||!f||f.length===0)){var d=this.getPosition(o,a,s);this.preload(d.urlIndex),Object.keys(d.style).map(function(p){n.style[p]=d.style[p]}),Object.keys(u).map(function(p){n.style[p]=u[p]})}}},{key:"changeConfig",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};this.setConfig(n)}},{key:"createThumbnail",value:function(n,o){var a=h.createDom("xg-thumbnail","",{},"thumbnail ".concat(o));return n&&n.appendChild(a),a}}],[{key:"pluginName",get:function(){return"thumbnail"}},{key:"defaultConfig",get:function(){return{isShow:!1,urls:[],pic_num:0,col:0,row:0,height:90,width:160,scale:1,className:"",hidePortrait:!1}}}]),i}(F);function dn(t){"@babel/helpers - typeof";return dn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},dn(t)}function rP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ks(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,oP(r.key),r)}}function iP(t,e,i){return e&&ks(t.prototype,e),i&&ks(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function oP(t){var e=aP(t,"string");return dn(e)==="symbol"?e:String(e)}function aP(t,e){if(dn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(dn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function sP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&To(t,e)}function To(t,e){return To=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},To(t,e)}function uP(t){var e=fP();return function(){var r=Hr(t),n;if(e){var o=Hr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return lP(this,n)}}function lP(t,e){if(e&&(dn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cP(t)}function cP(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function fP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Hr(t){return Hr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Hr(t)}var hP=function(t){sP(i,t);var e=uP(i);function i(){return rP(this,i),e.apply(this,arguments)}return iP(i,[{key:"afterCreate",value:function(){}},{key:"update",value:function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{cached:0,played:0},o=arguments.length>1?arguments[1]:void 0;!o||!this.root||(n.cached&&(this.find("xg-mini-progress-cache").style.width="".concat(n.cached/o*100,"%")),n.played&&(this.find("xg-mini-progress-played").style.width="".concat(n.played/o*100,"%")))}},{key:"render",value:function(){if(!(!this.playerConfig.progress||!this.playerConfig.miniprogress))return`<xg-mini-progress class="xg-mini-progress">
    <xg-mini-progress-cache class="xg-mini-progress-cache"></xg-mini-progress-cache>
    <xg-mini-progress-played class="xg-mini-progress-played"></xg-mini-progress-played>
    </xg-mini-progress>`}}],[{key:"pluginName",get:function(){return"MiniProgress"}},{key:"defaultConfig",get:function(){return{}}}]),i}(F);function pn(t){"@babel/helpers - typeof";return pn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},pn(t)}function dP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Os(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Xu(r.key),r)}}function pP(t,e,i){return e&&Os(t.prototype,e),i&&Os(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function vP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Eo(t,e)}function Eo(t,e){return Eo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Eo(t,e)}function yP(t){var e=mP();return function(){var r=Vr(t),n;if(e){var o=Vr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return gP(this,n)}}function gP(t,e){if(e&&(pn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Me(t)}function Me(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function mP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Vr(t){return Vr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Vr(t)}function En(t,e,i){return e=Xu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Xu(t){var e=bP(t,"string");return pn(e)==="symbol"?e:String(e)}function bP(t,e){if(pn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(pn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var wt={REAL_TIME:"realtime",FIRST_FRAME:"firstframe",FRAME_RATE:"framerate",POSTER:"poster"};function _P(){try{return parseInt(window.performance.now(),10)}catch{return new Date().getTime()}}function PP(){try{var t=document.createElement("canvas").getContext;return!!t}catch{return!1}}var nr=null,wP=function(t){vP(i,t);var e=yP(i);function i(){var r;dP(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),En(Me(r),"onLoadedData",function(s){r.player&&(r._frameCount=r.config.startFrameCount,r.stop(),r.renderOnTimeupdate(s),r.off(ye,r.renderOnTimeupdate),r.on(ye,r.renderOnTimeupdate))}),En(Me(r),"onVisibilitychange",function(s){document.visibilityState==="visible"?r._checkIfCanStart()&&r.start():document.visibilityState==="hidden"&&r.stop()}),En(Me(r),"renderOnTimeupdate",function(s){if(r._frameCount>0)r.renderOnce(),r._frameCount--;else{r._isLoaded=!0,r.off(ye,r.renderOnTimeupdate);var u=r.config.startInterval;!r.player.paused&&r._checkIfCanStart()&&r.start(0,u)}}),En(Me(r),"start",function(s,u){var l=r.player.video,c=_P(),f=r.checkVideoIsSupport(l);!f||!r.canvasCtx||(u||(u=r.interval),r.stop(),l.videoWidth&&l.videoHeight&&(r.videoPI=l.videoHeight>0?parseInt(l.videoWidth/l.videoHeight*100,10):0,(r.config.mode===wt.REAL_TIME||c-r.preTime>=u)&&(l&&l.videoWidth&&r.update(f,r.videoPI),r.preTime=c)),r.frameId=r._loopType==="timer"?h.setTimeout(Me(r),r.start,u):h.requestAnimationFrame(r.start))}),En(Me(r),"stop",function(){r.frameId&&(r._loopType==="timer"?h.clearTimeout(Me(r),r.frameId):h.cancelAnimationFrame(r.frameId),r.frameId=null)}),r}return pP(i,[{key:"afterCreate",value:function(){var n=this;this.playerConfig.dynamicBg===!0&&(this.config.disable=!1),i.isSupport||(this.config.disable=!0);var o=this.config,a=o.disable,s=o.mode,u=o.frameRate;a||(this._pos={width:0,height:0,rwidth:0,rheight:0,x:0,y:0,pi:0},this.isStart=!1,this._isLoaded=!1,this.videoPI=0,this.preTime=0,this.interval=parseInt(1e3/u,10),this.canvas=null,this.canvasCtx=null,this._frameCount=0,this._loopType=this.config.mode!==wt.REAL_TIME&&this.interval>=1e3?"timer":"animation",this.once(ni,function(){n.player&&(n.init(),n.renderByPoster(),n.player.paused||n.start())}),s!==wt.POSTER&&(s!==wt.FIRST_FRAME&&(this.on(kn,function(){n.stop()}),this.on(be,function(){var l=n.config.startInterval;n._checkIfCanStart()&&n.start(0,l)}),this.on(pt,function(){n.stop()})),this.on(It,this.onLoadedData),this.on(ti,function(){n._isLoaded=!1,n.stop()}),document.addEventListener("visibilitychange",this.onVisibilitychange)))}},{key:"setConfig",value:function(n){var o=this;Object.keys(n).forEach(function(a){a==="root"&&n[a]!==o.config[a]?o.reRender(n[a]):a==="frameRate"?o.interval=parseInt(1e3/n[a],10):a==="disable"&&n[a]&&o.stop(),o.config[a]=n[a]})}},{key:"init",value:function(n){var o=this.player,a=this.config;this.canvasFilter=i.supportCanvasFilter();try{var s=n||a.root;s||(s=a.isInnerRender&&o.innerContainer||o.root),s.insertAdjacentHTML("afterbegin",'<div class="xgplayer-dynamic-bg" data-index="'.concat(a.index,`"><canvas>
        </canvas><xgmask></xgmask></div>`)),this.root=s.children[0],this.canvas=this.find("canvas"),this.canvasFilter||(this.canvas.style.filter=a.filter,this.canvas.style.webkitFilter=a.filter),this.mask=this.find("xgmask"),a.addMask&&(this.mask.style.background=a.maskBg),this.canvasCtx=this.canvas.getContext("2d")}catch(u){A.logError("plugin:DynamicBg",u)}}},{key:"reRender",value:function(n){var o=this.config.disable;if(!(!o&&!this.root)){this.stop();var a=this.root?this.root.parentElement:null;if(a!==n&&a.removeChild(this.root),!n){this.root=null;return}this.init(n),this.renderOnce();var s=this.config.startInterval;this._checkIfCanStart()&&this.start(0,s)}}},{key:"checkVideoIsSupport",value:function(n){if(!n)return null;var o=n&&n instanceof window.HTMLVideoElement?n:n.canvas?n.canvas:n.flyVideo?n.flyVideo:null;if(o&&!(D.browser==="safari"&&h.isMSE(o)))return o;var a=o?o.tagName.toLowerCase():"";return a==="canvas"||a==="img"?o:null}},{key:"renderByPoster",value:function(){var n=this.playerConfig.poster;if(n){var o=h.typeOf(n)==="String"?n:h.typeOf(n.poster)==="String"?n.poster:null;this.updateImg(o)}}},{key:"_checkIfCanStart",value:function(){var n=this.config.mode;return this._isLoaded&&!this.player.paused&&n!==wt.FIRST_FRAME&&n!==wt.POSTER}},{key:"renderOnce",value:function(){var n=this.player.video;if(!(!n.videoWidth||!n.videoHeight)){this.videoPI=parseInt(n.videoWidth/n.videoHeight*100,10);var o=this.checkVideoIsSupport(n);o&&this.update(o,this.videoPI)}}},{key:"updateImg",value:function(n){var o=this;if(n){var a=this.canvas.getBoundingClientRect(),s=a.width,u=a.height,l=new window.Image;l.onload=function(){if(!(!o.canvas||o.frameId||o.isStart)){o.canvas.height=u,o.canvas.width=s;var c=parseInt(s/u*100,10);o.update(l,c),l=null}},l.src=n}}},{key:"update",value:function(n,o){if(!(!this.canvas||!this.canvasCtx||!o))try{var a=this._pos,s=this.config,u=this.canvas.getBoundingClientRect(),l=u.width,c=u.height;if(l!==a.width||c!==a.height||a.pi!==o){var f=parseInt(l/c*100,10);a.pi=o,a.width!==l&&(a.width=this.canvas.width=l),a.height!==c&&(a.height=this.canvas.height=c);var d=c,p=l;f<o?p=parseInt(c*o/100,10):f>o&&(d=parseInt(l*100/o,10)),a.rwidth=p*s.multiple,a.rheight=d*s.multiple,a.x=(l-a.rwidth)/2,a.y=(c-a.rheight)/2}this.canvasFilter&&(this.canvasCtx.filter=s.filter),this.canvasCtx.drawImage(n,a.x,a.y,a.rwidth,a.rheight)}catch(y){A.logError("plugin:DynamicBg",y)}}},{key:"destroy",value:function(){this.stop(),document.removeEventListener("visibilitychange",this.onVisibilitychange),this.canvasCtx=null,this.canvas=null}},{key:"render",value:function(){return""}}],[{key:"pluginName",get:function(){return"dynamicBg"}},{key:"defaultConfig",get:function(){return{isInnerRender:!1,disable:!0,index:-1,mode:"framerate",frameRate:10,filter:"blur(50px)",startFrameCount:2,startInterval:0,addMask:!0,multiple:1.2,maskBg:"rgba(0,0,0,0.7)"}}},{key:"isSupport",get:function(){return typeof nr=="boolean"||(nr=PP()),nr}},{key:"supportCanvasFilter",value:function(){return!(D.browser==="safari"||D.browser==="firefox")}}]),i}(F);const SP={LANG:"zh-cn",TEXT:{ERROR_TYPES:{network:{code:1,msg:"视频下载错误"},mse:{code:2,msg:"流追加错误"},parse:{code:3,msg:"解析错误"},format:{code:4,msg:"格式错误"},decoder:{code:5,msg:"解码错误"},runtime:{code:6,msg:"语法错误"},timeout:{code:7,msg:"播放超时"},other:{code:8,msg:"其他错误"}},HAVE_NOTHING:"没有关于音频/视频是否就绪的信息",HAVE_METADATA:"音频/视频的元数据已就绪",HAVE_CURRENT_DATA:"关于当前播放位置的数据是可用的，但没有足够的数据来播放下一帧/毫秒",HAVE_FUTURE_DATA:"当前及至少下一帧的数据是可用的",HAVE_ENOUGH_DATA:"可用数据足以开始播放",NETWORK_EMPTY:"音频/视频尚未初始化",NETWORK_IDLE:"音频/视频是活动的且已选取资源，但并未使用网络",NETWORK_LOADING:"浏览器正在下载数据",NETWORK_NO_SOURCE:"未找到音频/视频来源",MEDIA_ERR_ABORTED:"取回过程被用户中止",MEDIA_ERR_NETWORK:"网络错误",MEDIA_ERR_DECODE:"解码错误",MEDIA_ERR_SRC_NOT_SUPPORTED:"不支持的音频/视频格式",REPLAY:"重播",ERROR:"网络连接似乎出现了问题",PLAY_TIPS:"播放",PAUSE_TIPS:"暂停",PLAYNEXT_TIPS:"下一集",DOWNLOAD_TIPS:"下载",ROTATE_TIPS:"旋转",RELOAD_TIPS:"重新载入",FULLSCREEN_TIPS:"进入全屏",EXITFULLSCREEN_TIPS:"退出全屏",CSSFULLSCREEN_TIPS:"进入样式全屏",EXITCSSFULLSCREEN_TIPS:"退出样式全屏",TEXTTRACK:"字幕",PIP:"画中画",SCREENSHOT:"截图",LIVE:"正在直播",OFF:"关闭",OPEN:"开启",MINI_DRAG:"点击按住可拖动视频",MINISCREEN:"小屏幕",REFRESH_TIPS:"请试试",REFRESH:"刷新",FORWARD:"快进中",LIVE_TIP:"直播"}};function vn(t){"@babel/helpers - typeof";return vn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},vn(t)}function Ts(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(n){return Object.getOwnPropertyDescriptor(t,n).enumerable})),i.push.apply(i,r)}return i}function Cn(t){for(var e=1;e<arguments.length;e++){var i=arguments[e]!=null?arguments[e]:{};e%2?Ts(Object(i),!0).forEach(function(r){Je(t,r,i[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):Ts(Object(i)).forEach(function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(i,r))})}return t}function kP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Es(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,qu(r.key),r)}}function OP(t,e,i){return e&&Es(t.prototype,e),i&&Es(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function TP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Co(t,e)}function Co(t,e){return Co=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Co(t,e)}function EP(t){var e=IP();return function(){var r=Ur(t),n;if(e){var o=Ur(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return CP(this,n)}}function CP(t,e){if(e&&(vn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ln(t)}function Ln(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function IP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Ur(t){return Ur=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Ur(t)}function Je(t,e,i){return e=qu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function qu(t){var e=RP(t,"string");return vn(e)==="symbol"?e:String(e)}function RP(t,e){if(vn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(vn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var In="info",wi=uu,$P=function(t){TP(i,t);var e=EP(i);function i(){var r;kP(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Je(Ln(r),"_recordUserActions",function(s){var u=r._getTime(),l=Object.assign({},s,{msg:s.msg||s.action});r._stats[In].push(Cn(Cn({type:"userAction"},u),{},{payload:l}))}),Je(Ln(r),"_onReset",function(){r.reset()}),Je(Ln(r),"_recordInfo",function(s){r.info(s)}),Je(Ln(r),"_downloadStats",function(){var s=r.getStats(),u=new Blob([JSON.stringify(s)],{type:"application/json"}),l=window.URL.createObjectURL(u),c=document.createElement("a");c.style.display="none",c.href=l,c.download="player.txt",c.disabled=!1,c.click()}),r}return OP(i,[{key:"_getTime",value:function(){return{timestamp:Date.now(),timeFormat:new Date().toISOString()}}},{key:"afterCreate",value:function(){this.reset(),this.on(pr,this._recordUserActions),this.on(wi.STATS_INFO,this._recordInfo),this.on(wi.STATS_DOWNLOAD,this._downloadStats),this.on(wi.STATS_RESET,this._onReset)}},{key:"destroy",value:function(){this.offAll()}},{key:"downloadStats",value:function(){this._downloadStats()}},{key:"info",value:function(n){n.profile?this._infoProfile(n):this._info(n)}},{key:"_info",value:function(n){var o=this._getTime();this._stats[In].push(Cn(Cn({},o),{},{payload:n}))}},{key:"_infoProfile",value:function(n){if(n&&n.startMs){var o=Date.now(),a=o-n.startMs,s=Cn({cat:"function",dur:a,name:n.name||n.msg,ph:"X",pid:0,tid:0,ts:n.startMs,profile:!0},n);this._info(s)}else console.warn("infoProfile need object data, include startMs")}},{key:"reset",value:function(){var n;this._stats=(n={},Je(n,In,[]),Je(n,"media",{}),n)}},{key:"getStats",value:function(){for(var n=this.player,o=n.video,a=[],s=0;s<o.buffered.length;s++)a.push({start:o.buffered.start(s),end:o.buffered.end(s)});var u={currentTime:o.currentTime,readyState:o.readyState,buffered:a,paused:o.paused,ended:o.ended};return this._stats.media=u,{raw:this._stats,timestat:this._getTimeStats(),profile:this._getProfile()}}},{key:"_getTimeStats",value:function(){var n=this._stats[In],o=n.map(function(a){var s=a.payload.data,u="";try{s instanceof Error?u=s.msg:s!==void 0&&(u=JSON.stringify(s))}catch(l){console.log("err",l)}return"[".concat(a.timeFormat,"] : ").concat(a.payload.msg," ").concat(u," ")});return o}},{key:"_getProfile",value:function(){var n={traceEvents:[]},o=this._stats[In];return o.forEach(function(a){a.payload.profile&&n.traceEvents.push(a.payload)}),n}}],[{key:"pluginName",get:function(){return"stats"}},{key:"defaultConfig",get:function(){return{}}}]),i}(rt);function yn(t){"@babel/helpers - typeof";return yn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},yn(t)}function xP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Cs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Ju(r.key),r)}}function LP(t,e,i){return e&&Cs(t.prototype,e),i&&Cs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function AP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Io(t,e)}function Io(t,e){return Io=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Io(t,e)}function DP(t){var e=MP();return function(){var r=zr(t),n;if(e){var o=zr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return NP(this,n)}}function NP(t,e){if(e&&(yn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ro(t)}function Ro(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function MP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function zr(t){return zr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},zr(t)}function jP(t,e,i){return e=Ju(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Ju(t){var e=BP(t,"string");return yn(e)==="symbol"?e:String(e)}function BP(t,e){if(yn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(yn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Qu=function(t){AP(i,t);var e=DP(i);function i(){var r;xP(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),jP(Ro(r),"onGapJump",function(){var s=Ro(r),u=s.player,l=s.config;if(u.video.readyState!==HTMLMediaElement.HAVE_NOTHING){if(u.video.seeking){if(!r.seekingEventReceived)return}else r.seekingEventReceived=!1;if(!(u.video.paused&&u.video.currentTime!==0&&r.hasPlayed)){var c=u.video.buffered,f=l.smallGapLimit||.5,d=l.gapDetectionThreshold||.3,p=u.video.currentTime,y=r._getIndex(c,p,d);if(!(y===null||y===0)){console.log("GapJump  bufferRange ",c.start(y),c.end(y));var b=c.start(y)+.1,g=u.video.duration;if(!(b>g)){var T=b-p,E=T<=f;T<i.BROWSER_GAP_TOLERANCE||E&&(l.useGapJump!==!1&&(u.video.currentTime=r.isSafari?b+.1:b),r.player&&r.player.emit("detectGap"),console.log("gapJump gapIndex",y," isGapSamll:",E," currentTime:",u.video.currentTime," jumpSize:",p-u.video.currentTime),b!==.08&&u&&u.emit("log",{type:"oneevent",end_type:"gap",vid:u.config.vid,ext:{video_postion:Math.floor(b*1e3)}}))}}}}}),r}return LP(i,[{key:"afterCreate",value:function(){var n=this,o=this.config.useGapJump;o!==!1&&(this.hasPlayed=!1,this.seekingEventReceived=!1,this.isSafari=/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),this.on(Jn,this.onGapJump),this.on(be,function(){n.hasPlayed=!0}),this.on(Jo,function(){n.seekingEventReceived=!0}))}},{key:"_getIndex",value:function(n,o,a){if(!n||!n.length||n.length===1&&n.end(0)-n.start(0)<1e-6)return null;for(var s=this._getBuffered(n),u=null,l=0;l<s.length;l++){var c=s[l];if(c.start>o&&(l===0||s[l-1].end-o<=a)){u=l;break}}return u}},{key:"_getBuffered",value:function(n){if(!n)return[];for(var o=[],a=0;a<n.length;a++)o.push({start:n.start(a),end:n.end(a)});return o}}],[{key:"pluginName",get:function(){return"gapJump"}},{key:"defaultConfig",get:function(){return{useGapJump:!1,smallGapLimit:.5,gapDetectionThreshold:.3}}}]),i}(F);Qu.BROWSER_GAP_TOLERANCE=.001;function gn(t){"@babel/helpers - typeof";return gn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},gn(t)}function FP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Is(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,Zu(r.key),r)}}function HP(t,e,i){return e&&Is(t.prototype,e),i&&Is(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function VP(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&$o(t,e)}function $o(t,e){return $o=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},$o(t,e)}function UP(t){var e=KP();return function(){var r=Kr(t),n;if(e){var o=Kr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return zP(this,n)}}function zP(t,e){if(e&&(gn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return An(t)}function An(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function KP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Kr(t){return Kr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Kr(t)}function Rs(t,e,i){return e=Zu(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function Zu(t){var e=GP(t,"string");return gn(e)==="symbol"?e:String(e)}function GP(t,e){if(gn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(gn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var WP=function(t){VP(i,t);var e=UP(i);function i(){var r;FP(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),Rs(An(r),"onWaiting",function(){var s=An(r),u=s.config;r.jumpCnt>u.jumpCntMax||r.timer||u.useWaitingTimeoutJump===!1||(r.timer=setTimeout(r.onJump,u.waitingTime*1e3))}),Rs(An(r),"onJump",function(){var s=An(r),u=s.player,l=s.config;if(clearTimeout(r.timer),r.timer=null,!(r.jumpCnt>l.jumpCntMax||l.useWaitingTimeoutJump===!1)&&!(u.video.paused&&u.video.currentTime!==0&&r.hasPlayed)){r.jumpSize=l.jumpSize*(r.jumpCnt+1),r.jumpCnt===l.jumpSize&&r.jumpSize<6&&(r.jumpSize=6);var c=u.currentTime+r.jumpSize,f=u.video.duration;c>f||(r.jumpCnt++,u.currentTime=c)}}),r}return HP(i,[{key:"afterCreate",value:function(){var n=this,o=this.config,a=o.useWaitingTimeoutJump,s=o.jumpSize;a!==!1&&(this.hasPlayed=!1,this.jumpCnt=0,this.timer=null,this.jumpSize=s,this.on(Jn,this.onWaiting),this.on([qo,Le],function(){clearTimeout(n.timer),n.timer=null,n.jumpSize=n.config.jumpSize}),this.on(be,function(){n.hasPlayed=!0}))}}],[{key:"pluginName",get:function(){return"waitingTimeoutJump"}},{key:"defaultConfig",get:function(){return{useWaitingTimeoutJump:!1,waitingTime:15,jumpSize:2,jumpCntMax:4}}}]),i}(F);function mn(t){"@babel/helpers - typeof";return mn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},mn(t)}function YP(t){return QP(t)||JP(t)||qP(t)||XP()}function XP(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function qP(t,e){if(t){if(typeof t=="string")return xo(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return xo(t,e)}}function JP(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function QP(t){if(Array.isArray(t))return xo(t)}function xo(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function ZP(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function $s(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,el(r.key),r)}}function ew(t,e,i){return e&&$s(t.prototype,e),i&&$s(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function tw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Lo(t,e)}function Lo(t,e){return Lo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Lo(t,e)}function nw(t){var e=iw();return function(){var r=Gr(t),n;if(e){var o=Gr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return rw(this,n)}}function rw(t,e){if(e&&(mn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pe(t)}function Pe(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function iw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Gr(t){return Gr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Gr(t)}function We(t,e,i){return e=el(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function el(t){var e=ow(t,"string");return mn(e)==="symbol"?e:String(e)}function ow(t,e){if(mn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(mn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var St="cdn",rr=["cdn"],aw=function(t){tw(i,t);var e=nw(i);function i(){var r;ZP(this,i);for(var n=arguments.length,o=new Array(n),a=0;a<n;a++)o[a]=arguments[a];return r=e.call.apply(e,[this].concat(o)),We(Pe(r),"getSpeed",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:St;if(!r.speedListCache||!r.speedListCache[s]||r.speedListCache[s].length<=0)return 0;var u=0;return r.speedListCache[s].map(function(l){u+=l}),Math.floor(u/r.speedListCache[s].length)}),We(Pe(r),"startTimer",function(){h.isMSE(r.player.video)||(r.cnt=0,r.timer=setTimeout(r.testSpeed,r.config.testTimeStep))}),We(Pe(r),"initSpeedList",function(){r.speedListCache={},rr.forEach(function(s){r.speedListCache[s]=[]})}),We(Pe(r),"_onRealSpeedChange",function(s){s.speed&&r.appendList(s.speed,s.type||St)}),We(Pe(r),"testSpeed",function(){if(clearTimeout(r.timer),r.timer=null,!(!r.player||!r.config.openSpeed)){var s=r.config,u=s.url,l=s.loadSize,c=s.testCnt,f=s.testTimeStep,d=u+(u.indexOf("?")<0?"?testst=":"&testst=")+Date.now();if(!(r.cnt>=c)){r.cnt++;try{var p=new Date().getTime(),y=null,b=new XMLHttpRequest;r.xhr=b,b.open("GET",d);var g={},T=Math.floor(Math.random()*10);g.Range="bytes="+T+"-"+(l+T),g&&Object.keys(g).forEach(function(E){b.setRequestHeader(E,g[E])}),b.onreadystatechange=function(){if(b.readyState===4){r.xhr=null,y=new Date().getTime();var E=b.getResponseHeader("Content-Length")/1024*8,O=Math.round(E*1e3/(y-p));r.appendList(O),r.timer=setTimeout(r.testSpeed,f)}},b.send()}catch(E){console.error(E)}}}}),We(Pe(r),"appendList",function(s){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:St;if(!(!r.speedListCache||!r.speedListCache[u])){var l=r.config.saveSpeedMax;r.speedListCache[u].length>=l&&r.speedListCache[u].shift(),r.speedListCache[u].push(s);var c=Pe(r),f=c.player;f&&(u===St?f.realTimeSpeed=s:f[r.getSpeedName("realTime",u)]=s),r.updateSpeed(u)}}),We(Pe(r),"updateSpeed",function(){var s=arguments.length>0&&arguments[0]!==void 0?arguments[0]:St,u=r.getSpeed(s),l=Pe(r),c=l.player;if(c)if(s===St)(!c.avgSpeed||u!==c.avgSpeed)&&(c.avgSpeed=u,c.emit(Ii,{speed:u,realTimeSpeed:c.realTimeSpeed}));else{var f=r.getSpeedName("avg",s);(!c[f]||u!==c[f])&&(c[f]=u,c.emit(Ii,{speed:u,realTimeSpeed:c.realTimeSpeed}))}}),r}return ew(i,[{key:"afterCreate",value:function(){var n=this.config,o=n.openSpeed,a=n.addSpeedTypeList,s=n.testCnt;(a==null?void 0:a.length)>0&&rr.push.apply(rr,YP(a)),this.initSpeedList(),o&&(this.on("real_time_speed",this._onRealSpeedChange),this.timer=null,this.cnt=0,this.xhr=null,s>0&&this.on([It,cr],this.startTimer))}},{key:"getSpeedName",value:function(n,o){return n+"Speed"+o.toUpperCase()}},{key:"openSpeed",get:function(){return this.config.openSpeed},set:function(n){if(this.config.openSpeed=n,!n&&this.timer){clearTimeout(this.timer),this.timer=null;return}if(this.config.openSpeed){if(this.timer)return;this.timer=setTimeout(this.testSpeed,this.config.testTimeStep)}}},{key:"destroy",value:function(){var n=this;this.off("real_time_speed",this._onRealSpeedChange),this.off([It,cr],this.startTimer),rr.forEach(function(o){n.speedListCache&&n.speedListCache[o]&&(n.speedListCache[o]=[])}),this.speedListCache&&(this.speedListCache={}),clearTimeout(this.timer),this.timer=null,this.xhr&&this.xhr.readyState!==4&&(this.xhr.cancel&&this.xhr.cancel(),this.xhr=null)}}],[{key:"pluginName",get:function(){return"testspeed"}},{key:"defaultConfig",get:function(){return{openSpeed:!1,testCnt:3,loadSize:200*1024,testTimeStep:3e3,url:"",saveSpeedMax:5,addSpeedTypeList:[]}}}]),i}(F);function bn(t){"@babel/helpers - typeof";return bn=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},bn(t)}function sw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xs(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,lw(r.key),r)}}function uw(t,e,i){return e&&xs(t.prototype,e),i&&xs(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function lw(t){var e=cw(t,"string");return bn(e)==="symbol"?e:String(e)}function cw(t,e){if(bn(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e);if(bn(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}function fw(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&Ao(t,e)}function Ao(t,e){return Ao=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},Ao(t,e)}function hw(t){var e=vw();return function(){var r=Wr(t),n;if(e){var o=Wr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return dw(this,n)}}function dw(t,e){if(e&&(bn(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pw(t)}function pw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function vw(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Wr(t){return Wr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Wr(t)}var yw=function(t){fw(i,t);var e=hw(i);function i(){return sw(this,i),e.apply(this,arguments)}return uw(i,[{key:"afterCreate",value:function(){var n=this,o=this.player,a=this.config,s=o.media||o.video;a.disabled||!s.getVideoPlaybackQuality||(this.timer=null,this._resetData(),this.on(ti,function(){n._resetData(),n._stopTick()}),this.on(be,function(){n._startTick()}),this.on(pt,function(){n._stopTick()}),this.on(ze,function(){n._stopTick()}),this.on(kn,function(){n._stopTick()}))}},{key:"_startTick",value:function(){var n=this;this._stopTick(),this._timer=setTimeout(function(){n._checkDecodeFPS(),n._startTick()},this.config.tick)}},{key:"_stopTick",value:function(){clearTimeout(this._timer),this._timer=null}},{key:"_checkBuffer",value:function(n,o){for(var a=!1,s=[],u=0;u<o.length;u++){var l=o.start(u),c=o.end(u);if(s.push({start:l,end:c}),l<=n&&n<=c-1){a=!0;break}}return{enoughBuffer:a,buffers:s}}},{key:"_checkStuck",value:function(n,o,a,s){var u=this.player.media||this.player.video,l=document.hidden,c=u.paused,f=u.readyState,d=u.currentTime,p=u.buffered;if(!(l||c||f<4)){var y=this._checkBuffer(d,p),b=y.enoughBuffer,g=y.buffers;b&&(n<=this.config.reportFrame?(this._currentStuckCount++,this._payload.push({currentTime:d,buffers:g,curDecodedFrames:n,totalVideoFrames:o,droppedVideoFrames:a,checkInterval:s}),this._currentStuckCount>=this.config.stuckCount&&(this.emit(lu,this._payload),this._resetCheck())):this._resetCheck())}}},{key:"_resetCheck",value:function(){this._payload=[],this._currentStuckCount=0}},{key:"_resetData",value:function(){this._lastDecodedFrames=0,this._currentStuckCount=0,this._lastCheckPoint=null,this._payload=[]}},{key:"_checkDecodeFPS",value:function(){var n=this.player.media||this.player.video;if(n){var o=n.getVideoPlaybackQuality(),a=o.totalVideoFrames,s=o.droppedVideoFrames,u=performance.now();if(a&&this._lastCheckPoint){var l=a-this._lastDecodedFrames,c=u-this._lastCheckPoint;this._checkStuck(l,a,s,c)}this._lastDecodedFrames=a,this._lastCheckPoint=u}}},{key:"destroy",value:function(){this._stopTick(),this._resetData()}}],[{key:"pluginName",get:function(){return"FpsDetect"}},{key:"defaultConfig",get:function(){return{disabled:!1,tick:1e3,stuckCount:3,reportFrame:0}}}]),i}(F);function gw(t){return Pw(t)||_w(t)||bw(t)||mw()}function mw(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bw(t,e){if(t){if(typeof t=="string")return Do(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);if(i==="Object"&&t.constructor&&(i=t.constructor.name),i==="Map"||i==="Set")return Array.from(t);if(i==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return Do(t,e)}}function _w(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Pw(t){if(Array.isArray(t))return Do(t)}function Do(t,e){(e==null||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function ww(t,e,i){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Sw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Ot.use(SP);var kw=ww(function t(e,i){var r,n,o;Sw(this,t);var a=i&&i.isMobileSimulateMode==="mobile",s=i.isLive,u=s?[]:[ab,hP,G1,a_],l=[].concat(u,[Tb,Xb,C_,e0,Y0,o1,d0,k0,g_,z_]),c=[Gy,ng,pg,Km,kg,E1,M1,nP,tm];this.plugins=[Dy,$P,WP,Qu].concat(gw(l),c);var f=a?"mobile":D.device;switch(f){case"pc":(r=this.plugins).push.apply(r,[Ya,_i,gs,aw,yw]);break;case"mobile":(n=this.plugins).push.apply(n,[Om]);break;default:(o=this.plugins).push.apply(o,[Ya,_i,gs])}(D.os.isIpad||f==="pc")&&this.plugins.push(wP),D.os.isIpad&&this.plugins.push(_i),this.ignores=[],this.i18n=[]});function _n(t){"@babel/helpers - typeof";return _n=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_n(t)}function Ow(t,e,i){return Object.defineProperty(t,"prototype",{writable:!1}),t}function Tw(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function Ew(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&No(t,e)}function No(t,e){return No=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,n){return r.__proto__=n,r},No(t,e)}function Cw(t){var e=$w();return function(){var r=Yr(t),n;if(e){var o=Yr(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return Iw(this,n)}}function Iw(t,e){if(e&&(_n(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Rw(t)}function Rw(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function $w(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Yr(t){return Yr=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Yr(t)}function he(t,e,i){return e=xw(e),e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function xw(t){var e=Lw(t,"string");return _n(e)==="symbol"?e:String(e)}function Lw(t,e){if(_n(t)!=="object"||t===null)return t;var i=t[Symbol.toPrimitive];if(i!==void 0){var r=i.call(t,e||"default");if(_n(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var se=function(t){Ew(i,t);var e=Cw(i);function i(){return Tw(this,i),e.apply(this,arguments)}return Ow(i)}(oi);he(se,"defaultPreset",kw);he(se,"Util",h);he(se,"Sniffer",D);he(se,"Errors",lr);he(se,"Events",Mp);he(se,"Plugin",F);he(se,"BasePlugin",rt);he(se,"I18N",Ot);he(se,"STATE_CLASS",k);he(se,"PAUSE_TYPES",fu);he(se,"BUFFER_CONTROL_TYPES",Li);he(se,"InstManager",bu);const Aw={id:"mse"},Dw=C({__name:"XgPlayer",props:{url:{default:""},poster:{default:""}},setup(t){const e=t;return ae(()=>{new se({id:"mse",volume:0,lang:"zh",autoplay:!1,fluid:!0,controls:!0,leavePlayerTime:0,download:!0,keyShortcut:!0,url:e.url,poster:e.poster,start:{isShowPause:!0}})}),(i,r)=>(v(),_("div",Aw))}}),Nw=x(Dw,[["__scopeId","data-v-5ff9d243"]]),Mw={},jw={class:"panel"};function Bw(t,e){return v(),_("div",jw,e[0]||(e[0]=[pl('<div class="container" data-v-a35523fe><section class="grid" data-v-a35523fe><span class="text" data-v-a35523fe> 本站总访问量 <span id="busuanzi_value_site_pv" class="font-bold" data-v-a35523fe>--</span> 次 </span><span class="text" data-v-a35523fe> 本站访客数 <span id="busuanzi_value_site_uv" class="font-bold" data-v-a35523fe>--</span> 人次 </span></section></div>',1)]))}const Fw=x(Mw,[["render",Bw],["__scopeId","data-v-a35523fe"]]),Hw={class:"LastUpdated"},Vw=C({__name:"update",setup(t){const{page:e}=Pn(),i=L(()=>new Date(e.value.lastUpdated));return(r,n)=>(v(),_("div",Hw,[w("p",null,"更新时间: "+j(i.value.toLocaleString()),1)]))}}),zw={extends:Ks,Layout:ep,enhanceApp({app:t}){t.component("HomeUnderline",ip),t.component("XgPlayer",Nw),t.component("DataPanel",Fw),t.component("update",Vw)}};export{Ih as c,zw as t,N as u};
